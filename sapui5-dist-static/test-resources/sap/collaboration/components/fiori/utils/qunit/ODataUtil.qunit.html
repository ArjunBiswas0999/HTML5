<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ODataUtil Unit Tests</title>

<!-- UI5 Bootstrap -->
<script id="sap-ui-bootstrap" 
		type="text/javascript"
		src="../../../../../../../resources/sap-ui-core.js"
		data-sap-ui-theme="sap_bluecrystal"
		data-sap-ui-libs="sap.m"
		data-sap-ui-language="en">
</script>

<!-- libraries to be tested ******** LATER SHOULD BE IN THE BOOTSTRAP ******** -->

<!-- QUnit libraries -->
	<link rel="stylesheet"
		  href="../../../../../../../resources/sap/ui/thirdparty/qunit.css"
		  type="text/css" media="screen" />
	<script src="../../../../../../../resources/sap/ui/thirdparty/qunit.js"></script>
	<script type="text/javascript" src="../../../../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>
	<script type="text/javascript" src="/jsunit-testrunner/qunit/qunit-jsunit.js"></script>
	
 <!-- SINON JS SUPPORT START -->
	  <script type="text/javascript" src="../../../../../../../resources/sap/ui/thirdparty/sinon.js"></script>
	  <!--[if IE]>
	  <script type="text/javascript" src="../../../../../../../resources/sap/ui/thirdparty/sinon-ie.js"></script>
	  <![endif]-->
	  <script type="text/javascript" src="../../../../../../../resources/sap/ui/thirdparty/sinon-qunit.js"></script>
 <!-- SINON JS SUPPORT END -->
    
    <script>
    	
	 	jQuery.sap.require("jquery.sap.resources");
	 	jQuery.sap.require("sap.collaboration.components.utils.OdataUtil");
	 	jQuery.sap.require("sap.ui.model.odata.ODataModel");
	
		var oDataUtil = new sap.collaboration.components.utils.OdataUtil();
	</script>
    
    <script type="text/javascript">
		var sODataServiceUrl = "http://localhost:8080";
		//sODataServiceUrl ="http://localhost:8080/uilib-sample/proxy/https/vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV";
		var asJson = true;
    	var oOdataModel;
	    var server;    
    
	    module("OData Util - Test Success", {
	    	setup: function(){
		 		server = sinon.fakeServer.create();
		 		
    		    server.respondWith("GET", "/$metadata",
    			        [ 200, { "Content-Type": "application/xml" },
    			          '<?xml version="1.0" encoding="utf-8"?><edmx:Edmx Version="1.0" xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns:sap="http://www.sap.com/Protocols/SAPData"><edmx:DataServices m:DataServiceVersion="2.0"><Schema Namespace="SM_INTEGRATION_SRV" xml:lang="en" xmlns="http://schemas.microsoft.com/ado/2008/09/edm"><EntityType Name="Subscription" sap:semantics="subscriptions" sap:content-version="1"><Key><PropertyRef Name="ID"/></Key><Property Name="ID" Type="Edm.String" Nullable="false" MaxLength="32" sap:label="Sub. ID" sap:creatable="false" sap:updatable="false" sap:filterable="false"/><Property Name="user" Type="Edm.String" MaxLength="12" m:FC_TargetPath="SyndicationAuthorName" m:FC_KeepInContent="false" sap:label="User Name" sap:creatable="false" sap:filterable="false"/><Property Name="updated" Type="Edm.DateTime" Precision="0" m:FC_TargetPath="SyndicationUpdated" m:FC_KeepInContent="false" sap:label="Time Stamp" sap:creatable="false" sap:filterable="false"/><Property Name="title" Type="Edm.String" MaxLength="255" m:FC_TargetPath="SyndicationTitle" m:FC_KeepInContent="false" sap:label="Title" sap:filterable="false"/><Property Name="deliveryAddress" Type="Edm.String" sap:label="Delivery Address" sap:filterable="false"/><Property Name="persistNotifications" Type="Edm.Boolean" sap:label="Persist Notification" sap:filterable="false"/><Property Name="collection" Type="Edm.String" MaxLength="40" sap:label="Collection" sap:filterable="false"/><Property Name="filter" Type="Edm.String" sap:label="Filter" sap:filterable="false"/><Property Name="select" Type="Edm.String" MaxLength="255" sap:label="Select" sap:filterable="false"/><Property Name="changeType" Type="Edm.String" MaxLength="30" sap:label="Change Type"/></EntityType><EntityType Name="Notification" sap:semantics="notifications" sap:content-version="1"><Key><PropertyRef Name="ID"/></Key><Property Name="ID" Type="Edm.String" Nullable="false" MaxLength="32" sap:label="Notification ID"/><Property Name="collection" Type="Edm.String" MaxLength="40" sap:label="Collection"/><Property Name="title" Type="Edm.String" m:FC_TargetPath="SyndicationTitle" m:FC_KeepInContent="false" sap:label="Notif. Text"/><Property Name="updated" Type="Edm.DateTime" Precision="0" m:FC_TargetPath="SyndicationUpdated" m:FC_KeepInContent="false" sap:label="Time Stamp"/><Property Name="changeType" Type="Edm.String" MaxLength="30" sap:label="Change Type"/><Property Name="entriesOfInterest" Type="Edm.Int32" sap:label="No. of Entries"/><Property Name="recipient" Type="Edm.String" MaxLength="112" sap:label="Recipient" sap:creatable="false" sap:updatable="false"/></EntityType><EntityType Name="Group" sap:content-version="1"><Key><PropertyRef Name="Id"/></Key><Property Name="Participation" Type="Edm.String" Nullable="false"/><Property Name="AboutAsLanding" Type="Edm.Boolean" Nullable="false"/><Property Name="Announcement" Type="Edm.String"/><Property Name="AutoSubscribe" Type="Edm.Boolean" Nullable="false"/><Property Name="UploadPolicy" Type="Edm.String"/><Property Name="InvitePolicy" Type="Edm.String"/><Property Name="IsActive" Type="Edm.Boolean" Nullable="false"/><Property Name="Description" Type="Edm.String"/><Property Name="Name" Type="Edm.String"/><Property Name="Id" Type="Edm.Int32" Nullable="false"/><Property Name="CreatedAt" Type="Edm.DateTimeOffset" Nullable="false" Precision="0" sap:label="Time Stamp"/><Property Name="UpdatedAt" Type="Edm.DateTimeOffset" Nullable="false" Precision="0" sap:label="Time Stamp"/><Property Name="GroupType" Type="Edm.String" Nullable="false"/><NavigationProperty Name="Admins" Relationship="SM_INTEGRATION_SRV.Group_Admins" FromRole="FromRole_Group_Admins" ToRole="ToRole_Group_Admins"/><NavigationProperty Name="Creator" Relationship="SM_INTEGRATION_SRV.Group_Creator" FromRole="FromRole_Group_Creator" ToRole="ToRole_Group_Creator"/><NavigationProperty Name="GroupMembership" Relationship="SM_INTEGRATION_SRV.Group_GroupMembership" FromRole="FromRole_Group_GroupMembership" ToRole="ToRole_Group_GroupMembership"/><NavigationProperty Name="PendingInvites" Relationship="SM_INTEGRATION_SRV.Group_PendingInvites" FromRole="FromRole_Group_PendingInvites" ToRole="ToRole_Group_PendingInvites"/><NavigationProperty Name="Feed" Relationship="SM_INTEGRATION_SRV.Group_Feed" FromRole="FromRole_Group_Feed" ToRole="ToRole_Group_Feed"/></EntityType><EntityType Name="BusinessObject" sap:content-version="1"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.String" Nullable="false"/><NavigationProperty Name="NonAssignedGroups" Relationship="SM_INTEGRATION_SRV.BusinessObject_NonAssignedGroups" FromRole="FromRole_BusinessObject_NonAssignedGroups" ToRole="ToRole_BusinessObject_NonAssignedGroups"/><NavigationProperty Name="AssignedGroups" Relationship="SM_INTEGRATION_SRV.BusinessObject_AssignedGroups" FromRole="FromRole_BusinessObject_AssignedGroups" ToRole="ToRole_BusinessObject_AssignedGroups"/><NavigationProperty Name="Assignments" Relationship="SM_INTEGRATION_SRV.BusinessObject_Assignments" FromRole="FromRole_BusinessObject_Assignments" ToRole="ToRole_BusinessObject_Assignments"/></EntityType><EntityType Name="FeedEntry" sap:content-version="1"><Key><PropertyRef Name="Id"/></Key><Property Name="CreatedAt" Type="Edm.DateTimeOffset" Nullable="false" Precision="0" sap:label="Time Stamp"/><Property Name="CreatedBy" Type="Edm.String" Nullable="false"/><Property Name="Bookmarked" Type="Edm.Boolean" Nullable="false"/><Property Name="Liked" Type="Edm.Boolean" Nullable="false"/><Property Name="LikesCount" Type="Edm.Int32" Nullable="false"/><Property Name="RepliesCount" Type="Edm.Int32" Nullable="false"/><Property Name="Id" Type="Edm.Int32" Nullable="false"/><Property Name="Title" Type="Edm.String" Nullable="false"/><Property Name="Text" Type="Edm.String" Nullable="false"/><Property Name="CanDelete" Type="Edm.Boolean" Nullable="false"/></EntityType><EntityType Name="Image" m:HasStream="true" sap:content-version="1"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="false"/></EntityType><EntityType Name="GroupMember" sap:content-version="1"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.String" Nullable="false"/><Property Name="MemberType" Type="Edm.String" Nullable="false"/><Property Name="Action" Type="Edm.String"/><NavigationProperty Name="Member" Relationship="SM_INTEGRATION_SRV.GroupMember_Member" FromRole="FromRole_GroupMember_Member" ToRole="ToRole_GroupMember_Member"/></EntityType><EntityType Name="Member" sap:content-version="1"><Key><PropertyRef Name="Id"/></Key><Property Name="Title" Type="Edm.String"/><Property Name="Email" Type="Edm.String" Nullable="false"/><Property Name="FullName" Type="Edm.String"/><Property Name="Id" Type="Edm.Int32" Nullable="false"/><Property Name="CompanyId" Type="Edm.Int32"/><Property Name="Firstname" Type="Edm.String"/><Property Name="Lastname" Type="Edm.String"/><Property Name="Nickname" Type="Edm.String"/><NavigationProperty Name="ProfilePhoto" Relationship="SM_INTEGRATION_SRV.Member_ProfilePhoto" FromRole="FromRole_Member_ProfilePhoto" ToRole="ToRole_Member_ProfilePhoto"/></EntityType><EntityType Name="GroupInvite" sap:content-version="1"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.String" Nullable="false"/><Property Name="Message" Type="Edm.String" Nullable="false"/><Property Name="Email" Type="Edm.String" Nullable="false"/></EntityType><EntityType Name="BusinessObjectGroupAssignment" sap:content-version="1"><Key><PropertyRef Name="BusinessObjectId"/><PropertyRef Name="GroupId"/></Key><Property Name="BusinessObjectId" Type="Edm.String" Nullable="false"/><Property Name="GroupId" Type="Edm.Int32" Nullable="false"/></EntityType><EntityType Name="Notice" sap:content-version="1"><Key><PropertyRef Name="Id"/></Key><Property Name="GroupId" Type="Edm.Int32" Nullable="false"/><Property Name="GroupName" Type="Edm.String" Nullable="false"/><Property Name="Action" Type="Edm.String" Nullable="false"/><Property Name="RejectText" Type="Edm.String" Nullable="false"/><Property Name="AcceptText" Type="Edm.String" Nullable="false"/><Property Name="FirstSenderId" Type="Edm.Int32" Nullable="false"/><Property Name="FirstSenderFullName" Type="Edm.String" Nullable="false"/><Property Name="Status" Type="Edm.String" Nullable="false"/><Property Name="Description" Type="Edm.String" Nullable="false"/><Property Name="UpdatedAt" Type="Edm.DateTimeOffset" Nullable="false" Precision="0" sap:label="Time Stamp"/><Property Name="CreatedAt" Type="Edm.DateTimeOffset" Nullable="false" Precision="0" sap:label="Time Stamp"/><Property Name="Message" Type="Edm.String" Nullable="false"/><Property Name="EventType" Type="Edm.String" Nullable="false"/><Property Name="Id" Type="Edm.Int32" Nullable="false"/></EntityType><ComplexType Name="SingleUseToken"><Property Name="Id" Type="Edm.String" Nullable="false"/></ComplexType><ComplexType Name="CollaborationHostUrl"><Property Name="Url" Type="Edm.String" Nullable="false"/></ComplexType><ComplexType Name="SAPUser"><Property Name="Username" Type="Edm.String" Nullable="false"/><Property Name="EMail" Type="Edm.String" Nullable="false"/><Property Name="FullName" Type="Edm.String" Nullable="false"/></ComplexType><ComplexType Name="SAPGroupMember"><Property Name="MemberType" Type="Edm.String" Nullable="false"/><Property Name="Username" Type="Edm.String" Nullable="false"/><Property Name="Id" Type="Edm.String" Nullable="false"/><Property Name="Email" Type="Edm.String" Nullable="false"/><Property Name="FullName" Type="Edm.String" Nullable="false"/></ComplexType><Association Name="GroupMember_Member" sap:content-version="1"><End Type="SM_INTEGRATION_SRV.GroupMember" Multiplicity="0..1" Role="FromRole_GroupMember_Member"/><End Type="SM_INTEGRATION_SRV.Member" Multiplicity="0..1" Role="ToRole_GroupMember_Member"/></Association><Association Name="Member_ProfilePhoto" sap:content-version="1"><End Type="SM_INTEGRATION_SRV.Member" Multiplicity="0..1" Role="FromRole_Member_ProfilePhoto"/><End Type="SM_INTEGRATION_SRV.Image" Multiplicity="1" Role="ToRole_Member_ProfilePhoto"/></Association><Association Name="BusinessObject_AssignedGroups" sap:content-version="1"><End Type="SM_INTEGRATION_SRV.BusinessObject" Multiplicity="*" Role="FromRole_BusinessObject_AssignedGroups"/><End Type="SM_INTEGRATION_SRV.Group" Multiplicity="*" Role="ToRole_BusinessObject_AssignedGroups"/></Association><Association Name="BusinessObject_NonAssignedGroups" sap:content-version="1"><End Type="SM_INTEGRATION_SRV.BusinessObject" Multiplicity="*" Role="FromRole_BusinessObject_NonAssignedGroups"/><End Type="SM_INTEGRATION_SRV.Group" Multiplicity="*" Role="ToRole_BusinessObject_NonAssignedGroups"/></Association><Association Name="BusinessObject_Assignments" sap:content-version="1"><End Type="SM_INTEGRATION_SRV.BusinessObject" Multiplicity="1" Role="FromRole_BusinessObject_Assignments"/><End Type="SM_INTEGRATION_SRV.BusinessObjectGroupAssignment" Multiplicity="*" Role="ToRole_BusinessObject_Assignments"/></Association><Association Name="Group_Creator" sap:content-version="1"><End Type="SM_INTEGRATION_SRV.Group" Multiplicity="0..1" Role="FromRole_Group_Creator"/><End Type="SM_INTEGRATION_SRV.Member" Multiplicity="0..1" Role="ToRole_Group_Creator"/></Association><Association Name="Group_GroupMembership" sap:content-version="1"><End Type="SM_INTEGRATION_SRV.Group" Multiplicity="0..1" Role="FromRole_Group_GroupMembership"/><End Type="SM_INTEGRATION_SRV.GroupMember" Multiplicity="*" Role="ToRole_Group_GroupMembership"/></Association><Association Name="Group_PendingInvites" sap:content-version="1"><End Type="SM_INTEGRATION_SRV.Group" Multiplicity="0..1" Role="FromRole_Group_PendingInvites"/><End Type="SM_INTEGRATION_SRV.GroupInvite" Multiplicity="*" Role="ToRole_Group_PendingInvites"/></Association><Association Name="Group_Feed" sap:content-version="1"><End Type="SM_INTEGRATION_SRV.Group" Multiplicity="0..1" Role="FromRole_Group_Feed"/><End Type="SM_INTEGRATION_SRV.FeedEntry" Multiplicity="*" Role="ToRole_Group_Feed"/></Association><Association Name="Group_Admins" sap:content-version="1"><End Type="SM_INTEGRATION_SRV.Group" Multiplicity="0..1" Role="FromRole_Group_Admins"/><End Type="SM_INTEGRATION_SRV.Member" Multiplicity="*" Role="ToRole_Group_Admins"/></Association><EntityContainer Name="SM_INTEGRATION_SRV" m:IsDefaultEntityContainer="true"><EntitySet Name="SubscriptionCollection" EntityType="SM_INTEGRATION_SRV.Subscription" sap:content-version="1"/><EntitySet Name="NotificationCollection" EntityType="SM_INTEGRATION_SRV.Notification" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:addressable="false" sap:content-version="1"/><EntitySet Name="Groups" EntityType="SM_INTEGRATION_SRV.Group" sap:searchable="true" sap:requires-filter="true" sap:content-version="1"/><EntitySet Name="BusinessObjects" EntityType="SM_INTEGRATION_SRV.BusinessObject" sap:searchable="true" sap:requires-filter="true" sap:content-version="1"/><EntitySet Name="FeedEntries" EntityType="SM_INTEGRATION_SRV.FeedEntry" sap:content-version="1"/><EntitySet Name="Images" EntityType="SM_INTEGRATION_SRV.Image" sap:content-version="1"/><EntitySet Name="GroupMembers" EntityType="SM_INTEGRATION_SRV.GroupMember" sap:content-version="1"/><EntitySet Name="Members" EntityType="SM_INTEGRATION_SRV.Member" sap:content-version="1"/><EntitySet Name="GroupInvites" EntityType="SM_INTEGRATION_SRV.GroupInvite" sap:content-version="1"/><EntitySet Name="BusinessObjectGroupAssignments" EntityType="SM_INTEGRATION_SRV.BusinessObjectGroupAssignment" sap:content-version="1"/><EntitySet Name="Notices" EntityType="SM_INTEGRATION_SRV.Notice" sap:content-version="1"/><AssociationSet Name="Group_Feed" Association="SM_INTEGRATION_SRV.Group_Feed" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:content-version="1"><End EntitySet="Groups" Role="FromRole_Group_Feed"/><End EntitySet="FeedEntries" Role="ToRole_Group_Feed"/></AssociationSet><AssociationSet Name="BusinessObject_NonAssignedGroups" Association="SM_INTEGRATION_SRV.BusinessObject_NonAssignedGroups" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:content-version="1"><End EntitySet="BusinessObjects" Role="FromRole_BusinessObject_NonAssignedGroups"/><End EntitySet="Groups" Role="ToRole_BusinessObject_NonAssignedGroups"/></AssociationSet><AssociationSet Name="Group_PendingInvites" Association="SM_INTEGRATION_SRV.Group_PendingInvites" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:content-version="1"><End EntitySet="Groups" Role="FromRole_Group_PendingInvites"/><End EntitySet="GroupInvites" Role="ToRole_Group_PendingInvites"/></AssociationSet><AssociationSet Name="Group_GroupMembership" Association="SM_INTEGRATION_SRV.Group_GroupMembership" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:content-version="1"><End EntitySet="Groups" Role="FromRole_Group_GroupMembership"/><End EntitySet="GroupMembers" Role="ToRole_Group_GroupMembership"/></AssociationSet><AssociationSet Name="BusinessObject_Assignments" Association="SM_INTEGRATION_SRV.BusinessObject_Assignments" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:content-version="1"><End EntitySet="BusinessObjects" Role="FromRole_BusinessObject_Assignments"/><End EntitySet="BusinessObjectGroupAssignments" Role="ToRole_BusinessObject_Assignments"/></AssociationSet><AssociationSet Name="Group_Admins" Association="SM_INTEGRATION_SRV.Group_Admins" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:content-version="1"><End EntitySet="Groups" Role="FromRole_Group_Admins"/><End EntitySet="Members" Role="ToRole_Group_Admins"/></AssociationSet><AssociationSet Name="Member_ProfilePhoto" Association="SM_INTEGRATION_SRV.Member_ProfilePhoto" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:content-version="1"><End EntitySet="Members" Role="FromRole_Member_ProfilePhoto"/><End EntitySet="Images" Role="ToRole_Member_ProfilePhoto"/></AssociationSet><AssociationSet Name="Group_Creator" Association="SM_INTEGRATION_SRV.Group_Creator" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:content-version="1"><End EntitySet="Groups" Role="FromRole_Group_Creator"/><End EntitySet="Members" Role="ToRole_Group_Creator"/></AssociationSet><AssociationSet Name="BusinessObject_AssignedGroups" Association="SM_INTEGRATION_SRV.BusinessObject_AssignedGroups" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:content-version="1"><End EntitySet="BusinessObjects" Role="FromRole_BusinessObject_AssignedGroups"/><End EntitySet="Groups" Role="ToRole_BusinessObject_AssignedGroups"/></AssociationSet><AssociationSet Name="GroupMember_Members" Association="SM_INTEGRATION_SRV.GroupMember_Member" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:content-version="1"><End EntitySet="GroupMembers" Role="FromRole_GroupMember_Member"/><End EntitySet="Members" Role="ToRole_GroupMember_Member"/></AssociationSet><FunctionImport Name="GetSingleUseToken" ReturnType="SM_INTEGRATION_SRV.SingleUseToken" m:HttpMethod="GET"/><FunctionImport Name="GetCollaborationHostUrl" ReturnType="SM_INTEGRATION_SRV.CollaborationHostUrl" m:HttpMethod="GET"/><FunctionImport Name="GetMatchingSAPUsers" ReturnType="Collection(SM_INTEGRATION_SRV.SAPUser)" m:HttpMethod="GET"><Parameter Name="maxNumberOfMatchesToReturn" Type="Edm.Int32" Mode="In"/><Parameter Name="containedString" Type="Edm.String" Mode="In"/></FunctionImport><FunctionImport Name="GetGroupInviteList" ReturnType="Collection(SM_INTEGRATION_SRV.SAPGroupMember)" m:HttpMethod="GET"><Parameter Name="GroupId" Type="Edm.Int32" Mode="In"/></FunctionImport></EntityContainer><atom:link rel="self" href="https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/$metadata" xmlns:atom="http://www.w3.org/2005/Atom"/><atom:link rel="latest-version" href="https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/$metadata" xmlns:atom="http://www.w3.org/2005/Atom"/></Schema></edmx:DataServices></edmx:Edmx>'
    			        ]);
    		    
    		    server.respondWith("GET", "/GetCollaborationHostUrl",
    			        [ 200, { "Content-Type": "application/json" },
    			          '{    "d": { "GetCollaborationHostUrl": { "__metadata": { "type": "SM_INTEGRATION_SRV.CollaborationHostUrl" }, "Url": "https://integration3.cubetree.com" } } }'
    			        ]);
    		    

    		    
    		    server.respondWith("GET", "/GetSingleUseToken",
    			        [ 200, { "Content-Type": "application/json" },
    			          '{ "d": { "GetSingleUseToken": { "__metadata": { "type": "SM_INTEGRATION_SRV.SingleUseToken" }, "Id": "1234" } } }'
    			        ]);
    		    
    		    server.respondWith("GET", "/Groups",
    		    		[ 200, {  "Content-Type": "application/json" },
    		    			'{"d":{"results":[{"__metadata":{"id":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)","uri":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)","type":"SM_INTEGRATION_SRV.Group","properties":{"Admins":{"associationuri":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)/$links/Admins"},"Creator":{"associationuri":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)/$links/Creator"},"GroupMembership":{"associationuri":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)/$links/GroupMembership"},"PendingInvites":{"associationuri":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)/$links/PendingInvites"},"Feed":{"associationuri":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)/$links/Feed"}}},"Participation":"full","AboutAsLanding":false,"Announcement":"","AutoSubscribe":false,"UploadPolicy":"all","InvitePolicy":"followers","IsActive":true,"Description":"","Name":"Test","Id":1234,"CreatedAt":"\/Date(1362766082000+0000)\/","UpdatedAt":"\/Date(1378308568000+0000)\/","GroupType":"public_internal","Admins":{"__deferred":{"uri":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)/Admins"}},"Creator":{"__deferred":{"uri":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)/Creator"}},"GroupMembership":{"__deferred":{"uri":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)/GroupMembership"}},"PendingInvites":{"__deferred":{"uri":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)/PendingInvites"}},"Feed":{"__deferred":{"uri":"https://vmw3911.wdf.sap.corp:44335/sap/opu/odata/sap/SM_INTEGRATION_SRV/Groups(1234)/Feed"}}} ]}}'
    		    		]);   		    
	    	},
	    	tearDown: function(){
	    		server.restore();
	    	}
	    });
		
		test("Test Init OData Model (metadata)", function() {
		    oOdataModel = new sap.ui.model.odata.ODataModel(sODataServiceUrl, asJson);
		    notEqual(oOdataModel.oMetadata.oMetadata, undefined, "Data model created. Metadata Loaded");
		});
		
		test("Test Get Jam URL (/GetCollaborationHostUrl)", function(){
			var sJamUrl = oDataUtil.getJamUrl(oOdataModel);
			var sExpectedJamUrl = "https://integration3.cubetree.com";
			equal(sJamUrl, sExpectedJamUrl, "JAM URL retrieved successfully.");
		});
		
		test("Test Get Jam URL (/GetSingleUseToken)", function(){
			var sJamToken = oDataUtil.getJamToken(oOdataModel);
			var sExpectedJamToken = "1234";
			equal(sJamToken, sExpectedJamToken, "JAM Token retrieved successfully.");
		});
		
		test("Test Get Groups Data (/Groups)", function(){
			var aGroupsData = oDataUtil.getGroupsData(oOdataModel, "/Groups");
			var sGroupId = "1234";
			var aExpectedGroupsData = "someArray";

			notEqual(aGroupsData, undefined, "Group data retrieved successfully.");
			equal(aGroupsData.length, 1, "Group data contains one group.");
			equal(aGroupsData[0].Id, sGroupId, "Group data contains the right group ID.");
			//deepEqual(aGroupsData, aExpectedGroupsData, "Group data retrieved successfully.");
		});		
		
	</script>

</head>
<body>
	<div id="qunit"></div>
</body>
</html>