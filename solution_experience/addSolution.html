<!DOCTYPE html>
<html>
<head>
	<title>Add to my solutions</title>
	<style type="text/css">
		body{
			margin: 0px;
			padding: 0px;	
			font: 18px Arial, Helvetica, sans-serif;
		}
		.addBtn{
			background-color: #5BB75B;
			color:#ffffff;
			width:240px;
			height:24px;
			padding: 8px;
			text-align: center;
			cursor: pointer;
		}
		.addBtn:hover{
			background-color: #51A351;
		}
		.addBtn:active{
			background-color: #408140;
		}

		.addBtn.remove{
			background-color: red;
		}

		.addBtn.login{
			background-color: gray;
		}
	</style>
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/jquery.blockUI.js"></script>	
	<script type="text/javascript" src="js/utils.js"></script>
</head>
<body>
	<div class="addBtn">
		+ Add to my solutions
	</div>
	<script type="text/javascript">
		var solution_id = solution_experience.getUrlParam("id");
		var bi = new solution_experience.busyIndicator($("body"));
		$(document).ready(function(){
			$.ajax({
				url:"checklogin",
				cache: false,
				type:"POST",
				data:{"solutionId":solution_id},
				beforeSend: function(){
					bi.show();
				},
				complete: function(){					
					setTimeout(function(){
						bi.hide();
						if(solution_id == 2){							
							$(".addBtn").text("- Remove from my Solutions").addClass("remove");
						}
						if(solution_id == 3){							
							$(".addBtn").text("Please login").addClass("login");
							bindLogin();
							return;
						}
						bindBtn();
					},2000);					
				}
			});
		});

		function bindLogin(){
			$(".addBtn").on("click" ,function(){
				window.open("login","_target", 'width=500,height=500');
			});
		}

		function bindBtn(){
			$(".addBtn").on("click" ,function(){
				$.ajax({
					url:"test",
					cache: false,
					type:"POST",
					data:{"solutionId":solution_id},
					beforeSend: function(){
						bi.show();
					},
					complete: function(){
						setTimeout(function(){
							bi.hide();
							if($(".addBtn").hasClass("remove")){
								$(".addBtn").text("+ Add to my solutions").removeClass("remove");
							}
							else{
								$(".addBtn").text("- Remove from my Solutions").addClass("remove");
							}
						},2000);					
					}
				});
			});
		}

		var addCapability = function(data){
			$(".addBtn").text("- Remove from my Solutions").addClass("remove");
		};

		var clearCapability = function(data){
			$(".addBtn").text("+ Add to my solutions").removeClass("remove");
		};
		
	</script>
</body>
</html>