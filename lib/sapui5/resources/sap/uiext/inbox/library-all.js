jQuery.sap.declare('sap.uiext.inbox.library-all');if(!jQuery.sap.isDeclared('sap.uiext.inbox.InboxConstants')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.uiext.inbox.InboxConstants");sap.uiext.inbox.InboxConstants=function(){};sap.uiext.inbox.InboxConstants.prototype=jQuery.sap.newObject(sap.ui.base.Object.prototype);sap.uiext.inbox.InboxConstants.mEntities={taskMetadata:{propertiesLabel:["INBOX_TASK_TITLE","INBOX_FILTER_CREATION_DATE","INBOX_DUE_DATE","INBOX_STATUS","INBOX_PRIORITY"],properties:["TaskTitle","CreatedOn","CompletionDeadLine","Status","Priority"],customAttributes:[]}};sap.uiext.inbox.InboxConstants.TABLE_VIEW_TECH_NAMES={INBOX_TABLE_VIEW_TASK_TITLE:"TaskTitle",INBOX_TABLE_VIEW_CREATION_DATE:"CreatedOn",INBOX_TABLE_VIEW_DUE_DATE:"CompletionDeadLine",INBOX_TABLE_VIEW_STATUS:"Status",INBOX_TABLE_VIEW_PRIORITY:"Priority"};sap.uiext.inbox.InboxConstants.tableViewImageSelected="table_view_selected.png";sap.uiext.inbox.InboxConstants.tableViewImageUnselected="table_view_unselected.png";sap.uiext.inbox.InboxConstants.rrViewImageSelected="rr_view_selected.png";sap.uiext.inbox.InboxConstants.rrViewImageUnselected="rr_view_unselected.png";sap.uiext.inbox.InboxConstants.filterViewImageSelected="drilldown_filter_selected.png";sap.uiext.inbox.InboxConstants.filterViewImageUnSelected="drilldown_filter_unselected.png";sap.uiext.inbox.InboxConstants.nxtBtnImage="next.png";sap.uiext.inbox.InboxConstants.prevBtnImage="previous.png";sap.uiext.inbox.InboxConstants.refreshImage="refresh.png";sap.uiext.inbox.InboxConstants.refreshImageGif="refresh_ani.gif";sap.uiext.inbox.InboxConstants.loaderImage="loader_ani.gif";sap.uiext.inbox.InboxConstants.completeImage="complete_action.png";sap.uiext.inbox.InboxConstants.claimImage="claim_action.png";sap.uiext.inbox.InboxConstants.releaseImage="release_action.png";sap.uiext.inbox.InboxConstants.forwardTaskImage="forwardTask.png";sap.uiext.inbox.InboxConstants.settingsImage="settings_button_regular.png";sap.uiext.inbox.InboxConstants.settingsImageHover="settings_button_hover.png";sap.uiext.inbox.InboxConstants.sapLogo="sap_logo.gif";sap.uiext.inbox.InboxConstants.taskInitiatorDefaultImage="taskInitiator_default.png";sap.uiext.inbox.InboxConstants.attachmentsImage="attachment.png";sap.uiext.inbox.InboxConstants.commentsImage="comments.png";sap.uiext.inbox.InboxConstants.customAttributesImage="custom_attributes.png";sap.uiext.inbox.InboxConstants.COLON=":";sap.uiext.inbox.InboxConstants.DOT=String.fromCharCode(183);sap.uiext.inbox.InboxConstants.sortAscImage="sort_asc.gif";sap.uiext.inbox.InboxConstants.sortDescImage="sort_desc.gif";sap.uiext.inbox.InboxConstants.SPACE=" ";sap.uiext.inbox.InboxConstants.EQUALS="=";sap.uiext.inbox.InboxConstants.defaultView_URLParameter="sap-ui-inbox-defaultView";sap.uiext.inbox.InboxConstants.statusTooltip={COMPLETED:"INBOX_FILTER_STATUS_COMPLETED",READY:"INBOX_FILTER_STATUS_READY",RESERVED:"INBOX_FILTER_STATUS_RESERVED",IN_PROGRESS:"INBOX_FILTER_STATUS_IN_PROGRESS",SELECTED:"INBOX_FILTER_STATUS_RESERVED",STARTED:"INBOX_FILTER_STATUS_IN_PROGRESS",COMMITTED:"INBOX_FILTER_STATUS_COMPLETED"};sap.uiext.inbox.InboxConstants.prioTooltip={VERY_HIGH:"INBOX_FILTER_PRIORITY_VERY_HIGH",HIGH:"INBOX_FILTER_PRIORITY_HIGH",MEDIUM:"INBOX_FILTER_PRIORITY_MEDIUM",LOW:"INBOX_FILTER_PRIORITY_LOW",1:"INBOX_FILTER_PRIORITY_VERY_HIGH",2:"INBOX_FILTER_PRIORITY_VERY_HIGH",3:"INBOX_FILTER_PRIORITY_HIGH",4:"INBOX_FILTER_PRIORITY_HIGH",5:"INBOX_FILTER_PRIORITY_MEDIUM",6:"INBOX_FILTER_PRIORITY_LOW",7:"INBOX_FILTER_PRIORITY_LOW",8:"INBOX_FILTER_PRIORITY_LOW",9:"INBOX_FILTER_PRIORITY_LOW"};sap.uiext.inbox.InboxConstants.statusImages={COMPLETED:"completed_status.png",READY:"ready_status.png",RESERVED:"reserved_status.png",IN_PROGRESS:"inprocess_status.png",SELECTED:"reserved_status.png",STARTED:"inprocess_status.png",COMMITTED:"completed_status.png"};sap.uiext.inbox.InboxConstants.prioImages={VERY_HIGH:"very_high_priority.png",HIGH:"high_priority.png",MEDIUM:"medium_priority.png",LOW:"low_priority.png",1:"very_high_priority.png",2:"very_high_priority.png",3:"high_priority.png",4:"high_priority.png",5:"medium_priority.png",6:"low_priority.png",7:"low_priority.png",8:"low_priority.png",9:"low_priority.png"};sap.uiext.inbox.InboxConstants.taskInitiatorImages={ALERT:"taskInitiator_alert.png",NOTIFICATION:"taskInitiator_notification.png",TASK:"taskInitiator_default.png"};sap.uiext.inbox.InboxConstants.messageTypeIcons={error:"error.png",warning:"warning.png",success:"success.png",info:"Info.png"};sap.uiext.inbox.InboxConstants.messageTypeToolTip={error:"INBOX_MSG_STATUS_ERROR",warning:"INBOX_MSG_STATUS_WARN",success:"INBOX_MSG_STATUS_SUCCESS",info:"INBOX_MSG_STATUS_INFO"};sap.uiext.inbox.InboxConstants.closeImg="close_button.png";sap.uiext.inbox.InboxConstants.closeHovImg="close_hover.png";sap.uiext.inbox.InboxConstants.aFilterMetaData=[{name:"INBOX_FILTER_TASK_TYPE",attributes:[]},{name:"INBOX_FILTER_PRIORITY",attributes:["INBOX_FILTER_PRIORITY_LOW","INBOX_FILTER_PRIORITY_MEDIUM","INBOX_FILTER_PRIORITY_HIGH","INBOX_FILTER_PRIORITY_VERY_HIGH"]},{name:"INBOX_FILTER_STATUS",attributes:["INBOX_FILTER_STATUS_READY","INBOX_FILTER_STATUS_RESERVED","INBOX_FILTER_STATUS_IN_PROGRESS"]},{name:"INBOX_FILTER_CREATION_DATE",attributes:["INBOX_FILTER_DATETIME_TODAY","INBOX_FILTER_DATETIME_WEEK","INBOX_FILTER_DATETIME_15DAYS","INBOX_FILTER_DATETIME_MONTH"]},{name:"INBOX_FILTER_DUE_DATETIME",attributes:["INBOX_FILTER_DUE_DATETIME_TODAY","INBOX_FILTER_DUE_DATETIME_WEEK","INBOX_FILTER_DUE_DATETIME_15DAYS","INBOX_FILTER_DUE_DATETIME_MONTH"]}];sap.uiext.inbox.InboxConstants.rightAlignedTypes=["java.lang.Integer","java.math.BigDecimal","java.lang.Long","java.lang.Float"];sap.uiext.inbox.InboxConstants.decisionOptionsFunctionImport="DecisionOptions";sap.uiext.inbox.InboxConstants.decisionExecutionFunctionImport="Decision";sap.uiext.inbox.InboxConstants.claimFunctionImport="Claim";sap.uiext.inbox.InboxConstants.releaseFunctionImport="Release";sap.uiext.inbox.InboxConstants.tableView='sap_inbox_list';sap.uiext.inbox.InboxConstants.rowRepeaterView='sap_inbox_stream';sap.uiext.inbox.InboxConstants.inboxViews=[sap.uiext.inbox.InboxConstants.tableView,sap.uiext.inbox.InboxConstants.rowRepeaterView];sap.uiext.inbox.InboxConstants.customAction="customAction";sap.uiext.inbox.InboxConstants.sapOrigin="SAP__Origin";sap.uiext.inbox.InboxConstants.taskDefinitionDecisionOptionsMap={};sap.uiext.inbox.InboxConstants.forwardSlash="/";sap.uiext.inbox.InboxConstants.amperSand="&";sap.uiext.inbox.InboxConstants.query="?";sap.uiext.inbox.InboxConstants.formatJSONURLParam="$format=json";sap.uiext.inbox.InboxConstants.acceptHeaderforJSON="application/json";sap.uiext.inbox.InboxConstants.REFRESH_ON_DATE_PATTERN="MMM dd, HH:mm";sap.uiext.inbox.InboxConstants.FORWARD="Forward";sap.uiext.inbox.InboxConstants.customAttributeNavigationParam="CustomAttributeData"};if(!jQuery.sap.isDeclared('sap.uiext.inbox.InboxRenderer')){jQuery.sap.declare("sap.uiext.inbox.InboxRenderer");sap.uiext.inbox.InboxRenderer={};sap.uiext.inbox.InboxRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.writeAttribute("class","sapUiExtInbox");r.write(">");r.renderControl(c.vLayout);r.write("</div>")}};if(!jQuery.sap.isDeclared('sap.uiext.inbox.InboxUtils')){jQuery.sap.declare("sap.uiext.inbox.InboxUtils");sap.uiext.inbox.InboxUtils=function(){throw new Error()};sap.uiext.inbox.InboxUtils._getStatusFilters=function(v,p){switch(v){case"READY":return new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.EQ,"READY");case"RESERVED":return new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.EQ,"RESERVED");case"IN_PROGRESS":return new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.EQ,"IN_PROGRESS")}};sap.uiext.inbox.InboxUtils._getPriorityFilters=function(v,p){switch(v){case"LOW":return new sap.ui.model.Filter("Priority",sap.ui.model.FilterOperator.EQ,"LOW");case"MEDIUM":return new sap.ui.model.Filter("Priority",sap.ui.model.FilterOperator.EQ,"MEDIUM");case"HIGH":return new sap.ui.model.Filter("Priority",sap.ui.model.FilterOperator.EQ,"HIGH");case"VERY_HIGH":return new sap.ui.model.Filter("Priority",sap.ui.model.FilterOperator.EQ,"VERY_HIGH")}};sap.uiext.inbox.InboxUtils._getDueDateFilters=function(v,p){var f=this._getFormattedDateTimeOff(0);var a=undefined;switch(v){case"Today":a=this._getFormattedDueDateTimeOff(1);case"Next_7_days":a=this._getFormattedDueDateTimeOff(7);case"Next_15_days":a=this._getFormattedDueDateTimeOff(15);case"Next_30_days":a=this._getFormattedDueDateTimeOff(30)}return new sap.ui.model.Filter("CompletionDeadLine",[{operator:sap.ui.model.FilterOperator.LE,value1:a.toUTCString()},{operator:sap.ui.model.FilterOperator.GE,value1:f.toUTCString()}],true)};sap.uiext.inbox.InboxUtils._getDateTimeFilters=function(v,p){var f=undefined;switch(v){case"Today":f=this._getFormattedDateTimeOff(0,false);case"Last_7_days":f=this._getFormattedDateTimeOff(7,false);case"Last_15_days":f=this._getFormattedDateTimeOff(15,false);case"Last_30_days":f=this._getFormattedDateTimeOff(30,false)}return new sap.ui.model.Filter("CreatedOn",sap.ui.model.FilterOperator.GE,f.toUTCString())};sap.uiext.inbox.InboxUtils._getFormattedDueDateTimeOff=function(s){var m=new Date();m.setDate(m.getDate()+s);m.setMinutes(0);m.setHours(0);m.setSeconds(0);return m};sap.uiext.inbox.InboxUtils._getFormattedDateTimeOff=function(s,i){var m=new Date();m.setDate(m.getDate()-s);if(!i){m.setMinutes(0);m.setHours(0);m.setSeconds(0)}return m};sap.uiext.inbox.InboxUtils.inArray=function(k,m){var a=-1;jQuery.each(m,function(i,b){if(b[k]===k){a=i;return false}});return a};sap.uiext.inbox.InboxUtils._dateFormat=function(d){if(d!=undefined&&typeof(d)=='string'&&d!=""){var a;if(d.indexOf('Date')!=-1){a=new Date();a.setTime(d.substring((d.indexOf("(")+1),d.indexOf(")")))}else{a=new Date(d.substring((d.indexOf("'")+1),d.length-1))}d=a}if(d!=undefined&&d!=""){var i=sap.ui.core.format.DateFormat.getDateInstance({style:"medium"});return i.format(d)}return""};sap.uiext.inbox.InboxUtils.scrub=function(d){d=decodeURIComponent(d);d=d.replace(/[-:.\/]/g,"");d=d.replace(/-/g,"--");d=d.replace(/\s+/g,"-");if(!(/^([A-Za-z_][-A-Za-z0-9_.:]*)$/.test(d))){if(/^[^A-Za-z_]/.test(d)){d=d.replace(/^[^A-Za-z_]/,"_")}d.replace(/[^-\w_.:]/g,"_")}return d};sap.uiext.inbox.InboxUtils.setCookieValue=function(c,v,e){document.cookie=c+"="+escape(v)};sap.uiext.inbox.InboxUtils.getCookieValue=function(c){var i,x,y,C=document.cookie.split(";");for(i=0;i<C.length;i++){x=C[i].substr(0,C[i].indexOf("="));y=C[i].substr(C[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==(c)){return unescape(y)}}};sap.uiext.inbox.InboxUtils.deleteCookie=function(c){var d=new Date();document.cookie=c+"="+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}};if(!jQuery.sap.isDeclared('sap.uiext.inbox.SubstitutionRulesManagerConstants')){jQuery.sap.declare("sap.uiext.inbox.SubstitutionRulesManagerConstants");sap.uiext.inbox.SubstitutionRulesManagerConstants=function(){};sap.uiext.inbox.SubstitutionRulesManagerConstants.prototype=jQuery.sap.newObject(sap.ui.base.Object.prototype);sap.uiext.inbox.SubstitutionRulesManagerConstants.deleteSubstRule="delete.png";sap.uiext.inbox.SubstitutionRulesManagerConstants.updateRuleExecutionFunctionImport="Enable"};if(!jQuery.sap.isDeclared('sap.uiext.inbox.SubstitutionRulesManagerRenderer')){jQuery.sap.declare("sap.uiext.inbox.SubstitutionRulesManagerRenderer");sap.uiext.inbox.SubstitutionRulesManagerRenderer={};sap.uiext.inbox.SubstitutionRulesManagerRenderer.render=function(r,c){var a=r;a.write("<div");a.writeControlData(c);a.writeAttribute("class","sapuiextinbox-SubstitutionRulesManager");a.write(">");a.renderControl(c.vLayout);a.write("</div>")}};if(!jQuery.sap.isDeclared('sap.uiext.inbox.SubstitutionRulesManagerUtils')){jQuery.sap.declare("sap.uiext.inbox.SubstitutionRulesManagerUtils");sap.uiext.inbox.SubstitutionRulesManagerUtils=function(){throw new Error()};sap.uiext.inbox.SubstitutionRulesManagerUtils._getText=function(v,i,a,e,m,b,c){var _=sap.ui.getCore().getLibraryResourceBundle("sap.uiext.inbox");if(this._isOutDated(c)){return""}else{if(i){if(e){if(a){return v+" "+_.getText("SUBSTIUTION_RULE_CURRENTLY_RECEIVING_TASKS")}else{return v+" "+_.getText("SUBSTIUTION_RULE_WILL_RECEIVE_TASKS_FROM")+" "+this._getFormattedDate(b)}}else{if(m==='RECEIVE_TASKS'){return _.getText("SUBSTIUTION_RULE_IS_CURRENTLY_DISABLED_BY_YOU")}else{return v+" "+_.getText("SUBSTIUTION_RULE_HAS_NOT_ACTIVATED_YOUR")}}}else{if(e){if(a){return _.getText("SUBSTIUTION_RULE_CURRENTLY_RECEIVING_TASKS_FROM")+" "+v}else{return _.getText("SUBSTIUTION_RULE_YOU_WILL_RECEIVE_TASKS_FROM")+" "+v}}else{if(m==='RECEIVE_TASKS'){return _.getText("SUBSTIUTION_RULE_IS_CURRENTLY_DISABLED_BY")+" "+v}else{return _.getText("SUBSTIUTION_RULE_TURN_ON_TO_RECEIVE_TASKS_FROM")+" "+v}}}}};sap.uiext.inbox.SubstitutionRulesManagerUtils._isOutDated=function(e){if(e!==null&&e!==''){if(this._getTimeDiff(e)<0){return true}}return false};sap.uiext.inbox.SubstitutionRulesManagerUtils._isFutureDate=function(e){if(e!==null&&e!==''){if(this._getTimeDiff(e)>0){return true}}return false};sap.uiext.inbox.SubstitutionRulesManagerUtils._getStatus=function(i,a,e,m,b,c){var _=sap.ui.getCore().getLibraryResourceBundle("sap.uiext.inbox");if(this._isOutDated(c)){return _.getText("SUBSTITUTION_OUT_OF_DATE_RANGE")}else{if(i){if(e){if(a){return _.getText("SUBSTITUTION_RULE_ACTIVE_FOR_LABEL")+" "+this._getNoOfDays(a,b,c)}else{return _.getText("SUBSTITUTION_RULE_ACTIVE_IN_LABEL")+" "+this._getNoOfDays(a,b,c)}}else{return _.getText("SUBSTITUTION_DISABLED_STATUS")}}else{if(e){if(a){return _.getText("SUBSTITUTION_RULE_ACTIVE_FOR_LABEL")+" "+this._getNoOfDays(a,b,c)}else{return _.getText("SUBSTITUTION_RULE_ACTIVE_IN_LABEL")+" "+this._getNoOfDays(a,b,c)}}else{return _.getText("SUBSTITUTION_DISABLED_STATUS")}}}};sap.uiext.inbox.SubstitutionRulesManagerUtils._getNoOfDays=function(i,s,e){var _=sap.ui.getCore().getLibraryResourceBundle("sap.uiext.inbox");var t='';if(i){if(e!==null&&e!==''){var a=this._getTimeDiff(e)/(1000*60*60*24);if(a>1){var n=Math.floor(a);if(n===1){return n+" "+_.getText("SUBSTIUTION_RULE_IN_DAY")}else{return n+" "+_.getText("SUBSTIUTION_RULE_IN_MORE_DAYS")}}else if(a>0){return Math.ceil(a)+" "+_.getText("SUBSTIUTION_RULE_IN_DAY")}}return""}else{if(s!==null&&s!==''){var a=this._getTimeDiff(s)/(1000*60*60*24);if(a>1){var n=Math.floor(a);if(n===1){return n+" "+_.getText("SUBSTIUTION_RULE_IN_DAY")}else{return n+" "+_.getText("SUBSTIUTION_RULE_IN_DAYS")}}else if(a>0){return Math.ceil(a)+" "+_.getText("SUBSTIUTION_RULE_IN_DAY")}}return""}};sap.uiext.inbox.SubstitutionRulesManagerUtils._getFormattedDate=function(d){var i=sap.ui.core.format.DateFormat.getDateInstance({style:"medium"});if(d!=undefined&&d!=""){return i.format(d)}};sap.uiext.inbox.SubstitutionRulesManagerUtils._getTodaysDateinYYYYMMDD=function(){var d=new Date();var t=String(d.getFullYear());if(d.getMonth()<9){t=t+"0"}t=t+String(d.getMonth()+1);if(d.getDate()<9){t=t+"0"}t=t+String(d.getDate());return t};sap.uiext.inbox.SubstitutionRulesManagerUtils._getTimeDiff=function(e){var t=new Date();var o=t.getTimezoneOffset()*60*1000;var d=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24,00,00);var a=d.getTime()-(t.getTime());return a};sap.uiext.inbox.SubstitutionRulesManagerUtils._getTimeZoneOffset=function(){return undefined}};if(!jQuery.sap.isDeclared('sap.uiext.inbox.TaskInitialFilters')){jQuery.sap.declare("sap.uiext.inbox.TaskInitialFilters");sap.ui.base.Object.extend("sap.uiext.inbox.TaskInitialFilters",{constructor:function(s,p,d,t,D){sap.ui.base.Object.apply(this);this.aStatusFilters=s?s:[];this.aPriorityFilters=p?p:[];this.sDateTimeFilter=d;this.aTaskTypeFilters=t?t:[];this.sDueDateTimeFilter=D;this.aFiltersTobeApplied=[];this.sProviderHost="";this.inboxUtils=sap.uiext.inbox.InboxUtils}});sap.uiext.inbox.TaskInitialFilters.prototype.getFiltersTobeApplied=function(){var f=sap.uiext.inbox.TaskInitialFilters.FILTERSTOAPPLYMAP;var I={};var F=[];for(var i=0;i<this.aStatusFilters.length;i++){var a=f.filters.filterStatus;if(a[this.aStatusFilters[i]]!==undefined){var s=this.inboxUtils._getStatusFilters(this.aStatusFilters[i],this.getProviderHost());I[a[this.aStatusFilters[i]]]=s;F.push(s)}}for(var i=0;i<this.aPriorityFilters.length;i++){var b=f.filters.filterPriority;if(b[this.aPriorityFilters[i]]){var p=this.inboxUtils._getPriorityFilters(this.aPriorityFilters[i],this.getProviderHost());I[b[this.aPriorityFilters[i]]]=p;F.push(p)}}if(this.sDateTimeFilter!==null&&this.sDateTimeFilter!==undefined){var c=f.filters.filterDateTime;if(c[this.sDateTimeFilter]){var d=this.inboxUtils._getDateTimeFilters(this.sDateTimeFilter,this.getProviderHost());I[c[this.sDateTimeFilter]]=d;F.push(d)}}for(var i=0;i<this.aTaskTypeFilters.length;i++){var t=new sap.ui.model.Filter("TaskName",sap.ui.model.FilterOperator.EQ,this.aTaskTypeFilters[i]);I[this.aTaskTypeFilters[i]]=t;F.push(t)}if(this.sDueDateTimeFilter!==null&&this.sDueDateTimeFilter!==undefined){var e=f.filters.filterDueDateTime;if(e[this.sDueDateTimeFilter]){var g=this.inboxUtils._getDueDateFilters(this.sDueDateTimeFilter,this.getProviderHost());I[e[this.sDueDateTimeFilter]]=g;F.push(g)}}var T=[];for(var i=0;i<F.length;i++){var h=F[i];if(jQuery.isArray(h)){T=T.concat(h)}else T.push(h)}return{filterOperatorArray:T,filtersAppliedMap:I}};sap.uiext.inbox.TaskInitialFilters.prototype.getAttributesTobeSelected=function(){var f=sap.uiext.inbox.TaskInitialFilters.FILTERMAP;var s=[];var p=[];var d=[];var t=[];var D=[];for(var i=0;i<this.aStatusFilters.length;i++){var a=f.filters.filterStatus;if(a[this.aStatusFilters[i]])s.push(a[this.aStatusFilters[i]])}for(var i=0;i<this.aPriorityFilters.length;i++){var b=f.filters.filterPriority;if(b[this.aPriorityFilters[i]])p.push(b[this.aPriorityFilters[i]])}if(this.sDateTimeFilter!==null&&this.sDateTimeFilter!==undefined){var c=f.filters.filterDateTime;if(c[this.sDateTimeFilter])d.push(c[this.sDateTimeFilter])}for(var i=0;i<this.aTaskTypeFilters.length;i++){var e=this.aTaskTypeFilters[i];if(e){e=e.replace(/-/g,"--");e=e.replace(/\s+/g,"-");if(!(/^([A-Za-z_][-A-Za-z0-9_.:]*)$/.test(e))){if(/^[^A-Za-z_]/.test(e)){e=e.replace(/^[^A-Za-z_]/,"_")}e.replace(/[^-\w_.:]/g,"_")}t.push(e)}}if(this.sDueDateTimeFilter!==null&&this.sDueDateTimeFilter!==undefined){var g=f.filters.filterDueDateTime;if(g[this.sDueDateTimeFilter])D.push(g[this.sDueDateTimeFilter])}return{statusAtts:s,prioAtts:p,dateAtts:d,taskTypeAtts:t,dueDateAtts:D}};sap.uiext.inbox.TaskInitialFilters.FILTERMAP={filters:{filterStatus:{READY:"INBOX_FILTER_STATUS_READY",RESERVED:"INBOX_FILTER_STATUS_RESERVED",IN_PROGRESS:"INBOX_FILTER_STATUS_IN_PROGRESS"},filterPriority:{LOW:"INBOX_FILTER_PRIORITY_LOW",MEDIUM:"INBOX_FILTER_PRIORITY_MEDIUM",HIGH:"INBOX_FILTER_PRIORITY_HIGH",VERY_HIGH:"INBOX_FILTER_PRIORITY_VERY_HIGH"},filterDateTime:{Today:"INBOX_FILTER_DATETIME_TODAY",Last_7_days:"INBOX_FILTER_DATETIME_WEEK",Last_15_days:"INBOX_FILTER_DATETIME_15DAYS",Last_30_days:"INBOX_FILTER_DATETIME_MONTH"},filterDueDateTime:{Today:"INBOX_FILTER_DUE_DATETIME_TODAY",Next_7_days:"INBOX_FILTER_DUE_DATETIME_WEEK",Next_15_days:"INBOX_FILTER_DUE_DATETIME_15DAYS",Next_30_days:"INBOX_FILTER_DUE_DATETIME_MONTH"}}};sap.uiext.inbox.TaskInitialFilters.prototype.setProviderHost=function(p){this.sProviderHost=p};sap.uiext.inbox.TaskInitialFilters.prototype.getProviderHost=function(){return this.sProviderHost};sap.uiext.inbox.TaskInitialFilters.FILTERSTOAPPLYMAP={filters:{filterStatus:{READY:"readyStat",RESERVED:"resStat",IN_PROGRESS:"InProStat"},filterPriority:{LOW:"lowPrio",MEDIUM:"medPrio",HIGH:"hiPrio",VERY_HIGH:"veryhiPrio"},filterDateTime:{Today:"today",Last_7_days:"last7",Last_15_days:"last15",Last_30_days:"last30"},filterDueDateTime:{Today:"dueDateToday",Next_7_days:"dueDatenext7",Next_15_days:"dueDatenext15",Next_30_days:"dueDatenext30"}}}};if(!jQuery.sap.isDeclared('sap.uiext.inbox.library')){jQuery.sap.declare("sap.uiext.inbox.library");jQuery.sap.require('sap.ui.core.Core');jQuery.sap.require('sap.ui.core.library');jQuery.sap.require('sap.ui.commons.library');jQuery.sap.require('sap.ui.ux3.library');sap.ui.getCore().initLibrary({name:"sap.uiext.inbox",dependencies:["sap.ui.core","sap.ui.commons","sap.ui.ux3"],types:[],interfaces:[],controls:["sap.uiext.inbox.Inbox","sap.uiext.inbox.SubstitutionRulesManager"],elements:[],version:"1.10.0"})};if(!jQuery.sap.isDeclared('sap.uiext.inbox.SubstitutionRulesManager')){jQuery.sap.declare("sap.uiext.inbox.SubstitutionRulesManager");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.uiext.inbox.SubstitutionRulesManager",{metadata:{publicMethods:["bindSubstitutionRules"],library:"sap.uiext.inbox"}});
/*!
 * @copyright@
 */
sap.uiext.inbox.SubstitutionRulesManager.prototype.init=function(){var c=sap.ui.getCore().getConfiguration().getTheme();this._imgResourcePath=sap.ui.resource('sap.uiext.inbox','themes/'+c+'/img/');this._oBundle=sap.ui.getCore().getLibraryResourceBundle("sap.uiext.inbox");this.sUrl="";this.sPath="/SubstitutionRuleCollection";this.inboxUtils=sap.uiext.inbox.InboxUtils;this.substitutionRulesManagerUtils=sap.uiext.inbox.SubstitutionRulesManagerUtils;this.inboxConstants=sap.uiext.inbox.InboxConstants;this.substitutionConstants=sap.uiext.inbox.SubstitutionRulesManagerConstants};sap.uiext.inbox.SubstitutionRulesManager.prototype.exit=function(){this.vLayout.destroy();this.vLayout=null;function r(i){var I=sap.ui.getCore().byId(i);I&&I.destroy()}this._oBundle=undefined};sap.uiext.inbox.SubstitutionRulesManager.prototype.open=function(){this.sUrl=this.getModel().sServiceUrl;this.overlayContainer=this.populateOverlayContainer();this.overlayContainer.open()};sap.uiext.inbox.SubstitutionRulesManager.prototype.populateOverlayContainer=function(){var t=this;var d=this.getId()+'--';var s=sap.ui.getCore().byId(d+'substitutionOverlayContainer');if(s===undefined){s=new sap.ui.ux3.OverlayContainer(d+"substitutionOverlayContainer");s.setParent(this);s.setOpenButtonVisible(false);s.attachClose(t,t.deleteMessage);var o=sap.ui.getCore().byId(d+'substitutionVLayout');if(o===undefined){o=new sap.ui.commons.layout.VerticalLayout(d+"substitutionVLayout")}o.setWidth("95%");o.addStyleClass("verticalLayoutStyle");var e=sap.ui.getCore().byId(d+'substDummyLabel0');if(e===undefined){e=new sap.ui.commons.Label(this.getId()+'--'+"substDummyLabel0",{text:""})}var n=sap.ui.getCore().byId(d+'newSubstitutionLink');if(n===undefined){n=new sap.ui.commons.Link(d+'newSubstitutionLink',{text:this._oBundle.getText("SUBSTITUTION_RULE_CREATE_NEW_BUTTON"),tooltip:this._oBundle.getText("SUBSTITUTION_RULE_CREATE_TOOLTIP")})}n.attachPress(t,t.openCreateSubstRulePopup);n.addStyleClass("newSubstitutionLink");var N=sap.ui.getCore().byId(d+'subsNavBar');if(N===undefined){N=new sap.ui.ux3.NavigationBar(d+"subsNavBar",{items:[new sap.ui.ux3.NavigationItem(d+"mySubstitutes",{key:d+"mySubstitutes",text:this._oBundle.getText("SUBSTITUTION_MY_SUBSTITUTES_TAB_TITLE")}),new sap.ui.ux3.NavigationItem(d+"iamSubstituting",{key:d+"iamSubstituting",text:this._oBundle.getText("SUBSTITUTION_I_AM_SUBSTITUTING_TAB_TITLE")})]})}N.setSelectedItem(d+"mySubstitutes");N.addStyleClass("navigationBarMargin");var a=sap.ui.getCore().byId(d+'substDummyLabel');if(a===undefined){a=new sap.ui.commons.Label(this.getId()+'--'+"substDummyLabel",{text:""})}var v=0;o.insertContent(e,v);if(sap.ui.getCore().byId(this.getId()+'--'+'msgBarContainer')===undefined){o.insertContent(this.populateMsgBar(),++v)}o.insertContent(N,++v);o.insertContent(n,++v);o.insertContent(a,++v);var b=sap.ui.getCore().byId(d+'activeAndinactiveRulesVLayout');if(b===undefined){b=new sap.ui.commons.layout.VerticalLayout(d+"activeAndinactiveRulesVLayout");b.setWidth("100%");b.insertContent(new sap.ui.commons.Label({text:t._oBundle.getText("SUBSTITUTION_ACTIVE_SUBSTITUTION_RULE"),design:sap.ui.commons.LabelDesign.Bold}),0);b.insertContent(new sap.ui.commons.Label({text:""}),1);b.insertContent(new sap.ui.commons.Label({text:""}),2);b.insertContent(new sap.ui.commons.Label({text:""}),3);b.insertContent(new sap.ui.commons.Label({text:""}),4);b.insertContent(new sap.ui.commons.Label({text:""}),5);b.insertContent(new sap.ui.commons.Label({text:t._oBundle.getText("SUBSTITUTION_INACTIVE_SUBSTITUTION_RULE"),design:sap.ui.commons.LabelDesign.Bold}),6);b.insertContent(new sap.ui.commons.Label({text:""}),7);b.insertContent(new sap.ui.commons.Label({text:""}),8)}var m=++v;o.insertContent(t.getOverlayContent(d+"mySubstitutes",b),m);s.addContent(o);N.attachSelect(function(E){t.deleteMessage();var i=E.getParameter("item").getKey();o.removeContent(m);o.insertContent(t.getOverlayContent(i,b),m);s.rerender()})}else{var N=sap.ui.getCore().byId(d+'subsNavBar');N.setSelectedItem(d+"mySubstitutes");var b=sap.ui.getCore().byId(d+'activeAndinactiveRulesVLayout');var o=sap.ui.getCore().byId(d+'substitutionVLayout');o.insertContent(t.getOverlayContent(d+"mySubstitutes",b),m);s.addContent(o)}return s};sap.uiext.inbox.SubstitutionRulesManager.prototype.getOverlayContent=function(i,a){var d=this.getId()+'--';var t=this;var s={};var S=sap.ui.getCore().byId(d+'substitutionOverlayContainer');var n=sap.ui.getCore().byId(d+'newSubstitutionLink');var o=sap.ui.getCore().byId(d+'substitutionVLayout');if(s[i])return s[i];if(i===d+"mySubstitutes"){n.setVisible(true);a.removeContent(2);a.insertContent(t.createSubtRuleRowReapterContent(i,true),2);a.removeContent(8);a.insertContent(t.createSubtRuleRowReapterContent(i,false),8);s[i]=a}else if(i===d+"iamSubstituting"){n.setVisible(false);a.removeContent(2);a.insertContent(t.createSubtRuleRowReapterContent(i,true),2);a.removeContent(8);a.insertContent(t.createSubtRuleRowReapterContent(i,false),8);s[i]=a}return s[i]};sap.uiext.inbox.SubstitutionRulesManager.prototype.openCreateSubstRulePopup=function(e,s){var t=this;var d=s.getId()+'--';var n=sap.ui.getCore().byId(d+'newSubstitutionLink');var c=sap.ui.getCore().byId(d+'createSubsRulePopup');if(c===undefined){c=new sap.ui.ux3.ToolPopup(d+'createSubsRulePopup',{modal:true});var p=new sap.ui.commons.layout.MatrixLayout(d+'popupMainMatrix',{layoutFixed:true,width:'300px',columns:2,widths:["35%","65%"]});var a=new sap.ui.commons.layout.MatrixLayoutCell(d+'popupMainMatrixCell1',{colSpan:2});var b=new sap.ui.commons.layout.MatrixLayoutCell(d+'popupMainMatrixCellMsgBar',{colSpan:2});a.addContent(new sap.ui.commons.TextView(d+'popupCreateSubstRuleTxt',{text:s._oBundle.getText("CREATE_SUBSTITUTION_RULE"),design:sap.ui.commons.TextViewDesign.H3}).addStyleClass("textFontColour"));p.createRow(a);p.createRow(b);s.populateMessageBar(s);var f=new sap.ui.commons.layout.MatrixLayoutCell(d+'popupMainMatrixCell2',{colSpan:2});f.addContent(new sap.ui.commons.HorizontalDivider(d+'popHorzDivdr1'));p.createRow(f);var g=new sap.ui.commons.Label(d+'popupSubstLbl',{text:s._oBundle.getText("SUBSTITUTION_RULE_SUBSTITUTE_LABEL")});var h=new sap.ui.commons.ValueHelpField(d+'popupValueHelp',{width:'100%',value:""});h.attachValueHelpRequest(s,s.openUsersDialog);h.setRequired(true);h.setTooltip(s._oBundle.getText("SUBSTITUTION_RULE_SUBSTITUTE_TOOLTIP"));g.setLabelFor(h);p.createRow(g,h);var i=new sap.ui.commons.Label(d+'popupAutoFwdtLbl',{text:s._oBundle.getText("SUBSTITUTION_AUTOMATIC_FORWARDING_LABEL")});var j=new sap.ui.commons.SegmentedButton(d+'popupSegBtn',{buttons:[new sap.ui.commons.Button(d+'popupSegBtnON',{text:s._oBundle.getText("SUBSTITUTION_AUTOMATIC_FORWARDING_ON_STATE")}),new sap.ui.commons.Button(d+'popupSegBtnOFF',{text:s._oBundle.getText("SUBSTITUTION_AUTOMATIC_FORWARDING_OFF_STATE")})]});j.attachSelect(function(e){if(sap.ui.getCore().byId(e.getParameters().selectedButtonId).getText()==s._oBundle.getText("SUBSTITUTION_AUTOMATIC_FORWARDING_ON_STATE")){sap.ui.getCore().byId(d+'popupFromDatePicker').setProperty("visible",true);sap.ui.getCore().byId(d+'popupToDatePicker').setProperty("visible",true);sap.ui.getCore().byId(d+'popupFromLbl').setProperty("visible",true);sap.ui.getCore().byId(d+'popupToLbl').setProperty("visible",true);sap.ui.getCore().byId(d+'popupFromDatePicker').setProperty("required",true);sap.ui.getCore().byId(d+'popupToDatePicker').setProperty("required",true)}else{sap.ui.getCore().byId(d+'popupFromDatePicker').setProperty("visible",false);sap.ui.getCore().byId(d+'popupToDatePicker').setProperty("visible",false);sap.ui.getCore().byId(d+'popupFromLbl').setProperty("visible",false);sap.ui.getCore().byId(d+'popupToLbl').setProperty("visible",false);sap.ui.getCore().byId(d+'popupFromDatePicker').setProperty("required",false);sap.ui.getCore().byId(d+'popupToDatePicker').setProperty("required",false)}p.rerender()});j.setSelectedButton(d+"popupSegBtnON");i.setLabelFor(j);i.setWrapping(true);p.createRow(i,j);var k=new sap.ui.commons.Label(d+'popupFromLbl',{text:s._oBundle.getText("SUBSTITUTION_SUBSTITUTION_FROM_DATE_LABEL")});var l=new sap.ui.commons.DatePicker(d+'popupFromDatePicker',{text:s._oBundle.getText("SUBSTITUTION_SUBSTITUTION_FROM_DATE_LABEL"),width:'100%'});l.setRequired(true);l.setYyyymmdd(s.substitutionRulesManagerUtils._getTodaysDateinYYYYMMDD());k.setLabelFor(l);p.createRow(k,l);var m=new sap.ui.commons.Label(d+'popupToLbl',{text:s._oBundle.getText("SUBSTITUTION_SUBSTITUTION_TO_DATE_LABEL")});var o=new sap.ui.commons.DatePicker(d+'popupToDatePicker',{text:s._oBundle.getText("SUBSTITUTION_SUBSTITUTION_TO_DATE_LABEL"),width:'100%'});o.setRequired(true);m.setLabelFor(o);p.createRow(m,o);var q=new sap.ui.commons.layout.MatrixLayoutCell(d+'popupMainMatrixCell3',{colSpan:2});q.addContent(new sap.ui.commons.HorizontalDivider(d+'popHorzDivdr2'));p.createRow(q);var r=new sap.ui.commons.Button(d+'popupCreateBtn',{text:s._oBundle.getText("SUBSTITUTION_SUBSTITUTIN_RULE_CREATE_BUTTON")});r.attachPress(s,s.createSubstitutionRule);var u=new sap.ui.commons.Button(d+'popupCancelBtn',{text:s._oBundle.getText("SUBSTITUTION_SUBSTITUTIN_RULE_CANCEL_BUTTON"),press:function(){c.close();c.destroy()}});p.createRow(r,u);c.addContent(p)}s.deleteMessage();c.setPosition(sap.ui.core.Popup.Dock.LeftTop,sap.ui.core.Popup.Dock.RightTop,n.getDomRef(),"13 -10","none");c.open()};sap.uiext.inbox.SubstitutionRulesManager.prototype.createSubtRuleRowReapterContent=function(i,a){var b=(i===this.getId()+'--'+'mySubstitutes')?true:false;var d=i;if(a){d=d+'active'+'--'}else{d=d+'inactive'+'--'}var t=this;var s=sap.ui.getCore().byId(d+'subsRowRepeater');if(s===undefined){s=new sap.ui.commons.RowRepeater(d+'subsRowRepeater',{numberOfRows:2});s.attachPage(t,t.deleteMessage);s.setDesign(sap.ui.commons.RowRepeaterDesign.Transparent);s.setNoData(new sap.ui.commons.TextView({text:t._oBundle.getText("SUBSTITUTION_VALIDATION_MESSAGE_NO_SUBSTITUTION_RULES_FOUND")}));var r=new sap.ui.commons.layout.MatrixLayout(d+'rowRepMainMatrix',{layoutFixed:true,columns:6,widths:['2%','37%','24%','21%','12%','3%']});if(a){r.addStyleClass('borderFillColorGreen');r.addStyleClass('shadowEffectGreen');r.addStyleClass('mySapUiMltPadRight')}else{r.addStyleClass('borderFillColorGray');r.addStyleClass('shadowEffectGray')}var c=new sap.ui.commons.layout.MatrixLayoutCell(d+'rowRepEmptyCell');var e=new sap.ui.commons.TextView(d+'substitutionID');e.setVisible(false);e.bindProperty("text","SubstitutionRuleId");c.addContent(e);var f=new sap.ui.commons.layout.MatrixLayout(d+'rowRepSubsDetailMatLyt',{columns:1,layoutFixed:true});var g=new sap.ui.commons.layout.MatrixLayoutRow(d+'rowRepEmptyRow1');var h=new sap.ui.commons.TextView(d+'rowRepEmpltyTxt1',{text:""});var j=new sap.ui.commons.layout.MatrixLayoutCell(d+'rowRepEmpltyCell1',{backgroundDesign:sap.ui.commons.layout.BackgroundDesign.Transparent});j.addContent(h);g.addCell(j);var k=new sap.ui.commons.layout.MatrixLayoutRow(d+'rowRepSubstNameRow');var l;l=new sap.ui.commons.TextView(d+'rowRepSubstNameTxtView');l.bindProperty("text","FullName",function(Q){if(Q!==null&&Q!==""){return Q}});l.addStyleClass('blueFontColor');var m=new sap.ui.commons.layout.MatrixLayoutCell(d+'rowRepSubstNameCell',{backgroundDesign:sap.ui.commons.layout.BackgroundDesign.Transparent});m.addContent(l);k.addCell(m);f.addRow(k);var n=new sap.ui.commons.layout.MatrixLayoutRow(d+'rowRepUsrFriendlyRow');var o=new sap.ui.commons.TextView(d+'rowRepUsrFriendlyTxt');o.addStyleClass('blackFontColor');o.bindProperty("text","FullName",function(Q){if(Q!==null&&Q!==""&&Q){var R=this.getModel();return t.substitutionRulesManagerUtils._getText(Q,b,a,R.getProperty('IsEnabled',this.getBindingContext(),false),R.getProperty('Mode',this.getBindingContext(),false),R.getProperty('BeginDate',this.getBindingContext(),false),R.getProperty('EndDate',this.getBindingContext(),false))}});var p=new sap.ui.commons.layout.MatrixLayoutCell(d+'rowRepUsrFriendly');p.addContent(o);n.addCell(p);f.addRow(n);var q=new sap.ui.commons.layout.MatrixLayout(d+'rowRepSinceUntilMatLyt',{columns:1,layoutFixed:true});var u=new sap.ui.commons.layout.MatrixLayoutRow(d+'rowRepSinceDateRow');var v=new sap.ui.commons.TextView(d+'rowRepSinceDateTxt');v.addStyleClass('grayFontColor');var w=t._oBundle.getText("SUBSTITUTION_RULE_SINCE_LABEL");if(!a){w=t._oBundle.getText("SUBSTITUTION_SUBSTITUTION_FROM_DATE_LABEL")}v.bindProperty("text","BeginDate",function(Q){if(Q!==undefined&&Q!==null&Q!==""){var R=this.getModel();if(R.getProperty('Mode',this.getBindingContext(),false)==="RECEIVE_TASKS")return w+" : "+t.substitutionRulesManagerUtils._getFormattedDate(Q)}});var x=new sap.ui.commons.layout.MatrixLayoutCell(d+'rowRepSinceDate',{backgroundDesign:sap.ui.commons.layout.BackgroundDesign.Transparent});x.addContent(v);u.addCell(x);q.addRow(u);var y=new sap.ui.commons.layout.MatrixLayoutRow(d+'rowRepUntilDateRow');var z=new sap.ui.commons.TextView(d+'rowRepUntilDateTxt');z.addStyleClass('grayFontColor');z.bindProperty("text","EndDate",function(Q){if(Q!==undefined&&Q!==null&Q!==""){var R=this.getModel();if(R.getProperty('Mode',this.getBindingContext(),false)==="RECEIVE_TASKS")return t._oBundle.getText("SUBSTITUTION_RULE_UNTIL_LABEL")+" : "+t.substitutionRulesManagerUtils._getFormattedDate(Q)}});var A=new sap.ui.commons.layout.MatrixLayoutCell(d+'rowRepUntilDateCell');A.addContent(z);y.addCell(A);q.addRow(y);var B=new sap.ui.commons.layout.MatrixLayout(d+'rowRepActiveTimeMatLyt',{columns:1,layoutFixed:true});var C=new sap.ui.commons.layout.MatrixLayoutRow(d+'rowRepActiveRow');var D=new sap.ui.commons.TextView(d+'rowRepActiveTxt');D.addStyleClass('grayFontColor');D.bindProperty("text","FullName",function(Q){if(Q!==null&&Q!==""){var R=this.getModel();var S=R.getProperty('Mode',this.getBindingContext(),false);if(S==="RECEIVE_TASKS"){var T=t.substitutionRulesManagerUtils._getStatus(b,a,R.getProperty('IsEnabled',this.getBindingContext(),false),S,R.getProperty('BeginDate',this.getBindingContext(),false),R.getProperty('EndDate',this.getBindingContext(),false));return T}}});D.addStyleClass('blueFontColor');var E=new sap.ui.commons.layout.MatrixLayoutCell(d+'rowRepActiveCell',{backgroundDesign:sap.ui.commons.layout.BackgroundDesign.Transparent});E.addContent(D);C.addCell(E);B.addRow(C);var F=new sap.ui.commons.layout.MatrixLayoutRow(d+'rowRepTimeInDaysRow');var G=new sap.ui.commons.TextView(d+'rowRepTimeInDaysTxt');G.addStyleClass('blueFontColor');var H='';var I=new sap.ui.commons.layout.MatrixLayoutCell(d+'rowRepTimeInDaysCell');I.addContent(G);F.addCell(I);B.addRow(F);B.addRow(F);var J=new sap.ui.commons.SegmentedButton(d+'rowRepOnOffSegBtn',{visible:false,buttons:[new sap.ui.commons.Button(d+'rowRepOnSegBtn',{text:t._oBundle.getText("SUBSTITUTION_AUTOMATIC_FORWARDING_ON_STATE")}),new sap.ui.commons.Button(d+'rowRepOffSegBtn',{text:t._oBundle.getText("SUBSTITUTION_AUTOMATIC_FORWARDING_OFF_STATE")})]});var K="IsEnabled";if(i===this.getId()+'--iamSubstituting'){J.bindProperty("visible","Mode",function(Q){var R=t.getModel();var S=J.getBindingContext();var T=R.getProperty("SupportsEnable",S);if(Q!==null){if(Q==="RECEIVE_TASKS"){return false}else{return T}}else{return false}});K="TakenOver"}else{J.bindProperty("visible","Mode",function(Q){var R=t.getModel();var S=J.getBindingContext();var T=R.getProperty("SupportsEnable",S);if(Q!==null){if(Q==="RECEIVE_TASKS"){return T}else{return false}}else{return false}});K="IsEnabled"}J.bindProperty("enabled","IsEnabled",function(Q){if(Q!=null&&Q!==""){if(!Q){this.setSelectedButton(this.getButtons()[1].getId())}else{this.setSelectedButton(this.getButtons()[0].getId())}}return true});J.attachSelect(this,function(Q,R){var S=true;var T=true;if(K==="IsEnabled"){if(Q.getParameters().selectedButtonId.indexOf('rowRepOnSegBtn')===-1){S=false;T=true}else{S=true;T=true}}else{if(Q.getParameters().selectedButtonId.indexOf('rowRepOnSegBtn')===-1){T=false;S=true}else{T=true;S=true}}t.updateSubstitutionRule(Q,S,T,R)});if(b){var L=new sap.ui.commons.Image(d+'rowRepDeleteImg',{src:t._imgResourcePath+sap.uiext.inbox.SubstitutionRulesManagerConstants.deleteSubstRule,tooltip:this._oBundle.getText("SUBSTITUTION_RULE_DELETE"),decorative:false});L.setWidth("21px");L.setHeight("21px");L.attachPress(this,this.deleteSubstitutionRule);r.createRow(c,f,q,B,J,L)}else{r.createRow(c,f,q,B,J)}var M=new sap.ui.commons.layout.MatrixLayout(d+'rowRepMainMatrixWapperMatrix',{layoutFixed:true});M.createRow(r);M.createRow(new sap.ui.commons.TextView(d+'rowRepWapperMatEmptyTxt',{text:""}));var N="true";if(i===this.getId()+'--iamSubstituting'){N="false"}var O=[];var P=new sap.ui.model.Filter("IsSubstituted",sap.ui.model.FilterOperator.EQ,N);O.push(P);P=new sap.ui.model.Filter("IsActive",sap.ui.model.FilterOperator.EQ,a?"true":"false");O.push(P);s.bindRows(this.sPath,M,null,O)}else{this._refreshBindings(i,a)}return s};sap.uiext.inbox.SubstitutionRulesManager.prototype.formatUserName=function(v){if(v!==null&&v!==""){var i=v.indexOf(",");var l=v.substring(i+1);if(l===" ")v=v.substring(0,i);return v}};sap.uiext.inbox.SubstitutionRulesManager.prototype.bindSubstitutionRules=function(p){};sap.uiext.inbox.SubstitutionRulesManager.prototype.populateMsgBar=function(){var m=new sap.ui.commons.Toolbar(this.getId()+'--'+"msgBarContainer",{visible:false});var a=new sap.ui.commons.Image({id:this.getId()+'--'+"msbBarTypeImg",text:"",decorative:false});var b=new sap.ui.commons.TextView({id:this.getId()+'--'+"msbBarTextView",text:""});var c=new sap.ui.commons.Image({id:this.getId()+'--'+"msbBarCloseImg",text:"",decorative:false,tooltip:this._oBundle.getText("INBOX_MSGBAR_CLOSE_TOOLTIP")});c.addStyleClass("sapUiExtInboxToolbarRight");c.setSrc(this._imgResourcePath+sap.uiext.inbox.InboxConstants.closeImg);c.attachPress(this,this.deleteMessage);m.addItem(a);m.addItem(b);m.addItem(c);return m};sap.uiext.inbox.SubstitutionRulesManager.prototype.deleteMessage=function(e,s){if(s===undefined)s=this;var m=sap.ui.getCore().byId(s.getId()+'--'+'msgBarContainer');if(m!=undefined){m.setVisible(false);sap.ui.getCore().byId(s.getId()+'--'+'msbBarTextView').setText("");sap.ui.getCore().byId(s.getId()+'--'+'msbBarTypeImg').setSrc("")}};sap.uiext.inbox.SubstitutionRulesManager.prototype.showMessage=function(m,a){var b=sap.ui.getCore().byId(this.getId()+'--'+'msgBarContainer');if(b!=undefined){b.setVisible(true);var c=this._getComponent('msbBarTextView');c.setText(a);var d=this._getComponent('msbBarTypeImg');d.setSrc(this._imgResourcePath+sap.uiext.inbox.InboxConstants.messageTypeIcons[m]);d.setTooltip(this._oBundle.getText(sap.uiext.inbox.InboxConstants.messageTypeToolTip[m])+" "+a)}};sap.uiext.inbox.SubstitutionRulesManager.prototype._getComponent=function(c){return sap.ui.getCore().byId(this.getId()+'--'+c)};sap.uiext.inbox.SubstitutionRulesManager.prototype.deleteSubstitutionRule=function(e,s){var m=s.getModel();m.oHeaders["DataServiceVersion"]="1.0";m.remove(e.getSource().getBindingContext().sPath,undefined,function(){var n=sap.ui.getCore().byId(s.getId()+'--subsNavBar');var a=n.getSelectedItem();s._refreshBindings(a);s.showMessage("info",s._oBundle.getText("SUBSTITUTION_VALIDATION_MESSAGE_SUBSTITUTION_RULE_DELETED_SUCCESSFULLY"))},function(a){if(a.response===undefined||a.response.statusCode!=205){s.showMessage("error",s._oBundle.getText("SUBSTITUTION_VALIDATION_MESSAGE_SUBSTITUTION_RULE_DELETION_FAILURE_CONTACT_ADMIN"))}else if(a.response.statusCode==205){var b={statusCode:a.response.statusCode,statusText:a.response.statusText};m.fireRequestFailed(b)}})};sap.uiext.inbox.SubstitutionRulesManager.prototype.updateSubstitutionRule=function(e,a,t,s){var m=s.getModel();var c=e.getSource().getBindingContext();var r=m.getProperty("SubstitutionRuleId",c);var b=m.getProperty("SAP__Origin",c);var T=(t!==undefined)?t:false;var E=(a!==undefined)?a:false;var I=s.inboxConstants.forwardSlash+s.substitutionConstants.updateRuleExecutionFunctionImport+s.inboxConstants.query+"SubstitutionRuleId='"+r+"'"+s.inboxConstants.amperSand+"Enabled='"+E+"'"+s.inboxConstants.amperSand+"TakenOver='"+T+"'"+s.inboxConstants.amperSand+"SAP__Origin='"+b+"'"+s.inboxConstants.amperSand+s.inboxConstants.formatJSONURLParam;var d=s.sUrl+I;var f={async:false,requestUri:d,method:"POST",headers:{Accept:s.inboxConstants.acceptHeaderforJSON,"x-csrf-token":m.oHeaders["x-csrf-token"]}};OData.request(f,function(g,h){var n=sap.ui.getCore().byId(s.getId()+'--subsNavBar');var i=n.getSelectedItem();s._refreshBindings(i);s.showMessage("info",s._oBundle.getText("SUBSTITUTION_VALIDATION_MESSAGE_SUBSTITUTION_RULE_UPDATED_SUCCESSFULLY"))},function(g){if(g.response===undefined||g.response.statusCode!=205){s.showMessage("error",s._oBundle.getText("SUBSTITUTION_VALIDATION_MESSAGE_SUBSTITUTION_RULE_UPDATION_FAILURE_CONTACT_ADMIN"))}else if(g.response.statusCode==205){var h={statusCode:g.response.statusCode,statusText:g.response.statusText};m.fireRequestFailed(h)}})};sap.uiext.inbox.SubstitutionRulesManager.prototype.createSubstitutionRule=function(e,s){var t=this;var a=s.validate(s);if(a===false){var m=s.getModel();m.oHeaders["DataServiceVersion"]="1.0";var E={};var f=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyyMMdd"});var b;var c;var d=s._getComponent('popupToDatePicker').getYyyymmdd();if(d!=undefined&&d!==""){var g=d.substr(0,4);var h=d.substr(4,2);var i=d.substr(6,8);var o=s.substitutionRulesManagerUtils._getTimeZoneOffset();if(o!==undefined){o=o/(60*1000);c=new Date(Date.UTC(g,h-1,i,23,59-o,59,59))}else{c=f.parse(d);c.setHours(23,59,59,59)}}else{c=new Date(2100,01,01)}var j=s._getComponent('popupFromDatePicker').getYyyymmdd();if(j!=undefined&&j!==""){var k=j.substr(0,4);var l=j.substr(4,2);var n=j.substr(6,8);var o=s.substitutionRulesManagerUtils._getTimeZoneOffset();if(o!==undefined){o=o/(60*1000);b=new Date(Date.UTC(k,l-1,n,0,-o,0,0))}else{b=f.parse(j)}}else{b=new Date();b.setHours(0,0,0,0)}E.EndDate="\/Date("+c.getTime()+")\/";E.BeginDate="\/Date("+b.getTime()+")\/";var p=s._getComponent('popupValueHelp');E.FullName=p.getValue();E.User=p.data("uniqueName");var q=s._getComponent('popupSegBtn');var r=q.getSelectedButton();if(r.indexOf("popupSegBtnON")>=0){E.Mode="RECEIVE_TASKS";E.IsEnabled=true}else{E.Mode="TAKE_OVER";E.IsEnabled=true}var u=sap.ui.getCore().byId(s.getId()+'--createSubsRulePopup');m.create(s.sPath,E,null,function(D,v){s.showMessage("info",s._oBundle.getText("SUBSTITUTION_VALIDATION_MESSAGE_SUBSTITUTION_RULE_CREATED_SUCCESSFULLY"));s._refreshBindings(s.getId()+"--mySubstitutes");m.oHeaders["DataServiceVersion"]="2.0"},function(a){if(a.response===undefined||a.response.statusCode!=205){s.showMessage("error",s._oBundle.getText("SUBSTITUTION_VALIDATION_MESSAGE_SUBSTITUTION_RULE_CREATION_FAILURE_CONTACT_ADMIN"))}else if(a.response.statusCode==205){var v={statusCode:a.response.statusCode,statusText:a.response.statusText};m.fireRequestFailed(v)}});u.close();u.destroy()}};sap.uiext.inbox.SubstitutionRulesManager.prototype.openUsersDialog=function(e,s){var d=s.getId()+'--';var u=sap.ui.getCore().byId(d+"usersDialog");var t=sap.ui.getCore().byId(d+"userTable");if(u===undefined){var l=new sap.ui.commons.layout.MatrixLayout({id:d+'dLayout',layoutFixed:true,width:'100%',columns:2,widths:['91%','9%']});var a=new sap.ui.commons.TextField({id:d+'searchF',value:s._oBundle.getText("SUBSTITUTION_USERS_PICKLIST_SEARCH_LABEL"),editable:true,width:'100%'});a.addStyleClass("sapUiExtInboxSubstitutionValueHelpTextStyle");a.onfocusin=function(){a.removeStyleClass("sapUiExtInboxSubstitutionValueHelpTextStyle");if(a.getLiveValue()===s._oBundle.getText("SUBSTITUTION_USERS_PICKLIST_SEARCH_LABEL")){a.setValue("")}};a.onfocusout=function(){if(a.getLiveValue()===""){a.addStyleClass("sapUiExtInboxSubstitutionValueHelpTextStyle");a.setValue(s._oBundle.getText("SUBSTITUTION_USERS_PICKLIST_SEARCH_LABEL"))}else{a.setValue(a.getLiveValue())}};var g=new sap.ui.commons.Button(d+"goBtn",{text:s._oBundle.getText("SUBSTITUTION_USERS_PICKLIST_SEARCH_GO_BUTTON"),tooltip:s._oBundle.getText("SUBSTIUTION_RULE_SEARCH_FOR_USERS"),press:function(e){var c=sap.ui.getCore().byId(d+'searchF').getValue();var f=[];var h=new sap.ui.model.Filter("SearchPattern",sap.ui.model.FilterOperator.EQ,c);f.push(h);t.bindRows("/UserInfoCollection",null,f)}});l.createRow(a,g);var b={collection:"UserInfoCollection",propertiesLabel:[s._oBundle.getText("SUBSTITUTION_USERS_PICKLIST_LOGONID"),s._oBundle.getText("SUBSTITUTION_USERS_PICKLIST_NAME")],properties:["UniqueName","DisplayName"]};if(t===undefined){t=new sap.ui.table.Table(d+"userTable",{selectionMode:sap.ui.table.SelectionMode.Single})}t.setModel(s.getModel());t.setVisibleRowCount(5);t.bDynamic=true;for(var i=0;i<=b.properties.length-1;i++){t.addColumn(new sap.ui.table.Column().setLabel(new sap.ui.commons.Label({text:s._oBundle.getText(b.propertiesLabel[i]),design:sap.ui.commons.LabelDesign.Bold})).setTemplate(new sap.ui.commons.TextField({editable:false,value:{path:b.properties[i]}})))}var L=new sap.ui.commons.layout.VerticalLayout(d+"userDialogVLayout",{width:"100%"});L.insertContent(l,0);L.insertContent(t,1);u=new sap.ui.commons.Dialog(d+"usersDialog",{modal:true,title:s._oBundle.getText("SUBSTIUTION_RULE_SEARCH_FOR_USERS"),content:[L],buttons:[new sap.ui.commons.Button(d+"usersDialogOKBtn",{text:s._oBundle.getText("INBOX_BUTTON_OK_TEXT"),press:function(){var c=sap.ui.getCore().byId(d+"userTable");var f=c.getSelectedIndex();var r=c.getContextByIndex(f);var h=sap.ui.getCore().byId(d+'userTable').getModel();var j=h.getProperty("DisplayName",r);if(j===null)j="";var k=h.getProperty("UniqueName",r);var p=s._getComponent('popupValueHelp');p.setValue(j);p.data("uniqueName",k);u.destroy();u.close()}})]})}u.setWidth("400px");u.open()};sap.uiext.inbox.SubstitutionRulesManager.prototype.validate=function(s){var t=this;var v=false;var r="";var a,f;var F=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyyMMdd"});var e=s._getComponent('popupToDatePicker').getYyyymmdd();var b=s._getComponent('popupFromDatePicker').getYyyymmdd();if(e!=undefined&&e!==""){var c=e.substr(0,4);var d=e.substr(4,2);var g=e.substr(6,8);var o=s.substitutionRulesManagerUtils._getTimeZoneOffset();if(o!==undefined){o=o/(60*1000);a=new Date(Date.UTC(c,d-1,g,23,59-o,59,59))}else{a=F.parse(e);a.setHours(23,59,59,59)}}if(b!=undefined&&b!==""){var h=b.substr(0,4);var i=b.substr(4,2);var j=b.substr(6,8);var o=s.substitutionRulesManagerUtils._getTimeZoneOffset();if(o!==undefined){o=o/(60*1000);f=new Date(Date.UTC(h,i-1,j,0,-o,0,0))}else{f=F.parse(b)}}var k=s._getComponent('popupValueHelp').getValue();var p=s._getComponent('popupFromDatePicker').getProperty("required");if(k===null||k===""){v=true;r=s._oBundle.getText("SUBSTITUTION_VALIDATION_MESSAGE_SELECT_SUBSTITUTE")}if(v!=true&&p===true){if(a===null||f===null||a===""||f===""||isNaN(a)||isNaN(f)){v=true;r=s._oBundle.getText("SUBSTITUTION_VALIDATION_MESSAGE_ENTER_VALID_DATE_RANGE")}if(v!=true){if(a<f){v=true;r=s._oBundle.getText("SUBSTITUTION_VALIDATION_MESSAGE_FROM_DATE_AFTER_TODATE")}}}if(v!=true&&p!=true){if(a!=null&&f!=null){if(v!=true&&a<f){v=true;r=s._oBundle.getText("SUBSTITUTION_VALIDATION_MESSAGE_FROM_DATE_AFTER_TODATE")}}}if(v===true){s.displayMessage(s,"error",r)}return v};sap.uiext.inbox.SubstitutionRulesManager.prototype.populateMessageBar=function(s){var d=s.getId()+'--';var m=new sap.ui.commons.Toolbar(d+"msgBarContainer1",{visible:false});var a=new sap.ui.commons.Image({id:d+"msbBarTypeImg1",text:"",decorative:false});var b=new sap.ui.commons.TextView({id:d+"msbBarTextView1",text:""});var c=new sap.ui.commons.Image({id:d+"msbBarCloseImg1",text:"",decorative:false,tooltip:this._oBundle.getText("INBOX_MSGBAR_CLOSE_TOOLTIP")});c.addStyleClass("sapUiExtInboxToolbarRight");c.setSrc(this._imgResourcePath+sap.uiext.inbox.InboxConstants.closeImg);c.attachPress(s,this.hideMsgBar);m.addItem(a);m.addItem(b);m.addItem(c);var e=s._getComponent('popupMainMatrixCellMsgBar');e.addContent(m)};sap.uiext.inbox.SubstitutionRulesManager.prototype.displayMessage=function(s,m,a){var d=s.getId()+'--';var b=sap.ui.getCore().byId(d+'msgBarContainer1');if(b!=undefined){b.setVisible(true);var c=sap.ui.getCore().byId(d+'msbBarTextView1');c.setProperty("text",a);var e=sap.ui.getCore().byId(d+'msbBarTypeImg1');e.setProperty("src",this._imgResourcePath+sap.uiext.inbox.InboxConstants.messageTypeIcons[m]);e.setTooltip(this._oBundle.getText(sap.uiext.inbox.InboxConstants.messageTypeToolTip[m])+" "+a)}};sap.uiext.inbox.SubstitutionRulesManager.prototype.hideMsgBar=function(e,s){var d=s.getId()+"--";if(s===undefined)s=this;var m=sap.ui.getCore().byId(d+'msgBarContainer1');if(m!=undefined){m.setVisible(false);sap.ui.getCore().byId(d+'msbBarTextView1').setText("");sap.ui.getCore().byId(d+'msbBarTypeImg1').setSrc("")}};sap.uiext.inbox.SubstitutionRulesManager.prototype._refreshBindings=function(i,a){var d=i;var b="true";if(i===this.getId()+'--iamSubstituting'){b="false"}if(a===undefined){this._refreshBindings(i,true);this._refreshBindings(i,false)}else if(a){var f=[];var c=new sap.ui.model.Filter("IsSubstituted",sap.ui.model.FilterOperator.EQ,b);f.push(c);c=new sap.ui.model.Filter("IsActive",sap.ui.model.FilterOperator.EQ,"true");f.push(c);var w=sap.ui.getCore().byId(d+'active'+'--'+'rowRepMainMatrixWapperMatrix');var s=sap.ui.getCore().byId(d+'active'+'--'+'subsRowRepeater');s.bindRows(this.sPath,w,null,f);s.rerender()}else{var F=[];var e=new sap.ui.model.Filter("IsSubstituted",sap.ui.model.FilterOperator.EQ,b);F.push(e);e=new sap.ui.model.Filter("IsActive",sap.ui.model.FilterOperator.EQ,"false");F.push(e);var g=sap.ui.getCore().byId(d+'inactive'+'--'+'rowRepMainMatrixWapperMatrix');var S=sap.ui.getCore().byId(d+'inactive'+'--'+'subsRowRepeater');S.bindRows(this.sPath,g,null,F);S.rerender()}};sap.uiext.inbox.SubstitutionRulesManager.prototype.getSubstitutionRulesManagerUtils=function(){return this.substitutionRulesManagerUtils}};if(!jQuery.sap.isDeclared('sap.uiext.inbox.Inbox')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.uiext.inbox.Inbox");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.uiext.inbox.Inbox",{metadata:{publicMethods:["clearDrillDownFilter","clearRowSettings","bindTaskTable","getTaskTableBinding","bindTaskExecutionURL","bindTaskTypeDynamicFilter","bindSearch","setSubstitutionEnabled","getSubstitutionEnabled"],library:"sap.uiext.inbox",properties:{"taskExecutionURLThemeValue":{type:"string",group:"Misc",defaultValue:null},"handleBindings":{type:"boolean",group:"Misc",defaultValue:true},"openCompletedTasks":{type:"boolean",group:"Misc",defaultValue:false}},events:{"oDataRequestCompleted":{},"refresh":{},"taskAction":{}}}});sap.uiext.inbox.Inbox.M_EVENTS={'oDataRequestCompleted':'oDataRequestCompleted','refresh':'refresh','taskAction':'taskAction'};
/*!
 * @copyright@
 */
jQuery.sap.require('sap.ui.core.format.DateFormat');jQuery.sap.require('sap.ui.ux3.FacetFilter');jQuery.sap.require('sap.ui.ux3.FacetFilterList');jQuery.sap.require('sap.ui.commons.layout.MatrixLayout');jQuery.sap.require('sap.ui.commons.Image');jQuery.sap.require('sap.ui.commons.ToggleButton');jQuery.sap.require('sap.ui.commons.DropdownBox');jQuery.sap.require('sap.ui.core.ListItem');jQuery.sap.require('sap.ui.commons.SearchField');jQuery.sap.require('sap.ui.commons.Toolbar');jQuery.sap.require('sap.ui.commons.TextView');jQuery.sap.require('sap.ui.commons.Label');jQuery.sap.require('sap.ui.commons.Button');jQuery.sap.require('sap.ui.commons.ToolbarSeparator');jQuery.sap.require('sap.ui.commons.Link');jQuery.sap.require('sap.ui.table.Table');jQuery.sap.require('sap.ui.commons.TextField');jQuery.sap.require('sap.ui.ux3.OverlayContainer');jQuery.sap.require('sap.ui.core.HTML');jQuery.sap.require('sap.ui.commons.layout.BorderLayout');jQuery.sap.require('sap.ui.commons.layout.VerticalLayout');jQuery.sap.require('sap.ui.commons.RadioButtonGroup');jQuery.sap.require('sap.ui.commons.Dialog');jQuery.sap.require('sap.ui.model.Sorter');jQuery.sap.require('sap.ui.model.Filter');jQuery.sap.require('sap.ui.core.Locale');sap.uiext.inbox.Inbox.prototype.init=function(){this.inboxUtils=sap.uiext.inbox.InboxUtils;this.constants=sap.uiext.inbox.InboxConstants;this._oBundle=sap.ui.getCore().getLibraryResourceBundle("sap.uiext.inbox");var c=sap.ui.getCore().getConfiguration().getTheme();this._imgResourcePath=sap.ui.resource('sap.uiext.inbox','themes/'+c+'/img/');var u=jQuery.sap.getUriParameters();var d=this.constants.defaultView_URLParameter;var U=u.get(d);if(U===null){var a=this.inboxUtils.getCookieValue(d);this.defaultView=a!==undefined?a:this.constants.tableView}else{this.defaultView=jQuery.inArray(U,this.constants.inboxViews)===-1?this.constants.tableView:U;this.inboxUtils.setCookieValue(d,this.defaultView,1)}this.sProviderHost="";this.bRefreshTaskTypes=true;this.selectedContexts=[];this.sTypeOfModel="";this.bpmSvcUrl="";this.isSubstitutionEnabled=false;this.isCustomAttributesEnabled=false;this.isCustomActionsEnabled=false;this.showTaskDescription=false;this.isBatchOperationSupported=true;this.isForwardActionEnabled=false;this._substitutionPath="";this.sCollectionPath="TaskCollection";this.filtersToApply={};this.resetMessages=true;this.httpMethodForAction='POST';this.currentView=this.defaultView;this.getDefaultTaskExecutionURLCallBack=function(i,s){var I=this.sCollectionPath+"(InstanceID='"+i+"',SAP__Origin='"+s+"')/UIExecutionLink?$format=json";var r=this.bpmSvcUrl+I;var b="";var m=this.getCoreModel();var t=this;var e={async:false,requestUri:r,method:"GET",headers:{Accept:"application/json","x-csrf-token":m.oHeaders["x-csrf-token"]}};OData.request(e,function(f,g){b=f.GUI_Link},function(f){if(f.response.statusCode==205){var g={statusCode:f.response.statusCode,statusText:f.response.statusText};m.fireRequestFailed(g)}else{t.showMessage("error",t._oBundle.getText("INBOX_MSG_ERR_EXUI")+i)}});return b};this.getTaskExecURLStatusCallBack=function(i,s){var b="";var r=this.bpmSvcUrl+this.sCollectionPath+"(InstanceID='"+i+"',SAP__Origin='"+s+"')?$format=json";var m=this.getCoreModel();var t=this;var e={async:false,requestUri:r,method:"GET",headers:{Accept:"application/json","x-csrf-token":m.oHeaders["x-csrf-token"]}};OData.request(e,function(f,g){b=f.Status},function(f){if(f.response.statusCode==205){var g={statusCode:f.response.statusCode,statusText:f.response.statusText};m.fireRequestFailed(g)}else{t.showMessage("error",t._oBundle.getText("INBOX_MSG_ERR_EXUI")+i)}});return b};this.searchCallBack="";this.dynamicTaskTypeFilterCallBack="";this.getTaskExecutionURLCallBack=this.getDefaultTaskExecutionURLCallBack;this.lastRefreshedOnDateTime=new Date();this.vLayout=this.createInboxUI();this.vLayout.setParent(this);this.addAndRemoveSubstDropDowns();this.constants=sap.uiext.inbox.InboxConstants;this.lastRefreshedOnDateTime=new Date()};sap.uiext.inbox.Inbox.prototype.exit=function(){this.vLayout.destroy();this.vLayout=null;function r(i){var I=sap.ui.getCore().byId(i);I&&I.destroy()}r(this.getId()+'--'+"dropdownCell1");r(this.getId()+'--'+"dropdownCell2");r(this.getId()+'--'+"dropdownCell3");r(this.getId()+'--'+"manageSubstitutionMI");this._oBundle=undefined};sap.uiext.inbox.Inbox.prototype.createAttributes=function(a,p){var t=this;var A=new sap.ui.ux3.FacetFilterList(this.getId()+'--'+a.name);A.setTitle(this._oBundle.getText(a.name));for(var i=0;i<a.attributes.length;i++){if(typeof a.attributes[i]=="string"||a.attributes[i].key!=undefined){var b;var o;if(a.attributes[i].key!=undefined){var c=a.attributes[i];b=t.inboxUtils.scrub(c.key);o=new sap.ui.core.ListItem(this.getId()+'--'+b,{text:a.attributes[i].value,key:a.attributes[i].key});if(c.instanceID){o.data("InstanceID",c.instanceID);o.data("SAP__Origin",c.sap__Origin)}}else{b=t.inboxUtils.scrub(a.attributes[i]);o=new sap.ui.core.ListItem(this.getId()+'--'+b,{text:this._oBundle.getText(a.attributes[i]),key:b})}A.addItem(o)}else{t.createAttributes(a.attributes[i],A)}}p.addList(A)};sap.uiext.inbox.Inbox.prototype.toggleFilterView=function(e,I){var t=I;var f=sap.ui.getCore().byId(t.getId()+'--'+"filterFacet");t.showBusyLoader();if(f===undefined){f=new sap.ui.ux3.FacetFilter(t.getId()+'--'+"filterFacet");for(var a=0;a<sap.uiext.inbox.InboxConstants.aFilterMetaData.length;a++){t.createAttributes(sap.uiext.inbox.InboxConstants.aFilterMetaData[a],f)}var v=sap.ui.getCore().byId(t.getId()+'--'+"verticalLayoutContainer");v.insertContent(f,2)}var l=f.getLists();for(var i=0;i<l.length;i++){if(l[i].getId()===t.getId()+'--'+"INBOX_FILTER_PRIORITY"){l[i].attachSelect(t,t.applyDrillDownFilterForPriority)}else if(l[i].getId()===t.getId()+'--'+"INBOX_FILTER_STATUS"){l[i].attachSelect(t,t.applyDrillDownFilterForStatus)}else if(l[i].getId()===t.getId()+'--'+"INBOX_FILTER_CREATION_DATE"){l[i].setMultiSelect(false);l[i].attachSelect(t,t.applyDrillDownFilterForDateTime)}else if(l[i].getId()===t.getId()+'--'+"INBOX_FILTER_TASK_TYPE"){l[i].attachSelect(t,t.applyDrillDownFilterForTaskType)}else if(l[i].getId()===t.getId()+'--'+"INBOX_FILTER_DUE_DATETIME"){l[i].setMultiSelect(false);l[i].attachSelect(t,t.applyDrillDownFilterForDueDate)}}var s=sap.ui.getCore().byId(t.getId()+'--'+"INBOX_FILTER_STATUS");if(sap.ui.getCore().byId(t.getId()+'--'+"filterComboBox2").getSelectedItemId()===t.getId()+'--'+"li_completedTasks"){if(s!=undefined){f.removeList(s)}if(F!==undefined){f.removeList(F)}}var F=sap.ui.getCore().byId(t.getId()+'--'+"INBOX_FILTER_CREATION_DATE");var o=sap.ui.getCore().byId(t.getId()+'--'+"INBOX_FILTER_DUE_DATETIME");var S=sap.ui.getCore().byId(t.getId()+'--'+"filterComboBox2").getSelectedItemId();if(S===t.getId()+'--'+"li_overdueTasks"||S===t.getId()+'--'+"li_escalatedTasks"){if(F!==undefined&&f.indexOfList(F)!==-1){f.removeList(F)}if(o!==undefined&&f.indexOfList(o)!==-1){f.removeList(o)}}var b=e.getSource();if(b.getIcon()===t._imgResourcePath+sap.uiext.inbox.InboxConstants.filterViewImageUnSelected){b.setIcon(t._imgResourcePath+sap.uiext.inbox.InboxConstants.filterViewImageSelected);f.setVisible(true)}else{b.setIcon(t._imgResourcePath+sap.uiext.inbox.InboxConstants.filterViewImageUnSelected);f.setVisible(false)}t.resetSearchCriteria();t.hideBusyLoader()};sap.uiext.inbox.Inbox.prototype.populateFilterButtonContainer=function(f){var a=new sap.ui.commons.layout.MatrixLayoutCell({id:this.getId()+'--'+"filterButtonCell"});var s=false;var b=new sap.ui.commons.ToggleButton(this.getId()+'--'+"filterViewButton",{icon:this._imgResourcePath+sap.uiext.inbox.InboxConstants.filterViewImageUnSelected,pressed:false,tooltip:this._oBundle.getText("INBOX_BUTTON_FILTER_VIEW_TOOLTIP")});b.attachPress(this,this.toggleFilterView);b.addStyleClass("sapUiExtInboxToolBarContainerHeight");a.addContent(b);a.setPadding(sap.ui.commons.layout.Padding.None);f.createRow(a)};sap.uiext.inbox.Inbox.prototype.addAndRemoveSubstDropDowns=function(){var d=sap.ui.getCore().byId(this.getId()+'--'+"dropdownRow");var s=sap.ui.getCore().byId(this.getId()+'--'+'inboxSettingsMenu');var r=sap.ui.getCore().byId(this.getId()+'--'+'rrSettingsMenu');var a=sap.ui.getCore().byId(this.getId()+'--'+"dropdownCell1");var b=sap.ui.getCore().byId(this.getId()+'--'+"dropdownCell2");var c=sap.ui.getCore().byId(this.getId()+'--'+"dropdownCell3");var e=sap.ui.getCore().byId(this.getId()+'--'+"manageSubstitutionMI");if(this.getSubstitutionEnabled()){d.addCell(a);d.addCell(b);d.addCell(c);s.addItem(e)}else{if(d!=undefined){d.removeCell(a);d.removeCell(c)}if(s!=undefined){s.removeItem(e)}}};sap.uiext.inbox.Inbox.prototype.populateDropDownContainer=function(d){var a=new sap.ui.commons.layout.MatrixLayoutRow(this.getId()+'--'+"dropdownRow");var b=new sap.ui.commons.layout.MatrixLayoutCell(this.getId()+'--'+"dropdownCell1");b.setPadding(sap.ui.commons.layout.Padding.None);var c=new sap.ui.commons.DropdownBox(this.getId()+'--'+"filterComboBox1",{tooltip:this._oBundle.getText("INBOX_TASKS_FILTER_DROPDOWN_TOOLTIP"),items:[new sap.ui.core.ListItem(this.getId()+'--'+"li_allTasks",{text:this._oBundle.getText("INBOX_DROP_DOWN_VALUE_ALL_TASKS")}),new sap.ui.core.ListItem(this.getId()+'--'+"li_myTasks",{text:this._oBundle.getText("INBOX_MY_TASKS_TEXT")}),new sap.ui.core.ListItem(this.getId()+'--'+"li_substitutedTasks",{text:this._oBundle.getText("SUBSTITUTION_INBOX_DROP_DOWN_VALUE_TASKS_ASSIGNED_TO_ME")})]});c.attachChange(this,this.applyDropDownFilter1);c.setValue(this._oBundle.getText("INBOX_DROP_DOWN_VALUE_ALL_TASKS"));c.addStyleClass("sapUiExtInboxToolBarContainerHeight");c.addStyleClass("sapUiExtInboxComboBox");b.addContent(c);a.addCell(b);var e=new sap.ui.commons.layout.MatrixLayoutCell(this.getId()+'--'+"dropdownCell2");e.setPadding(sap.ui.commons.layout.Padding.None);var f=new sap.ui.commons.DropdownBox(this.getId()+'--'+"filterComboBox2",{tooltip:this._oBundle.getText("INBOX_TASKS_FILTER_DROPDOWN_TOOLTIP"),items:[new sap.ui.core.ListItem(this.getId()+'--'+"li_openTasks",{text:this._oBundle.getText("INBOX_DROP_DOWN_VALUE_OPEN_TASKS")}),new sap.ui.core.ListItem(this.getId()+'--'+"li_completedTasks",{text:this._oBundle.getText("INBOX_DROP_DOWN_VALUE_COMPLETED_TASKS")}),new sap.ui.core.ListItem(this.getId()+'--'+"li_overdueTasks",{text:this._oBundle.getText("INBOX_DROP_DOWN_VALUE_OVERDUE_TASKS")}),new sap.ui.core.ListItem(this.getId()+'--'+"li_escalatedTasks",{text:this._oBundle.getText("INBOX_DROP_DOWN_VALUE_ESCALATED_TASKS")})]});f.attachChange(this,this.applyDropDownFilter);f.setValue(this._oBundle.getText("INBOX_DROP_DOWN_VALUE_OPEN_TASKS"));f.addStyleClass("sapUiExtInboxToolBarContainerHeight");f.addStyleClass("sapUiExtInboxComboBox");e.addContent(f);a.addCell(e);var g=new sap.ui.commons.layout.MatrixLayoutCell(this.getId()+'--'+"dropdownCell3");g.setPadding(sap.ui.commons.layout.Padding.None);var h=new sap.ui.commons.DropdownBox(this.getId()+'--'+"filterComboBox3",{maxPopupItems:10});var o='';if(sap.ui.getCore().byId(this.getId()+'--'+'onBehalfOfListItem')===undefined){var o=new sap.ui.core.ListItem(this.getId()+'--'+'onBehalfOfListItem')}o.setText(this._oBundle.getText("SUBSTITUTION_INBOX_FILTER_ON_BEHALF_OF"));o.setKey("onBehalfOf");h.addItem(o);var i='';if(sap.ui.getCore().byId(this.getId()+'--'+'li_allUsers')===undefined){i=new sap.ui.core.ListItem(this.getId()+'--'+'li_allUsers')}i.setText(this._oBundle.getText("INBOX_DROP_DOWN_VALUE_ALL_USERS"));i.setKey("allUsers");h.addItem(i);h.attachChange(this,this.applyDropDownFilter3);h.setValue(this._oBundle.getText("SUBSTITUTION_INBOX_FILTER_ON_BEHALF_OF"));h.addStyleClass("sapUiExtInboxToolBarContainerHeight");h.addStyleClass("sapUiExtInboxComboBox");h.setEnabled(false);g.addContent(h);a.addCell(g);d.addRow(a);this.addAndRemoveSubstDropDowns()};sap.uiext.inbox.Inbox.prototype.populateSearchFieldContainer=function(s){var a=new sap.ui.commons.layout.MatrixLayoutCell(this.getId()+'--'+"searchBoxCell");a.setPadding(sap.ui.commons.layout.Padding.None);var b=new sap.ui.commons.SearchField(this.getId()+'--'+"searchField",{enableListSuggest:false,enableClear:true,startSuggestion:0,tooltip:this._oBundle.getText("INBOX_SEARCH_TEXT")});b.addStyleClass("sapUiExtInboxSearchField");b.attachSuggest(this,function(e,t){if(e.getParameter("value")===""){t.resetSearchCriteria();t.applyFilterOnResponse(null)}});b.attachSearch(this,this.localSearch);a.addContent(b);s.createRow(a)};sap.uiext.inbox.Inbox.prototype.populateMsgBar=function(){var m=new sap.ui.commons.Toolbar(this.getId()+'--'+"msgBarContainer",{visible:false});var a=new sap.ui.commons.Image({id:this.getId()+'--'+"msbBarTypeImg",text:"",decorative:false});var b=new sap.ui.commons.TextView({id:this.getId()+'--'+"msbBarTextView",text:""});var c=new sap.ui.commons.Image({id:this.getId()+'--'+"msbBarCloseImg",text:"",decorative:false,tooltip:this._oBundle.getText("INBOX_MSGBAR_CLOSE_TOOLTIP")});c.addStyleClass("sapUiExtInboxToolbarRight");c.setSrc(this._imgResourcePath+sap.uiext.inbox.InboxConstants.closeImg);c.attachPress(this,this.deleteMessage);m.addItem(a);m.addItem(b);m.addItem(c);return m};sap.uiext.inbox.Inbox.prototype.populateToolBar=function(){var t=new sap.ui.commons.layout.MatrixLayout(this.getId()+'--'+"toolbarContainer",{layoutFixed:false,width:"100%",columns:6,widths:["1px","1px","1px","1px","100%","1px"]});var v=new sap.ui.commons.layout.MatrixLayout(this.getId()+'--'+"viewButtonsContainer",{layoutFixed:false});var f=new sap.ui.commons.layout.MatrixLayout(this.getId()+'--'+"filterButtonContainer",{layoutFixed:false});var r=new sap.ui.commons.layout.MatrixLayout(this.getId()+'--'+"refreshButtonContainer",{layoutFixed:false});var d=new sap.ui.commons.layout.MatrixLayout(this.getId()+'--'+"dropDownContainer",{layoutFixed:false});var e=new sap.ui.commons.Label(this.getId()+'--'+"emptyLabel",{text:""});e.addStyleClass("sapUiExtInboxEmptyLabel");var s=new sap.ui.commons.layout.MatrixLayout(this.getId()+'--'+"searchFieldContainer",{layoutFixed:false});t.createRow(v,d,f,r,e,s);this.populateViewButtonsContainer(v);this.populateDropDownContainer(d);this.populateFilterButtonContainer(f);this.populateRefreshButtonContainer(r);this.populateSearchFieldContainer(s);return t};sap.uiext.inbox.Inbox.prototype.populateViews=function(){var t=this;var v=sap.ui.getCore().byId(this.getId()+'--'+'verticalLayoutContainer');var a=new sap.ui.commons.Toolbar(this.getId()+'--'+"actionButtonsToolbarContainer");a.addStyleClass("sapUiExtInboxActionButtonsToolbarContainer");if(sap.ui.getCore().byId(this.getId()+'--'+'openActionButton')===undefined){var c=new sap.ui.commons.Button(this.getId()+'--'+"openActionButton",{icon:this._imgResourcePath+sap.uiext.inbox.InboxConstants.completeImage,text:this._oBundle.getText("INBOX_ACTION_BUTTON_OPEN"),enabled:false,tooltip:this._oBundle.getText("INBOX_ACTION_BUTTON_OPEN")});c.attachPress(this,function(E,j){t.showBusyLoader();t.populateTaskExecutionContent();t.hideBusyLoader()});a.addItem(c)}if(sap.ui.getCore().byId(this.getId()+'--'+'claimActionButton')===undefined){var b=new sap.ui.commons.Button(this.getId()+'--'+"claimActionButton",{icon:this._imgResourcePath+sap.uiext.inbox.InboxConstants.claimImage,text:this._oBundle.getText("INBOX_ACTION_BUTTON_CLAIM"),enabled:false,tooltip:this._oBundle.getText("INBOX_ACTION_BUTTON_CLAIM"),visible:false});b.attachPress({inbox:t,view:t.constants.tableView,action:"Claim"},t.executeActionOnTask);b.setVisible(false);a.addItem(b)}if(sap.ui.getCore().byId(this.getId()+'--'+'releaseActionButton')===undefined){var r=new sap.ui.commons.Button(this.getId()+'--'+"releaseActionButton",{icon:this._imgResourcePath+sap.uiext.inbox.InboxConstants.releaseImage,text:this._oBundle.getText("INBOX_ACTION_BUTTON_RELEASE"),enabled:false,tooltip:this._oBundle.getText("INBOX_ACTION_BUTTON_RELEASE"),visible:false});r.attachPress({inbox:t,view:t.constants.tableView,action:"Release"},t.executeActionOnTask);r.setVisible(false);a.addItem(r)}if(sap.ui.getCore().byId(this.getId()+'--'+'forwardActionButton')===undefined){var f=new sap.ui.commons.Button(this.getId()+'--'+"forwardActionButton",{icon:this._imgResourcePath+sap.uiext.inbox.InboxConstants.forwardTaskImage,text:this._oBundle.getText("INBOX_ACTION_BUTTON_FORWARD"),enabled:true,tooltip:this._oBundle.getText("INBOX_ACTION_BUTTON_FORWARD"),visible:false});f.attachPress({inbox:t,view:t.constants.tableView,action:"Forward"},t._executeForwardAction);a.addItem(f)}if(sap.ui.getCore().byId(this.getId()+'--'+'settingsButton')===undefined){var s=new sap.ui.commons.MenuButton(this.getId()+'--'+"settingsButton",{tooltip:this._oBundle.getText("INBOX_SETTINGS_BUTTON_TOOLTIP"),icon:this._imgResourcePath+sap.uiext.inbox.InboxConstants.settingsImage,iconHovered:this._imgResourcePath+sap.uiext.inbox.InboxConstants.settingsImageHover,iconSelected:this._imgResourcePath+sap.uiext.inbox.InboxConstants.settingsImageHover,lite:true});s.addStyleClass("sapUiExtInboxToolbarRight");var d=new sap.ui.commons.Menu(this.getId()+'--'+'inboxSettingsMenu',{tooltip:this._oBundle.getText("INBOX_SETTINGS_BUTTON_TOOLTIP")});var e=new sap.ui.commons.MenuItem(this.getId()+'--'+"rowSettingsMenuItem",{text:this._oBundle.getText("INBOX_TABLE_ROW_SETTINGS_MENU_ITEM"),tooltip:this._oBundle.getText("INBOX_TABLE_ROW_SETTINGS_MENU_ITEM")});d.addItem(e);var m=new sap.ui.commons.MenuItem(this.getId()+'--'+"manageSubstitutionMI",{text:this._oBundle.getText("INBOX_MANAGE_SUBSTITUTION_RULES_MENU_ITEM"),tooltip:this._oBundle.getText("INBOX_MANAGE_SUBSTITUTION_RULES_MENU_ITEM")});d.addItem(m);s.setMenu(d);s.attachItemSelected(t,t.menuButtonActionEvent);a.addItem(s)}v.addContent(a);if(sap.ui.getCore().byId(this.getId()+'--'+'listViewTable')===undefined){var T=new sap.ui.table.Table(this.getId()+'--'+"listViewTable");T.addStyleClass("sapUiExtInboxCustomTable");T.setThreshold(10000);T.setEditable(false);T.bDynamic=true;for(var i=0;i<sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties.length;i++){if(i==0){var g=new sap.ui.commons.Link();g.addDelegate({onAfterRendering:function(){if(!this.getEnabled()){this.addStyleClass('sapUiExtInboxLnkDsbl')}}});g.bindProperty("text",sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]);g.bindProperty("tooltip",sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]);g.bindProperty("enabled","Status",function(j){if(j==="COMMITTED"){this.addStyleClass("sapUiExtInboxLnkDsbl");return false}else if(t.getOpenCompletedTasks()===false&&j=="COMPLETED"){this.addStyleClass("sapUiExtInboxLnkDsbl");return false}this.removeStyleClass("sapUiExtInboxLnkDsbl");return true});g.attachPress(this,function(E,j){t.showBusyLoader();var R=E.getSource().getParent();var C=E.getSource().getBindingContext();var M=t.getCoreModel();var k=[];var l=[];var n=[];var o=[];l.push(M.getProperty("InstanceID",C));n.push(M.getProperty("TaskTitle",C));o.push(M.getProperty("SAP__Origin",C));if(t.getTaskExecutionURLCallBack!=""&&t.getTaskExecutionURLCallBack!=undefined&&t.getTaskExecutionURLCallBack!==null){k.push(t.getTaskExecutionURLCallBack(l[0],o[0]))}else{k.push("")}var q=window.event;if(!q.ctrlKey&&!(q.button==1)&&!q.shiftKey){j.populateTaskExecutionContent({arrayURLs:k,arrayIDs:l,arrayTitles:n,aTaskSAPOrigins:o})}else{window.open(k[0])}t.hideBusyLoader()});T.addColumn(new sap.ui.table.Column({id:this.getId()+'--'+sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]}).setLabel(new sap.ui.commons.Label({text:this._oBundle.getText(sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.propertiesLabel[i]),design:sap.ui.commons.LabelDesign.Bold})).setTemplate(g).setSortProperty(sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]).setWidth("330px").setFlexible(false))}else if(i==1){T.addColumn(new sap.ui.table.Column({id:this.getId()+'--'+sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]}).setLabel(new sap.ui.commons.Label({text:this._oBundle.getText(sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.propertiesLabel[i]),design:sap.ui.commons.LabelDesign.Bold})).setTemplate(new sap.ui.commons.TextView({text:{formatter:t.dateFormat,path:sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]}}).bindProperty("tooltip",sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i],t.tooltipFormatForDateTime)).setSortProperty(sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]).setFlexible(true))}else if(i==2){T.addColumn(new sap.ui.table.Column({id:this.getId()+'--'+sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]}).setLabel(new sap.ui.commons.Label({text:this._oBundle.getText(sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.propertiesLabel[i]),design:sap.ui.commons.LabelDesign.Bold})).setTemplate(new sap.ui.commons.TextView({text:{formatter:t.dateFormat,path:sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]}}).bindProperty("tooltip",sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i],t.tooltipFormatForDateTime)).setSortProperty(sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]).setFlexible(true))}else if(i==3){var h=new sap.ui.commons.TextView();h.bindProperty("text","Status",function(j){if(j!=null&&j!=""&&j!=undefined){return t._oBundle.getText(sap.uiext.inbox.InboxConstants.statusTooltip[j])}return""});T.addColumn(new sap.ui.table.Column({id:this.getId()+'--'+sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]}).setLabel(new sap.ui.commons.Label({text:this._oBundle.getText(sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.propertiesLabel[i]),design:sap.ui.commons.LabelDesign.Bold})).setTemplate(h).setSortProperty(sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]).setFlexible(true))}else{var p=new sap.ui.commons.TextView();p.bindProperty("text","Priority",function(j){if(j!=null&&j!=""&&j!=undefined){return t._oBundle.getText(sap.uiext.inbox.InboxConstants.prioTooltip[j])}return""});T.addColumn(new sap.ui.table.Column({id:this.getId()+'--'+sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]}).setLabel(new sap.ui.commons.Label({text:this._oBundle.getText(sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.propertiesLabel[i]),design:sap.ui.commons.LabelDesign.Bold})).setTemplate(p).setSortProperty(sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[i]).setFlexible(true))}}var t=this;T.attachSort(function(E){t.resetSearchCriteria()});T.attachRowSelectionChange(function(E){var D=t.getCoreModel();var j=[];var k=[];var l=[];var n=this.getSelectedIndices();var L=this;var P=E.getParameters();var o={supportsClaim:[],supportsRelease:[]};var q=[];jQuery.each(n,function(i,w){var x=L.getContextByIndex(w);j.push(D.getProperty("Status",x));var y=D.getProperty("TaskDefinitionID",x);if(jQuery.inArray(y,k)===-1){k.push(D.getProperty("TaskDefinitionID",x))}l.push(D.getProperty("InstanceID",x));o.supportsClaim.push(D.getProperty("SupportsClaim",x));o.supportsRelease.push(D.getProperty("SupportsRelease",x));q.push(D.getProperty("SAP__Origin",x))});t.disableActionButtonsOnMultiStatus(j,o);if(t.isCustomActionsEnabled){if(P.rowIndex!==-1){t._deleteCustomActionsForTableView()}var u=t._isCompletedTasksSelected();if(k&&k.length===1&&!u){var C=t._getCustomActionsDefinition(l[0],k[0],q[0]);if(C&&C.length>0)t._createCustomActionsForTableView(C,l.length>1?false:true)}}});T.clearSelection()}v.addContent(T);t.createRowRepeaterView()};sap.uiext.inbox.Inbox.prototype.createRowRepeaterView=function(){var t=this;var v=sap.ui.getCore().byId(t.getId()+'--'+'verticalLayoutContainer');var T=sap.ui.getCore().byId(t.getId()+'--'+'tasksRowRepeater');if(!T){var r=new sap.ui.commons.layout.MatrixLayout({id:t.getId()+'--'+"rrMainMatrixLayout",layoutFixed:false,columns:3,width:'100%',widths:['6%','86%','8%']});var f=new sap.ui.commons.layout.MatrixLayoutRow({id:t.getId()+'--'+'rrFirstRow',height:'25px'});r.addRow(f);var a=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'taskInitiatorImageCell',rowSpan:2,colSpan:1,hAlign:sap.ui.commons.layout.HAlign.Center,vAlign:sap.ui.commons.layout.VAlign.Middle});a.addStyleClass("sapUiExtInboxRRFirstRowStyle");var b=new sap.ui.commons.Image(t.getId()+'--'+"taskInitiatorImg",{tooltip:this._oBundle.getText("INBOX_TASK_INITIATOR_PROFILE_PICTURE")});b.setSrc(t._imgResourcePath+sap.uiext.inbox.InboxConstants.taskInitiatorDefaultImage);a.addContent(b);f.addCell(a);var c=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'taskTitleCell',padding:sap.ui.commons.layout.Padding.Bottom,hAlin:sap.ui.commons.layout.HAlign.Right});c.addStyleClass("sapUiExtInboxRRFirstRowStyle");var d=new sap.ui.commons.Link(t.getId()+'--'+"rrViewTaskTitle");d.addStyleClass('sapUiExtInboxfontBold');d.addDelegate({onAfterRendering:function(){if(this.data("overDue")===true){this.addStyleClass('sapUiExtInboxRedColor')}}});d.bindProperty("text","TaskTitle",function(H){if(H!==null){var M=t.getCoreModel();var I=this.getBindingContext();var J=M.getProperty("CompletionDeadLine",I);if(t._isOverDue(J)){this.data("overDue",true);this.addStyleClass("sapUiExtInboxRedColor");return"! "+H}else{this.data("overDue",false);this.removeStyleClass("sapUiExtInboxRedColor");return H}}return""});d.bindProperty("tooltip","TaskTitle");d.bindProperty("enabled","Status",function(H){if(H==="COMMITTED"){this.addStyleClass("sapUiExtInboxLnkDsbl");return false}else if(t.getOpenCompletedTasks()===false&&H=="COMPLETED"){this.addStyleClass("sapUiExtInboxLnkDsbl");return false}this.removeStyleClass("sapUiExtInboxLnkDsbl");return true});d.attachPress(this,function(H,I){t.showBusyLoader();var R=H.getSource().getParent();var J=H.getSource().getBindingContext();var M=t.getCoreModel();var K=[];var L=[];var N=[];var O=[];L.push(M.getProperty("InstanceID",J));N.push(M.getProperty("TaskTitle",J));O.push(M.getProperty("SAP__Origin",J));if(t.getTaskExecutionURLCallBack!=""&&t.getTaskExecutionURLCallBack!=undefined&&t.getTaskExecutionURLCallBack!==null){K.push(t.getTaskExecutionURLCallBack(L[0],O[0]))}else{K.push("")}var P=window.event;if(!P.ctrlKey&&!(P.button==1)&&!P.shiftKey){I.populateTaskExecutionContent({arrayURLs:K,arrayIDs:L,arrayTitles:N,aTaskSAPOrigins:O})}else{window.open(K[0])}t.hideBusyLoader()});c.addContent(d);f.addCell(c);var e=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'createdOnCell',padding:sap.ui.commons.layout.Padding.Both,hAlign:sap.ui.commons.layout.HAlign.Right});e.addStyleClass("sapUiExtInboxRRFirstRowStyle");e.addStyleClass("sapUiExtInboxRRPaddingRight");var g=new sap.ui.commons.TextView(t.getId()+'--'+"rrViewCreatedOnDate");g.addStyleClass("sapUIExtInboxRRTextColourStyle");g.bindProperty("tooltip","CreatedOn",t.tooltipFormatForDateTime);g.bindProperty("text","CreatedOn",function(H){if(H!==null&&H!==""){return t.dateFormat(H,false)}});e.addContent(g);f.addCell(e);var s=new sap.ui.commons.layout.MatrixLayoutRow({id:t.getId()+'--'+'secondRow',height:'20px'});r.addRow(s);var h=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'taskDescCell',padding:sap.ui.commons.layout.Padding.End,rowSpan:1});var i=new sap.ui.commons.TextView(t.getId()+'--'+"rrViewTaskDetails");i.bindProperty("text","Description",function(H){if(H!==null&&H!=undefined){return H}return""});h.addContent(i);s.addCell(h);var j=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'statusCell',padding:sap.ui.commons.layout.Padding.End,hAlign:sap.ui.commons.layout.HAlign.Right});j.addStyleClass("sapUiExtInboxRRPaddingRight");var k=new sap.ui.commons.TextView(t.getId()+'--'+"rrViewStatus");k.addStyleClass("sapUIExtInboxRRTextColourStyle");k.bindProperty("text","Status",function(H){if(H!=null&&H!=""&&H!=undefined){return t._oBundle.getText(sap.uiext.inbox.InboxConstants.statusTooltip[H])}return""});j.addContent(k);s.addCell(j);var l=new sap.ui.commons.layout.MatrixLayoutRow({id:t.getId()+'--'+'thirdRow',height:'25px'});r.addRow(l);var m=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'taskInitiatorNameCell',hAlign:sap.ui.commons.layout.HAlign.Center,colSpan:1});var n=new sap.ui.commons.TextView(t.getId()+'--'+"taskInitiatorName",{design:sap.ui.commons.TextViewDesign.Small});n.bindProperty("text","CreatedBy");m.addContent(n);l.addCell(m);var o=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'actionLinksCell',padding:sap.ui.commons.layout.Padding.None,colSpan:1});var p=new sap.ui.commons.layout.MatrixLayout({id:t.getId()+'--'+"taskActionMatrixLayout",layoutFixed:false});var q=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'claimActionCell',hAlign:sap.ui.commons.layout.HAlign.Left,vAlign:sap.ui.commons.layout.VAlign.Bottom,colSpan:1});var u=new sap.ui.commons.Link(t.getId()+'--'+"rrViewClaimAction",{tootltip:t._oBundle.getText("INBOX_ACTION_BUTTON_CLAIM")});u.addStyleClass("sapUiExtInboxLnkNoUnderline");u.bindProperty("enabled","Status",function(H){if((H!==null)&&(H==="READY")){return true}return false});var w=new sap.ui.commons.Label({id:t.getId()+'--'+"dotSeparator",text:sap.uiext.inbox.InboxConstants.DOT});w.addStyleClass("sapUIExtInboxDotSeperatorStyle");var x=false;u.bindProperty("visible","SupportsClaim",function(H){x=H;if(x!==null&&!x){if(sap.ui.getCore().byId(t.getId()+"--"+"dotSeparator"))sap.ui.getCore().byId(t.getId()+"--"+"dotSeparator").setVisible(false)}return x});if(x){u.bindProperty("visible","Status",function(H){if((H!=null)&&(H==="COMPLETED")){if(sap.ui.getCore().byId(t.getId()+"--"+"dotSeparator"))sap.ui.getCore().byId(t.getId()+"--"+"dotSeparator").setVisible(false);return false}return true})}u.setText(t._oBundle.getText("INBOX_ACTION_BUTTON_CLAIM"));u.attachPress({inbox:t,view:t.constants.rowRepeaterView,action:"Claim"},t.executeActionOnTask);q.addContent(u);var y=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'releaseActionCell',hAlign:sap.ui.commons.layout.HAlign.Left,vAlign:sap.ui.commons.layout.VAlign.Bottom,colSpan:1});var z=new sap.ui.commons.Link(t.getId()+'--'+"rrViewReleaseAction",{tootltip:t._oBundle.getText("INBOX_ACTION_BUTTON_RELEASE")});z.addStyleClass("sapUiExtInboxLnkNoUnderline");z.bindProperty("enabled","Status",function(H){if(H!==null){if(H==="RESERVED"||H==="IN_PROGRESS")return true;else if(H==="COMPLETED"){this.setVisible(false);sap.ui.getCore().byId(t.getId()+"--"+"dotSeparator").setVisible(false)}}return false});var A=false;z.bindProperty("visible","SupportsRelease",function(H){A=H;if(A!==null&&!A){if(sap.ui.getCore().byId(t.getId()+"--"+"dotSeparator"))sap.ui.getCore().byId(t.getId()+"--"+"dotSeparator").setVisible(false)}return A});if(A){z.bindProperty("visible","Status",function(H){if((H!=null)&&(H==="COMPLETED")){if(sap.ui.getCore().byId(t.getId()+"--"+"dotSeparator"))sap.ui.getCore().byId(t.getId()+"--"+"dotSeparator").setVisible(false);return false}return true})}z.setText(t._oBundle.getText("INBOX_ACTION_BUTTON_RELEASE"));z.attachPress({inbox:t,view:t.constants.rowRepeaterView,action:"Release"},t.executeActionOnTask);y.addContent(z);var B=new sap.ui.commons.Label({id:t.getId()+'--'+"dotSeparator2",visible:true,text:sap.uiext.inbox.InboxConstants.DOT});B.addStyleClass("sapUIExtInboxDotSeperatorStyle");var C=t._createForwardActionLinkCell();p.createRow(q,w,y,B,C);o.addContent(p);l.addCell(o);var D=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'segmentedButtonsCell',padding:sap.ui.commons.layout.Padding.None,hAlign:sap.ui.commons.layout.HAlign.End,colSpan:1});var E=t.createOtherActions(t);D.addContent(E);l.addCell(D);r.addStyleClass("sapUiExtInboxRowRepeaterLayoutBorder");var T=new sap.ui.commons.RowRepeater(t.getId()+'--'+'tasksRowRepeater',{numberOfRows:5});T.setThreshold(10000);T.setDesign(sap.ui.commons.RowRepeaterDesign.BareShell);T.addStyleClass("sapUiExtInboxBackgroundColour");T.addStyleClass("sapUiExtInboxRowRepeaterBorder")}var F=t.createRowRepeaterToolBar(t);F.setVisible(false);v.addContent(F);T.setVisible(false);v.addContent(T);var G=t.createRowRepeaterToolsContent(t);G.setVisible(false);v.addContent(G)};sap.uiext.inbox.Inbox.prototype.menuButtonActionEvent=function(e,i){var t=i;var a=e.getParameter("itemId");if(a===t.getId()+'--'+'rowSettingsMenuItem'){t.openToolPopUp(t)}else if(a===t.getId()+'--'+'manageSubstitutionMI'||a===t.getId()+'--'+'rrManageSubstitutionMI'){var s=sap.ui.getCore().byId(t.getId()+'--'+'substitutionRulesManager');if(s===undefined){s=new sap.uiext.inbox.SubstitutionRulesManager(t.getId()+'--'+'substitutionRulesManager');s.setParent(t)}if(s.getModel()===undefined){var n=new sap.ui.model.odata.ODataModel(t.bpmSvcUrl,true);var m=t.getCoreModel();n.oHeaders["x-csrf-token"]=m.oHeaders["x-csrf-token"];s.setModel(n)}s.open()}};sap.uiext.inbox.Inbox.prototype.populateTaskExecutionContent=function(t){var a=this;this.showBusyLoader();var T="";if(this.getTaskExecutionURLThemeValue()!==undefined&&this.getTaskExecutionURLThemeValue()!==null&&this.getTaskExecutionURLCallBack===this.getDefaultTaskExecutionURLCallBack){T=this.getTaskExecutionURLThemeValue()}var e=sap.ui.getCore().byId(this.getId()+'--'+'taskExecUI');if(e!=undefined){e.destroy()}this.loadExecImages();this.deleteMessage();var i=0;var u,b,c,d,s;if(t===undefined||t===null)t=this.getnavigateTaskExecMetadata();if(t!=undefined){u=t.arrayURLs;b=t.arrayIDs;c=t.arrayTitles;s=t.aTaskSAPOrigins}e=new sap.ui.ux3.OverlayContainer(this.getId()+'--'+"taskExecUI");e.setOpenButtonVisible(false);e.attachClose(this,function(E,q){if(a.currentView===a.constants.tableView){jQuery.sap.byId(a.getId()+'--'+"execURLFrame").attr('src',"");var r=[];var L=sap.ui.getCore().byId(q.getId()+'--'+'listViewTable');var v=L.getSelectedIndices();jQuery.each(v,function(i,w){var x=L.getContextByIndex(w);r.push(x)});q.resetSearchCriteria();q.applyFilterOnResponse(r)}else{q.resetSearchCriteria();q.applyFilterOnResponse(r)}});var n=new sap.ui.commons.Button(this.getId()+'--'+"nxtBtn",{tooltip:this._oBundle.getText("INBOX_BUTTON_NEXT_TOOLTIP")});n.addStyleClass("sapUiExtInboxNavigationButton");var f=new sap.ui.commons.layout.MatrixLayoutCell({id:this.getId()+'--'+"nxtBtnCell"});f.setVAlign(sap.ui.commons.layout.VAlign.Middle);f.addContent(n);var g=new sap.ui.commons.layout.MatrixLayout(this.getId()+'--'+"nxtBtnContainer",{layoutFixed:false,height:"100%"});g.createRow(f);var p=new sap.ui.commons.Button(this.getId()+'--'+"prevBtn",{tooltip:this._oBundle.getText("INBOX_BUTTON_PREVIOUS_TOOLTIP")});p.addStyleClass("sapUiExtInboxNavigationButton");var h=new sap.ui.commons.layout.MatrixLayoutCell({id:this.getId()+'--'+"prevBtnCell"});h.setVAlign(sap.ui.commons.layout.VAlign.Middle);h.addContent(p);var j=new sap.ui.commons.layout.MatrixLayout(this.getId()+'--'+"prevBtnContainer",{layoutFixed:false,height:"100%"});j.createRow(h);var l=new sap.ui.commons.Label(this.getId()+'--'+"traverseLabel");var k=new sap.ui.core.HTML(this.getId()+'--'+"execURLFrame",{content:"<iframe name='myframe' src='"+u[i]+T+"' scrolling='auto' id = '"+this.getId()+'--'+"execURLFrame"+"' style='position: absolute;height: 100%;width: 100%; border: none;'></iframe>"});var B=new sap.ui.commons.layout.BorderLayout(this.getId()+'--'+"taskExecBorderLayout",{width:"100%",height:"100%",top:new sap.ui.commons.layout.BorderLayoutArea({size:"20%",contentAlign:"center",visible:false,content:[new sap.ui.commons.TextView({text:'Task:'+c[i],design:sap.ui.commons.TextViewDesign.Bold})]}),bottom:new sap.ui.commons.layout.BorderLayoutArea({size:"4%",contentAlign:"center",visible:true,content:[l]}),begin:new sap.ui.commons.layout.BorderLayoutArea({size:"4%",contentAlign:"center",visible:true,content:[j]}),center:new sap.ui.commons.layout.BorderLayoutArea({contentAlign:"left",visible:true,content:[k]}),end:new sap.ui.commons.layout.BorderLayoutArea({size:"4%",contentAlign:"center",visible:true,content:[g]})});e.addContent(B);k.attachAfterRendering(function(){jQuery.sap.byId(a.getId()+'--'+"execURLFrame").bind('load',function(q){var r=b.length;if(i!==r-1)o.setEnabled(true);else o.setEnabled(false);if(i===0)m.setEnabled(false);else m.setEnabled(true);l.setText((i+1)+" of "+b.length)})});var m=sap.ui.getCore().byId(this.getId()+'--'+"prevBtn");m.setIcon(this._imgResourcePath+sap.uiext.inbox.InboxConstants.prevBtnImage);m.setEnabled(false);var o=sap.ui.getCore().byId(this.getId()+'--'+"nxtBtn");o.setIcon(this._imgResourcePath+sap.uiext.inbox.InboxConstants.nxtBtnImage);o.setEnabled(b.length>1);var l=sap.ui.getCore().byId(this.getId()+'--'+"traverseLabel");l.setText(i+1+" "+this._oBundle.getText("INBOX_OF")+" "+b.length);o.attachPress(function(){m.setEnabled(false);o.setEnabled(false);var q="";if(a.getTaskExecURLStatusCallBack!==""&&a.getTaskExecURLStatusCallBack!==undefined&&a.getTaskExecURLStatusCallBack!==null){q=a.getTaskExecURLStatusCallBack(b[i],s[i])}if(q==="COMPLETED"){u.splice(i,1);b.splice(i,1)}else{i=i+1}if(u[i]===undefined){u[i]="";if(a.getTaskExecutionURLCallBack!==""&&a.getTaskExecutionURLCallBack!==undefined&&a.getTaskExecutionURLCallBack!==null){u[i]=a.getTaskExecutionURLCallBack(b[i],s[i])}}jQuery.sap.byId(a.getId()+'--'+"execURLFrame").attr('src',u[i]+T)});m.attachPress(function(){m.setEnabled(false);o.setEnabled(false);var q="";if(a.getTaskExecURLStatusCallBack!==""&&a.getTaskExecURLStatusCallBack!==undefined&&a.getTaskExecURLStatusCallBack!==null){a.getTaskExecURLStatusCallBack(b[i],s[i])}if(q==="COMPLETED"){u.splice(i,1);b.splice(i,1)}i=i-1;if(u[i]===undefined){u[i]="";if(a.getTaskExecutionURLCallBack!==""&&a.getTaskExecutionURLCallBack!==undefined&&a.getTaskExecutionURLCallBack!==null){u[i]=a.getTaskExecutionURLCallBack(b[i],s[i])}}jQuery.sap.byId(a.getId()+'--'+"execURLFrame").attr('src',u[i]+T)});e.open()};sap.uiext.inbox.Inbox.prototype.createInboxUI=function(){var v=new sap.ui.commons.layout.VerticalLayout(this.getId()+'--'+"verticalLayoutContainer");if(sap.ui.getCore().byId(this.getId()+'--'+'msgBarContainer')===undefined){v.insertContent(this.populateMsgBar(),0)}if(sap.ui.getCore().byId(this.getId()+'--'+'toolbarContainer')===undefined){v.insertContent(this.populateToolBar(),1)}this.populateViews();return v};sap.uiext.inbox.Inbox.prototype.openToolPopUp=function(i){var t=i;var r;var n=sap.ui.getCore().byId(t.getId()+'--'+"rowSettingsRBG");;var s=sap.ui.getCore().byId(t.getId()+'--'+"sPopup");if(s===undefined){n=new sap.ui.commons.RadioButtonGroup(t.getId()+'--'+"rowSettingsRBG",{tooltip:"Select number of rows to be displayed on the Table",columns:3});var I=new sap.ui.core.Item({text:"10",key:"rows10"});n.addItem(I);I=new sap.ui.core.Item({text:"25",key:"rows25"});n.addItem(I);I=new sap.ui.core.Item({text:"50",key:"rows50"});n.addItem(I);s=new sap.ui.commons.Dialog(t.getId()+'--'+"sPopup",{title:i._oBundle.getText("INBOX_TABLE_SETTINGS_POPUP_TITLE"),content:[n],buttons:[new sap.ui.commons.Button({text:i._oBundle.getText("INBOX_BUTTON_OK_TEXT"),press:function(){t.setNoOfRowsOnTable(sap.ui.getCore().byId(t.getId()+'--'+'rowSettingsRBG').getSelectedItem().getText());s.close()}})]});s.setWidth("231px");s.setHeight("137px")}if(r===undefined){r=sap.ui.getCore().byId(t.getId()+'--'+'listViewTable').getVisibleRowCount()+""}if(r!=undefined&&n!=undefined){switch(r){case"10":n.setSelectedIndex(0);break;case"25":n.setSelectedIndex(1);break;case"50":n.setSelectedIndex(2);break}}s.open()};sap.uiext.inbox.Inbox.prototype.setSubstitutionEnabled=function(i,p){if(this.isSubstitutionEnabled!=i){this.isSubstitutionEnabled=i;this._substitutionPath=p;this.addAndRemoveSubstDropDowns()}};sap.uiext.inbox.Inbox.prototype._setColumnVisibility=function(c){if(c!==undefined&&c!==null){var t=this;var i=false;var a=sap.uiext.inbox.InboxConstants;var T=sap.ui.getCore().byId(this.getId()+'--'+'listViewTable');var b=this.getInvisibleCols(c);var d=T.getColumns();jQuery.each(d,function(e,f){jQuery.each(b,function(e,g){if(t.absId(f.getId())===sap.uiext.inbox.InboxConstants.TABLE_VIEW_TECH_NAMES[g])f.setVisible(false)})});this.resizeColumns()}};sap.uiext.inbox.Inbox.prototype.absId=function(s){return s.split("--")[1].replace(/^\s+|\s+$/g,'')};sap.uiext.inbox.Inbox.prototype.getInvisibleCols=function(c){var i=[];jQuery.each(c.columns,function(a,b){if(b.visibility===false)i.push(b.field)});return i};sap.uiext.inbox.Inbox.prototype.getColumnVisibility=function(){return this.colList};sap.uiext.inbox.Inbox.prototype.getSubstitutionEnabled=function(){return this.isSubstitutionEnabled};sap.uiext.inbox.Inbox.prototype.clearDrillDownFilter=function(){this.resetFilterView(true)};sap.uiext.inbox.Inbox.prototype.getTaskTableBinding=function(){var l=sap.ui.getCore().byId(this.getId()+'--'+'listViewTable');return l.getBinding('rows')};sap.uiext.inbox.Inbox.prototype.bindTaskExecutionURL=function(t,a){this.getTaskExecutionURLCallBack=t;this.getTaskExecURLStatusCallBack=a;return this};sap.uiext.inbox.Inbox.prototype.bindTaskTypeDynamicFilter=function(t){this.dynamicTaskTypeFilterCallBack=t;return this};sap.uiext.inbox.Inbox.prototype.bindSearch=function(s){this.searchCallBack=s;return this};sap.uiext.inbox.Inbox.prototype.bindSubstitutedUsers=function(p){var d=sap.ui.getCore().byId(this.getId()+'--'+'filterComboBox3');var o=sap.ui.getCore().byId(this.getId()+'--'+'onBehalfOfListItem');if(o===undefined){o=new sap.ui.core.ListItem(this.getId()+'--'+'onBehalfOfListItem')}o.setText(this._oBundle.getText("SUBSTITUTION_INBOX_FILTER_ON_BEHALF_OF"));o.setKey("onBehalfOf");o.setEnabled(false);var a=sap.ui.getCore().byId(this.getId()+'--'+'li_allUsers');if(a===undefined){a=new sap.ui.core.ListItem(this.getId()+'--'+'li_allUsers')}a.setText(this._oBundle.getText("INBOX_DROP_DOWN_VALUE_ALL_USERS"));a.setKey("allUsers");var I=p+"?$format=json&$skip=0&$top=100&$filter=((SubstitutedUsers eq true))&$inlinecount=allpages";var r=this.bpmSvcUrl+I;var s="";var m=this.getCoreModel();var t=this;var b={async:false,requestUri:r,method:"GET",headers:{Accept:"application/json","x-csrf-token":m.oHeaders["x-csrf-token"]}};OData.request(b,function(c,e){if(c.results.length>0){if(d.getEnabled()===false){d.setEnabled(true)}d.removeAllItems();d.addItem(o);d.addItem(a);for(var i=0;i<c.results.length;i++){s+=c.results[i].DisplayName;var l=new sap.ui.core.ListItem();l.setKey(c.results[i].UniqueName);l.setText(c.results[i].DisplayName);d.addItem(l)}}else{d.setEnabled(false)}},function(e){if(e.response.statusCode==205){var c={statusCode:e.response.statusCode,statusText:e.response.statusText};m.fireRequestFailed(c)}else{t.showMessage("error",t._oBundle.getText("INBOX_MSG_ERR_EXUI")+this.id)}})};sap.uiext.inbox.Inbox.prototype.bindTaskTable=function(p,t){if(this.isForwardActionEnabled){var f=this._getComponent('forwardActionButton');f.setVisible(true)}this.modelRefreshed=true;this.oModel=this.getModel();if(this.oModel instanceof sap.ui.model.json.JSONModel){this.typeOfModel="JSON";this.setHandleBindings(false);this._resetFlags()}else if(this.oModel instanceof sap.ui.model.odata.ODataModel){this.typeOfModel="OData";this.attachTaskAction(this,this.defaultActionHandler);this.setHandleBindings(true)}else if(this.oModel instanceof sap.ui.model.xml.XMLModel){this.typeOfModel="xml";this.setHandleBindings(false);this._resetFlags()}if(this.getHandleBindings()){if(this.typeOfModel==="OData"){this.bpmSvcUrl=this.oModel.sServiceUrl}}this.sCollectionPath=p;if(!(/^\//).test(this.sCollectionPath))this.sCollectionPath="/"+this.sCollectionPath;this.oModel.attachRequestCompleted(this,function(E,B){var C=B._currentViewElement();var D=C.getBinding('rows');var G=false;if(D.sFilterParams.indexOf('TaskDefinitionID')===-1){if(B.bRefreshTaskTypes){B.refreshTaskTypes()}}else{G=true}B.bRefreshTaskTypes=true;B.hideBusyLoader();var H=D.iLength;var I=sap.ui.getCore().byId(B.getId()+'--'+'filterComboBox2').getValue();if(H<=0){B.showMessage("info",B._oBundle.getText("INBOX_MSG_FOR_NO_DATA"))}else{if(B.resetMessages===true)B.deleteMessage();else B.resetMessages=true}if(B.currentView===sap.uiext.inbox.InboxConstants.tableView){var J,K=[];var L=[];var M={supportsClaim:[],supportsRelease:[]};var N=B._getSelectedContextsBeforeRequest();var O=C.getBinding('rows').getContexts();var P=C.getModel();var Q=-1;jQuery.each(N,function(i,_){jQuery.each(O,function(j,a1){if(_.sPath===a1.sPath){Q=j;return false}});if(Q>-1){L.push(Q);J=C.getContextByIndex(Q);K.push(P.getProperty("Status",J));M.supportsClaim.push(P.getProperty("SupportsClaim",J));M.supportsRelease.push(P.getProperty("SupportsRelease",J))}});for(var i=0;i<L.length;i++){C.addSelectionInterval(L[i],L[i])}if(B.isCustomActionsEnabled){if(L.length===0){var R=B._isCompletedTasksSelected();if(G&&!R){var S=B._getComponent("INBOX_FILTER_TASK_TYPE");var U=S.getSelectedKeys();if(U&&U.length===1){var V=B._getSelectedItemfromKey(S,U[0]);var W=B._getCustomActionsDefinition(null,U[0],V.data("SAP__Origin"));B._deleteCustomActionsForTableView();if(W&&W.length>0)B._createCustomActions(W,false)}else{B._deleteCustomActionsForTableView()}}else{B._deleteCustomActionsForTableView()}}}B.disableActionButtonsOnMultiStatus(K,M)}else if(B.currentView===sap.uiext.inbox.InboxConstants.rowRepeaterView){B._updatePaginator(H)}var X=sap.ui.getCore().byId(B.getId()+'--'+'refreshButton');X.setSrc(B._imgResourcePath+sap.uiext.inbox.InboxConstants.refreshImage);var Y=E.getParameters();Y.bindingLength=H;Y.appliedFilter=I;B.fireODataRequestCompleted(Y);var Z=B._getComponent('searchField');var $=Z.getValue();if($!==""&&$!==null){Z.fireSearch({query:$})}});this.oModel.attachRequestFailed(this,function(C,i){i.showMessage("error",i._oBundle.getText("INBOX_MSG_NO_ODATA_SRVC"));i.hideBusyLoader()});var a=sap.ui.getCore().byId(this.getId()+'--'+"listViewTable");a.setModel(this.oModel);var T=sap.ui.getCore().byId(this.getId()+'--'+'tasksRowRepeater');T.setModel(this.oModel);var r=this._getComponent('rrMainMatrixLayout');var b=new sap.ui.model.Sorter("CreatedOn",true);var c=new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.NE,"COMPLETED");var d=sap.ui.getCore().byId(this.getId()+'--'+"filterComboBox2");d.setValue(this._oBundle.getText("INBOX_DROP_DOWN_VALUE_OPEN_TASKS"));var F=sap.ui.getCore().byId(this.getId()+'--'+"filterFacet");var s=sap.ui.getCore().byId(this.getId()+'--'+"INBOX_FILTER_STATUS");if(s!=undefined&&F.indexOfList(o)===-1){F.addList(s)}var o=sap.ui.getCore().byId(this.getId()+'--'+"INBOX_FILTER_CREATION_DATE");if(o!=undefined&&F.indexOfList(o)===-1){F.addList(o)}var e=sap.ui.getCore().byId(this.getId()+'--'+"INBOX_FILTER_DUE_DATETIME");if(e!=undefined&&F.indexOfList(e)===-1){F.addList(e)}this.resetFilterView(false);if(this.defaultView===this.constants.rowRepeaterView){var v=sap.ui.getCore().byId(this.getId()+'--'+'viewSelectionSegBtn');if(v!==undefined){var g=this.getId()+'--'+'rrViewSelectionButton';v.setSelectedButton(g);var h=sap.ui.getCore().byId(this.getId()+'--'+'rrViewSelectionButton');v.fireSelect({selectedButtonId:g,triggeredFrom:'initialView'})}}var k=sap.ui.getCore().byId(this.getId()+'--'+"filterViewButton");var l=[];if(t!==undefined&&t!==null){t.setProviderHost(this.sProviderHost);var m=t.getFiltersTobeApplied();l=m.filterOperatorArray;var n=l.length>0?!k.getPressed():k.getPressed();if(n){k.setPressed(!k.getPressed())}if(l.length>0){this.filtersToApply=m.filtersAppliedMap;if(this.filtersToApply.readyStat===undefined&&this.filtersToApply.resStat===undefined&&this.filtersToApply.InProStat===undefined){l.push(c);this.filtersToApply.dropDownFilter=c}if(F===undefined){F=sap.ui.getCore().byId(this.getId()+'--'+"filterFacet")}var q=t.getAttributesTobeSelected();var u=sap.ui.getCore().byId(this.getId()+'--'+"INBOX_FILTER_PRIORITY");var w=sap.ui.getCore().byId(this.getId()+'--'+"INBOX_FILTER_STATUS");var x=sap.ui.getCore().byId(this.getId()+'--'+"INBOX_FILTER_CREATION_DATE");var y=sap.ui.getCore().byId(this.getId()+'--'+"INBOX_FILTER_TASK_TYPE");var z=sap.ui.getCore().byId(this.getId()+'--'+"INBOX_FILTER_DUE_DATETIME");if(q.taskTypeAtts.length>0&&y!==undefined){y.setSelectedKeys(q.taskTypeAtts)}if(q.prioAtts.length>0&&u!==undefined){u.setSelectedKeys(q.prioAtts)}if(q.statusAtts.length>0&&w!==undefined){w.setSelectedKeys(q.statusAtts)}if(q.dateAtts.length>0&&x!==undefined){x.setSelectedKeys(q.dateAtts)}if(q.dueDateAtts.length>0&&z!==undefined){z.setSelectedKeys(q.dueDateAtts)}}else{l.push(c);this.filtersToApply.dropDownFilter=c}if(this.defaultView===this.constants.rowRepeaterView){var A=this._getExpandParameters();if(A.length>0){T.bindRows({path:this.sCollectionPath,template:r,parameters:{expand:A},sorter:b,filters:l})}else{T.bindRows({path:this.sCollectionPath,template:r,sorter:b,filters:l})}}a.bindRows(this.sCollectionPath,b,l)}else{if(k.getPressed()){k.setPressed(!k.getPressed());k.firePress(null)}this.filtersToApply.dropDownFilter=c;l.push(c);if(this.defaultView===this.constants.rowRepeaterView){var A=this._getExpandParameters();if(A.length>0){T.bindRows({path:this.sCollectionPath,template:r,parameters:{expand:A},sorter:b,filters:[c]})}else{T.bindRows({path:this.sCollectionPath,template:r,sorter:b,filters:[c]})}}a.bindRows(this.sCollectionPath,b,[c])}return this};sap.uiext.inbox.Inbox.prototype.localSearch=function(oEvent,inBox){if(inBox.searchCallBack!==""&&inBox.searchCallBack!==undefined){inBox.searchCallBack();return}var oModel=inBox.getCoreModel();var srchText=jQuery.trim(oEvent.getParameter("query").toLowerCase());var srchRes=0;var valueExists=0;var oBindingInfo,currentViewElement;var currentViewElement=inBox._currentViewElement();if(inBox.modelRefreshed){oModel._original_data=oModel.oData;inBox.modelRefreshed=false}if(!currentViewElement._originalKeys){currentViewElement._originalKeys=currentViewElement.getBinding('rows').aKeys}var result={};var keys=[];var oSearchIn=oModel._original_data;for(var j in oModel._original_data){var val=oModel._original_data[j];var valuePresent=false;var fieldValue;for(var l in currentViewElement._originalKeys){if(j==currentViewElement._originalKeys[l]){if(inBox.currentView===inBox.constants.rowRepeaterView){var description=val.Description;if(description&&description.length>0){valuePresent=description.toLowerCase().indexOf(srchText)>=0?true:false}}for(var k=0;k<sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties.length;k++){var fieldValue=eval('val.'+sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[k]);if(fieldValue!=null||fieldValue!=undefined){if(jQuery.type(fieldValue)==="date"){fieldValue=(inBox.dateFormat(fieldValue))}if(sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[k]==="Priority"||sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties[k]==="Status"){fieldValue=fieldValue.replace("_"," ");if(fieldValue=="VERY HIGH")fieldValue=inBox._oBundle.getText("INBOX_FILTER_PRIORITY_VERY_HIGH");if(fieldValue=="HIGH")fieldValue=inBox._oBundle.getText("INBOX_FILTER_PRIORITY_HIGH");if(fieldValue=="MEDIUM")fieldValue=inBox._oBundle.getText("INBOX_FILTER_PRIORITY_MEDIUM");if(fieldValue=="LOW")fieldValue=inBox._oBundle.getText("INBOX_FILTER_PRIORITY_LOW");if(fieldValue=="READY")fieldValue=inBox._oBundle.getText("INBOX_FILTER_STATUS_READY");if(fieldValue=="RESERVED")fieldValue=inBox._oBundle.getText("INBOX_FILTER_STATUS_RESERVED");if(fieldValue=="IN PROGRESS")fieldValue=inBox._oBundle.getText("INBOX_FILTER_STATUS_IN_PROGRESS")}fieldValue=fieldValue.toLowerCase();if(fieldValue.indexOf(srchText)>=0)valuePresent=true}}if(!valuePresent){if(val.CustomAttributesCollection){var aCustomAttributeKeys=val.CustomAttributesCollection.__list;if(aCustomAttributeKeys!==undefined){for(var i=0;i<aCustomAttributeKeys.length;i++){var customAttributeKey=aCustomAttributeKeys[i];var fieldValue=oSearchIn[customAttributeKey].Value;if(fieldValue!=null||fieldValue!=undefined){fieldValue=fieldValue.toLowerCase();if(fieldValue.indexOf(srchText)>=0)valuePresent=true}}}}}if(valuePresent){var key=String(keys.length);result[key]=val;keys.push(key)}}}}oModel.oData=result;oBindingInfo=currentViewElement.mBindingInfos["rows"];if(oBindingInfo&&oBindingInfo.binding){oBindingInfo.binding.iLength=keys.length;oBindingInfo.binding.aKeys=keys;inBox.currentView===inBox.constants.tableView?currentViewElement.rerender():currentViewElement.updateRows(false)}var iResultLength=currentViewElement.getBinding('rows').iLength;inBox._updatePaginator(iResultLength);if(iResultLength<=0)inBox.showMessage("info",inBox._oBundle.getText("INBOX_MSG_FOR_NO_DATA"));else inBox.deleteMessage();inBox.fireODataRequestCompleted({bindingLength:iResultLength,appliedFilter:inBox._oBundle.getText("INBOX_SEARCH_RESULTS_TEXT")})};sap.uiext.inbox.Inbox.prototype.applyFilterOnResponse=function(s,r){var m=this.getCoreModel();var t=this;this.showBusyLoader();var l;var c;if(t.currentView===t.constants.tableView){c=sap.ui.getCore().byId(this.getId()+'--'+'listViewTable');if(c!==undefined){if(s!=undefined&&s!=null){t.selectedContexts=s}else{t.selectedContexts=[]}l=c.getBinding('rows')}}else if(this.currentView===t.constants.rowRepeaterView){c=sap.ui.getCore().byId(this.getId()+'--'+'tasksRowRepeater');if(c!==undefined){l=c.getBinding('rows')}}var f=[];if(l!=null&&l!=undefined){l.aPredefinedFilters=[];for(var i in t.filtersToApply){var a=t.filtersToApply[i];if(jQuery.isArray(a)){f=f.concat(a)}else f.push(a)}if(this.currentView===t.constants.rowRepeaterView&&r){var T=t._getComponent("rrMainMatrixLayout");var e=t._getExpandParameters();if(e.length>0){c.bindRows({path:t.sCollectionPath,template:T,parameters:{expand:e},sorter:new sap.ui.model.Sorter("CreatedOn",true),filters:f})}else{c.bindRows({path:t.sCollectionPath,template:T,sorter:new sap.ui.model.Sorter("CreatedOn",true),filters:f})}}else{l.filter(f)}}t.modelRefreshed=true;if(l){c._originalKeys=l.aKeys}this.hideBusyLoader()};sap.uiext.inbox.Inbox.prototype.refreshTaskList=function(e,a){if(!a.getHandleBindings()){a.fireRefresh(e)}else{var r=sap.ui.getCore().byId(a.getId()+'--'+'refreshButton');r.setSrc(a._imgResourcePath+sap.uiext.inbox.InboxConstants.refreshImageGif)}var m=a.getCoreModel();var t=sap.ui.getCore().byId(a.getId()+'--'+'listViewTable');var R=sap.ui.getCore().byId(a.getId()+'--'+'tasksRowRepeater');var l;var b;var s=a.getlistTableSelectedIndices();var c=[];jQuery.each(s,function(i,o){b=t.getContextByIndex(o);c.push(b)});var d;if(a.currentView===sap.uiext.inbox.InboxConstants.tableView){d=t}else if(a.currentView===sap.uiext.inbox.InboxConstants.rowRepeaterView){d=R}if(d!=undefined){if(c!=undefined&&c!=null){a.selectedContexts=c}else{a.selectedContexts=[]}l=d.getBinding('rows');var f=[];if(l!=null&&l!=undefined){l.aPredefinedFilters=[];for(var g in a.filtersToApply){var h=a.filtersToApply[g];if(jQuery.isArray(h)){f=f.concat(h)}else f.push(h)}l.filter(f)}}a.modelRefreshed=true;d._originalKeys=d.getBinding('rows').aKeys;a.resetSearchCriteria();var j=sap.ui.getCore().byId(a.getId()+'--'+'filterComboBox3');if(j!=undefined&&j.getEnabled()===true){a.bindSubstitutedUsers("/UserInfoCollection")}var k=sap.ui.getCore().byId(a.getId()+'--'+"refreshOnText");if(k){a.lastRefreshedOnDateTime=new Date();var n=a._getFormattedRefreshOnDateTime();k.setText(a._oBundle.getText("INBOX_TEXT_ON")+sap.uiext.inbox.InboxConstants.SPACE+n);k.setTooltip(a._getFormattedTooltipForLastRefreshedTime())}};sap.uiext.inbox.Inbox.prototype.applyDropDownFilter1=function(e,i){var l=e.getSource().getSelectedItemId();if(l===i.getId()+'--'+"li_substitutedTasks"){sap.ui.getCore().byId(i.getId()+'--'+'filterComboBox3').setEnabled(false);i.filtersToApply.dropDownFilter1=new sap.ui.model.Filter("IsSubstituted",sap.ui.model.FilterOperator.EQ,true);i.bindSubstitutedUsers("/UserInfoCollection");sap.ui.getCore().byId(i.getId()+'--'+'onBehalfOfListItem').setEnabled(false)}else{sap.ui.getCore().byId(i.getId()+'--'+'onBehalfOfListItem').setEnabled(true);sap.ui.getCore().byId(i.getId()+'--'+'filterComboBox3').setSelectedItemId(i.getId()+'--'+'onBehalfOfListItem');sap.ui.getCore().byId(i.getId()+'--'+'filterComboBox3').setEnabled(false);delete i.filtersToApply.dropDownFilter3;if(l===i.getId()+'--'+"li_allTasks"){delete i.filtersToApply.dropDownFilter1}else if(l===i.getId()+'--'+"li_myTasks"){i.filtersToApply.dropDownFilter1=new sap.ui.model.Filter("IsSubstituted",sap.ui.model.FilterOperator.EQ,false)}}i.applyFilterOnResponse(null)};sap.uiext.inbox.Inbox.prototype.applyDropDownFilter3=function(e,i){var l=e.getSource().getSelectedItemId();if(l===i.getId()+'--'+"li_allUsers"){delete i.filtersToApply.dropDownFilter3}else{i.filtersToApply.dropDownFilter3=new sap.ui.model.Filter("SubstitutedUser",sap.ui.model.FilterOperator.EQ,sap.ui.getCore().byId(i.getId()+'--'+'filterComboBox3').getSelectedKey())}i.applyFilterOnResponse(null)};sap.uiext.inbox.Inbox.prototype.applyDropDownFilter=function(e,i){var a=false;var l=e.getSource().getSelectedItemId();var s=sap.ui.getCore().byId(i.getId()+'--'+"INBOX_FILTER_STATUS");var f=sap.ui.getCore().byId(i.getId()+'--'+"INBOX_FILTER_CREATION_DATE");var F=sap.ui.getCore().byId(i.getId()+'--'+"INBOX_FILTER_DUE_DATETIME");var o=sap.ui.getCore().byId(i.getId()+'--'+"filterFacet");i.resetSearchCriteria();if(l===i.getId()+'--'+"li_completedTasks"){a=true;i._deleteCustomActions();if(s!==undefined){s.setSelectedKeys(["sapUiFacetFilter_ALL"]);o.removeList(s)}if(f!==undefined){f.setSelectedKeys(["sapUiFacetFilter_ALL"]);o.removeList(f)}if(F!==undefined){F.setSelectedKeys(["sapUiFacetFilter_ALL"]);o.removeList(F)}delete i.filtersToApply.resStat;delete i.filtersToApply.readyStat;delete i.filtersToApply.InProStat;delete i.filtersToApply.neCompleted;delete i.filtersToApply.today;delete i.filtersToApply.last30;delete i.filtersToApply.last15;delete i.filtersToApply.last7;i.clearFiltersForDueDate();i.filtersToApply.dropDownFilter=[new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.EQ,"COMPLETED"),new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.EQ,"COMMITTED")]}if(l===i.getId()+'--'+"li_openTasks"){if(s!=undefined){o.addList(s)}if(f!=undefined&&o.indexOfList(f)===-1){o.addList(f)}if(F!==undefined&&o.indexOfList(F)===-1){o.addList(F)}delete i.filtersToApply.neCompleted;if((i.filtersToApply.resStat===undefined)&&(i.filtersToApply.readyStat===undefined)&&(i.filtersToApply.InProStat===undefined)){i.filtersToApply.dropDownFilter=new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.NE,"COMPLETED")}else{delete i.filtersToApply.dropDownFilter}}if(l===i.getId()+'--'+"li_overdueTasks"){if(s!=undefined){o.addList(s)}if(f!=undefined&&o.indexOfList(f)!==-1){f.setSelectedKeys(["sapUiFacetFilter_ALL"]);o.removeList(f)}if(F!==undefined&&o.indexOfList(F)!==-1){F.setSelectedKeys(["sapUiFacetFilter_ALL"]);o.removeList(F)}i.clearFiltersForDueDate();delete i.filtersToApply.today;delete i.filtersToApply.last30;delete i.filtersToApply.last15;delete i.filtersToApply.last7;var b=i.getFormattedDateTimeOff(0,true);i.filtersToApply.dropDownFilter=new sap.ui.model.Filter("CompletionDeadLine",sap.ui.model.FilterOperator.LT,b.toUTCString());if((i.filtersToApply.resStat===undefined)&&(i.filtersToApply.readyStat===undefined)&&(i.filtersToApply.InProStat===undefined)&&(i.filtersToApply.neCompleted===undefined)){i.filtersToApply.neCompleted=new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.NE,"COMPLETED")}}if(l===i.getId()+'--'+"li_escalatedTasks"){if(s!=undefined){o.addList(s)}if(f!=undefined&&o.indexOfList(f)!=-1){f.setSelectedKeys(["sapUiFacetFilter_ALL"]);o.removeList(f)}i.clearFiltersForDueDate();delete i.filtersToApply.today;delete i.filtersToApply.last30;delete i.filtersToApply.last15;delete i.filtersToApply.last7;i.filtersToApply.dropDownFilter=new sap.ui.model.Filter("IsEscalated",sap.ui.model.FilterOperator.EQ,true);if((i.filtersToApply.resStat===undefined)&&(i.filtersToApply.readyStat===undefined)&&(i.filtersToApply.InProStat===undefined)&&(i.filtersToApply.neCompleted===undefined)){i.filtersToApply.neCompleted=new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.NE,"COMPLETED")}}var t=i._isDrillDownFilterSelected('TaskDefinitionID');if(!a&&t){var T=i._getComponent("INBOX_FILTER_TASK_TYPE");var S=T.getSelectedKeys();if(S&&S.length===1){var I=T.getItems();var k=S[0];var c;for(var j=0;j<I.length;j++){if(k===I[j].getKey()){c=I[j].data("SAP__Origin")}}var C=i._getCustomActionsDefinition(null,S[0],c);if(C&&C.length>0)i._createCustomActions(C,false)}i.applyFilterOnResponse(null,true)}else{i.applyFilterOnResponse(null)}};sap.uiext.inbox.Inbox.prototype.clearFiltersForPriority=function(){delete this.filtersToApply.lowPrio;delete this.filtersToApply.medPrio;delete this.filtersToApply.hiPrio;delete this.filtersToApply.veryhiPrio};sap.uiext.inbox.Inbox.prototype.clearFiltersForStatus=function(){delete this.filtersToApply.resStat;delete this.filtersToApply.readyStat;delete this.filtersToApply.InProStat;delete this.filtersToApply.neCompleted;if(this.filtersToApply.dropDownFilter!=undefined){if((this.filtersToApply["dropDownFilter"].sPath==="Status")&&(this.filtersToApply["dropDownFilter"].sOperator==="NE")){delete this.filtersToApply.dropDownFilter}}};sap.uiext.inbox.Inbox.prototype.clearFiltersForDueDate=function(){delete this.filtersToApply.dueDateToday;delete this.filtersToApply.dueDatenext30;delete this.filtersToApply.dueDatenext15;delete this.filtersToApply.dueDatenext7};sap.uiext.inbox.Inbox.prototype.clearFiltersForDateTime=function(){delete this.filtersToApply.today;delete this.filtersToApply.last30;delete this.filtersToApply.last15;delete this.filtersToApply.last7};sap.uiext.inbox.Inbox.prototype.clearFiltersForTaskType=function(){for(var i in this.filtersToApply){if(this.filtersToApply[i].sPath==='TaskDefinitionID'){delete this.filtersToApply[i]}}};sap.uiext.inbox.Inbox.prototype.applyDrillDownFilterForPriority=function(e,a){var f,b,c,d;var g=e.getParameter("selectedItems");a.resetSearchCriteria();a.clearFiltersForPriority();for(var i=0;i<g.length;i++){switch(g[i].getId()){case a.getId()+'--'+"INBOX_FILTER_PRIORITY_LOW":if(this.filterOperatorPrioLow===undefined)f=a.inboxUtils._getPriorityFilters("LOW",a.sProviderHost);a.filtersToApply['lowPrio']=f;break;case a.getId()+'--'+"INBOX_FILTER_PRIORITY_MEDIUM":if(b===undefined)b=a.inboxUtils._getPriorityFilters("MEDIUM",a.sProviderHost);a.filtersToApply['medPrio']=b;break;case a.getId()+'--'+"INBOX_FILTER_PRIORITY_HIGH":if(c===undefined)c=a.inboxUtils._getPriorityFilters("HIGH",a.sProviderHost);a.filtersToApply['hiPrio']=c;break;case a.getId()+'--'+"INBOX_FILTER_PRIORITY_VERY_HIGH":if(d===undefined)d=a.inboxUtils._getPriorityFilters("VERY_HIGH",a.sProviderHost);a.filtersToApply['veryhiPrio']=d;break}}a.applyFilterOnResponse(null)};sap.uiext.inbox.Inbox.prototype.applyDrillDownFilterForStatus=function(e,a){var f,b,c,d;a.resetSearchCriteria();a.clearFiltersForStatus();if(e.getParameter("all")){d=new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.NE,"COMPLETED");a.filtersToApply['neCompleted']=d}else{var g=e.getParameter("selectedItems");for(var i=0;i<g.length;i++){switch(g[i].getId()){case a.getId()+'--'+"INBOX_FILTER_STATUS_RESERVED":if(f===undefined)f=a.inboxUtils._getStatusFilters("RESERVED",a.sProviderHost);a.filtersToApply['resStat']=f;break;case a.getId()+'--'+"INBOX_FILTER_STATUS_READY":if(b===undefined)b=a.inboxUtils._getStatusFilters("READY",a.sProviderHost);a.filtersToApply['readyStat']=b;break;case a.getId()+'--'+"INBOX_FILTER_STATUS_IN_PROGRESS":if(c===undefined)c=a.inboxUtils._getStatusFilters("IN_PROGRESS",a.sProviderHost);a.filtersToApply['InProStat']=c;break}}}a.applyFilterOnResponse(null)};sap.uiext.inbox.Inbox.prototype.applyDrillDownFilterForDateTime=function(e,a){var f,b,c,d;var t=sap.ui.getCore().byId(a.getId()+'--'+"INBOX_FILTER_DATETIME_TODAY");var l=sap.ui.getCore().byId(a.getId()+'--'+"INBOX_FILTER_DATETIME_MONTH");var g=sap.ui.getCore().byId(a.getId()+'--'+"INBOX_FILTER_DATETIME_15DAYS");var h=sap.ui.getCore().byId(a.getId()+'--'+"INBOX_FILTER_DATETIME_WEEK");var j=e.getParameter("selectedItems");a.resetSearchCriteria();a.clearFiltersForDateTime();var k=sap.ui.getCore().byId(a.getId()+'--'+'filterComboBox2');var m=false;if(k.getSelectedItemId()===a.getId()+'--'+'li_completedTasks'){m=true}for(var i=0;i<j.length;i++){switch(j[i].getId()){case a.getId()+'--'+"INBOX_FILTER_DATETIME_TODAY":var n=a.getFormattedDateTimeOff(0,false);if(f===undefined){f=new sap.ui.model.Filter("CreatedOn",sap.ui.model.FilterOperator.GE,n.toUTCString())}a.filtersToApply['today']=f;delete a.filtersToApply.last30;delete a.filtersToApply.last15;delete a.filtersToApply.last7;break;case a.getId()+'--'+"INBOX_FILTER_DATETIME_MONTH":var n=a.getFormattedDateTimeOff(30,false);if(b===undefined){b=new sap.ui.model.Filter("CreatedOn",sap.ui.model.FilterOperator.GE,n.toUTCString())}a.filtersToApply['last30']=b;delete a.filtersToApply.today;delete a.filtersToApply.last15;delete a.filtersToApply.last7;break;case a.getId()+'--'+"INBOX_FILTER_DATETIME_15DAYS":var n=a.getFormattedDateTimeOff(15,false);if(c===undefined){c=new sap.ui.model.Filter("CreatedOn",sap.ui.model.FilterOperator.GE,n.toUTCString())}a.filtersToApply['last15']=c;delete a.filtersToApply.today;delete a.filtersToApply.last30;delete a.filtersToApply.last7;break;case a.getId()+'--'+"INBOX_FILTER_DATETIME_WEEK":var n=a.getFormattedDateTimeOff(7,false);if(d===undefined){d=new sap.ui.model.Filter("CreatedOn",sap.ui.model.FilterOperator.GE,n.toUTCString())}a.filtersToApply['last7']=d;delete a.filtersToApply.today;delete a.filtersToApply.last30;delete a.filtersToApply.last15;break}}a.applyFilterOnResponse(null)};sap.uiext.inbox.Inbox.prototype.applyDrillDownFilterForTaskType=function(e,a){var c=a.constants;a.resetSearchCriteria();a.clearFiltersForTaskType();var b=(a.typeOfModel==="OData");if(!e.getParameter("all")){var d=e.getParameter("selectedItems");a.bRefreshTaskTypes=false;if(a.isCustomAttributesEnabled===true&&b){if(d.length===1){a._modifyListBindingForExpand(true,c.customAttributeNavigationParam);var f=a._getCustomAttributeMetaData(d[0].getKey(),d[0].data("SAP__Origin"));a._deleteCustomAttributeColumns(f);if(f&&f.length>0)a._createCustomAttributeColumns(f)}else{a._modifyListBindingForExpand(false,c.customAttributeNavigationParam);a._deleteCustomAttributeColumns(null)}}if(a.isCustomActionsEnabled===true&&b){if(d.length===1){a._deleteCustomActions();var g=a._isCompletedTasksSelected();if(!g){var C=a._getCustomActionsDefinition(d[0].data("InstanceID"),d[0].getKey(),d[0].data("SAP__Origin"));if(C&&C.length>0)a._createCustomActions(C,false)}}else{a._deleteCustomActions(null)}}for(var i=0;i<d.length;i++){a.filtersToApply[d[i].getKey()]=new sap.ui.model.Filter("TaskDefinitionID",sap.ui.model.FilterOperator.EQ,decodeURIComponent(d[i].getKey()))}}else{if(a.isCustomActionsEnabled===true&&b){a._deleteCustomActions(null)}if(a.isCustomAttributesEnabled===true&&b){a._deleteCustomAttributeColumns(null);a._modifyListBindingForExpand(false,c.customAttributeNavigationParam)}}var r=(a.currentView===a.constants.rowRepeaterView)?true:false;a.applyFilterOnResponse(null,r)};sap.uiext.inbox.Inbox.prototype._getCustomAttributeMetaData=function(t,s){var m=this.getCoreModel();var a=this;var I="/TaskDefinitionCollection(TaskDefinitionID='"+t+"',SAP__Origin='"+s+"')/CustomAttributeDefinitionData";var r=a.bpmSvcUrl+I;var c=[];var b={async:false,requestUri:r,method:"GET",headers:{Accept:"application/json","x-csrf-token":m.oHeaders["x-csrf-token"]}};OData.request(b,function(d,e){var f=d.results;for(var i=0;i<f.length;i++){var g={};g.Name=f[i].Name;g.Type=f[i].Type;g.Label=f[i].Label;c.push(g)}},function(e){a.showMessage("error",a._oBundle.getText("INBOX_MSG_ACTION_FAILED"))});return c};sap.uiext.inbox.Inbox.prototype._createCustomAttributeColumns=function(c){var t=this;var T=this._getComponent('listViewTable');var m=this.getCoreModel();var a=0;var N="name";for(var i=0;i<c.length;i++){var C=this._getComponent(t.inboxUtils.scrub(c[i].Name));var b=sap.ui.core.TextAlign.Left;var d=c[i].Type;if(d)if(jQuery.inArray(d.replace("class ",""),sap.uiext.inbox.InboxConstants.rightAlignedTypes)!=-1)b=sap.ui.core.TextAlign.Right;if(!C){T.insertColumn(new sap.ui.table.Column({id:t.getId()+'--'+t.inboxUtils.scrub(c[i].Name)}).data("customAttrName",c[i].Name).setLabel(new sap.ui.commons.Label({text:c[i].Label,design:sap.ui.commons.LabelDesign.Bold})).setTemplate(new sap.ui.commons.TextView({id:t.getId()+'--'+t.inboxUtils.scrub(c[i].Name)+'textView'}).data(N,c[i].Name).bindProperty("text","CustomAttributeData",function(v){var p=t.sCollectionPath.replace(/^\//,"")+"('"+this.data(N)+"')";var r="";if(v!==undefined&&v!==""&&v!==null){for(var i=0;i<v.length;i++){var o=m.oData[v[i]]===undefined?m._original_data[v[i]]:m.oData[v[i]];if(o.Name===this.data(N)){r=o.Value;break}}}return r}).setTextAlign(b)).setFlexible(true).bindProperty("sortProperty","CustomAttributeData",function(v){return"CustomAttributeData/"+this.data("customAttrName")}),i+1)}else{if(T.indexOfColumn(C)===-1){var l=C.getLabel();if(l.getText()!==c[i].Label){l.setText(c[i].Label)}T.insertColumn(C,i+1)}}}this.resizeColumns()};sap.uiext.inbox.Inbox.prototype._createCustomAttributeLayout=function(c){var t=this;var T=this._getComponent('listViewTable');var m=this.getCoreModel();var a=0;for(var i=0;i<c.length;i++){var C=this._getComponent(t.inboxUtils.scrub(c[i].Name));if(!C){T.insertColumn(new sap.ui.table.Column({id:t.getId()+'--'+t.inboxUtils.scrub(c[i].Name)}).data("customAttrName",c[i].Name).setLabel(new sap.ui.commons.Label({text:c[i].Label,design:sap.ui.commons.LabelDesign.Bold})).setTemplate(new sap.ui.commons.TextField({name:c[i].Name,editable:false}).bindProperty("value","CustomAttributeData",function(v){var p=t.sCollectionPath.replace(/^\//,"")+"('"+this.getName()+"')";var r="";if(v!==undefined&&v!==""&&v!==null){for(var i=0;i<v.length;i++){var o=m.oData[v[i]]===undefined?m._original_data[v[i]]:m.oData[v[i]];if(o.Name===this.getName()){r=o.Value}}}return r})).setFlexible(true).bindProperty("sortProperty","CustomAttributeData",function(v){return"CustomAttributeData/"+this.data("customAttrName")}),i+1)}else{if(T.indexOfColumn(C)===-1){var l=C.getLabel();if(l.getText()!==c[i].Label){l.setText(c[i].Label)}T.insertColumn(C,i+1)}}}};sap.uiext.inbox.Inbox.prototype._deleteCustomAttributeColumns=function(c){var t=this._getComponent('listViewTable');var T=t.getColumns();for(var i=0;i<T.length;i++){var C=T[i];if(jQuery.inArray(this._removeParentID(C.getId()),sap.uiext.inbox.InboxConstants.mEntities.taskMetadata.properties)===-1){t.removeColumn(C)}}};sap.uiext.inbox.Inbox.prototype.applyDrillDownFilterForDueDate=function(e,a){var f,b,c,d,g;var t=sap.ui.getCore().byId(a.getId()+'--'+"INBOX_FILTER_DUE_DATETIME_TODAY");var n=sap.ui.getCore().byId(a.getId()+'--'+"INBOX_FILTER_DUE_DATETIME_MONTH");var h=sap.ui.getCore().byId(a.getId()+'--'+"INBOX_FILTER_DUE_DATETIME_15DAYS");var j=sap.ui.getCore().byId(a.getId()+'--'+"INBOX_FILTER_DUE_DATETIME_WEEK");a.resetSearchCriteria();a.clearFiltersForDueDate();if(!e.getParameter("all")){var k=e.getParameter("selectedItems");var l=a.getFormattedDateTimeOff(0);for(var i=0;i<k.length;i++){switch(k[i].getId()){case a.getId()+'--'+"INBOX_FILTER_DUE_DATETIME_TODAY":var m=a.getFormattedDueDateTimeOff(1);if(f===undefined){f=new sap.ui.model.odata.Filter("CompletionDeadLine",[{operator:sap.ui.model.FilterOperator.LE,value1:m.toUTCString()},{operator:sap.ui.model.FilterOperator.GE,value1:l.toUTCString()}],true)}a.filtersToApply['dueDateToday']=f;delete a.filtersToApply.next30;delete a.filtersToApply.next15;delete a.filtersToApply.next7;break;case a.getId()+'--'+"INBOX_FILTER_DUE_DATETIME_MONTH":var m=a.getFormattedDueDateTimeOff(30);if(b===undefined){b=new sap.ui.model.odata.Filter("CompletionDeadLine",[{operator:sap.ui.model.FilterOperator.LE,value1:m.toUTCString()},{operator:sap.ui.model.FilterOperator.GE,value1:l.toUTCString()}],true)}a.filtersToApply['dueDatenext30']=b;delete a.filtersToApply.dueDateToday;delete a.filtersToApply.next15;delete a.filtersToApply.next7;break;case a.getId()+'--'+"INBOX_FILTER_DUE_DATETIME_15DAYS":var m=a.getFormattedDueDateTimeOff(15);if(c===undefined){c=new sap.ui.model.odata.Filter("CompletionDeadLine",[{operator:sap.ui.model.FilterOperator.LE,value1:m.toUTCString()},{operator:sap.ui.model.FilterOperator.GE,value1:l.toUTCString()}],true)}a.filtersToApply['dueDatenext15']=c;delete a.filtersToApply.dueDateToday;delete a.filtersToApply.next30;delete a.filtersToApply.next7;break;case a.getId()+'--'+"INBOX_FILTER_DUE_DATETIME_WEEK":var m=a.getFormattedDueDateTimeOff(7);if(d===undefined){d=new sap.ui.model.odata.Filter("CompletionDeadLine",[{operator:sap.ui.model.FilterOperator.LE,value1:m.toUTCString()},{operator:sap.ui.model.FilterOperator.GE,value1:l.toUTCString()}],true)}a.filtersToApply['dueDatenext7']=d;delete a.filtersToApply.dueDateToday;delete a.filtersToApply.next30;delete a.filtersToApply.next15;break}}}a.applyFilterOnResponse(null)};sap.uiext.inbox.Inbox.prototype.disableAllActionButtons=function(){var c=sap.ui.getCore().byId(this.getId()+'--'+'claimActionButton');var r=sap.ui.getCore().byId(this.getId()+'--'+'releaseActionButton');var a=sap.ui.getCore().byId(this.getId()+'--'+'openActionButton');var f=sap.ui.getCore().byId(this.getId()+'--'+'forwardActionButton');c.setEnabled(false);r.setEnabled(false);a.setEnabled(false);f.setEnabled(false)};sap.uiext.inbox.Inbox.prototype.disableActionButtonsOnStatus=function(s,d){var c=sap.ui.getCore().byId(this.getId()+'--'+'claimActionButton');var r=sap.ui.getCore().byId(this.getId()+'--'+'releaseActionButton');var a=sap.ui.getCore().byId(this.getId()+'--'+'openActionButton');var f=sap.ui.getCore().byId(this.getId()+'--'+'forwardActionButton');if(d!=undefined&&d===true){c.setEnabled(false);r.setEnabled(false);a.setEnabled(false);f.setEnabled(false)}else{if(s==="READY"){c.setEnabled(true);r.setEnabled(false);a.setEnabled(false);f.setEnabled(false)}else if(s==="RESERVED"||s==="IN_PROGRESS"||s==="MULTIRESERVED"||s==="SELECTED"||s==="STARTED"){c.setEnabled(false);r.setEnabled(true);a.setEnabled(true);f.setEnabled(true)}else if(this.getOpenCompletedTasks()===true&&s==="COMPLETED"){c.setEnabled(false);r.setEnabled(false);a.setEnabled(true);f.setEnabled(false)}else if(s==="COMMITTED"||(this.getOpenCompletedTasks()===false&&s==="COMPLETED")){c.setEnabled(false);r.setEnabled(false);a.setEnabled(false);f.setEnabled(false)}}};sap.uiext.inbox.Inbox.prototype._getSelectedContextsBeforeRequest=function(){return this.selectedContexts};sap.uiext.inbox.Inbox.prototype.disableActionButtonsOnMultiStatus=function(s,a){var h={};var c=[];var b=sap.ui.getCore().byId(this.getId()+'--'+'claimActionButton');var r=sap.ui.getCore().byId(this.getId()+'--'+'releaseActionButton');var f=sap.ui.getCore().byId(this.getId()+'--'+'forwardActionButton');if(jQuery.inArray(false,a.supportsClaim)>-1){b.setVisible(false)}else{b.setVisible(true)}if(jQuery.inArray(false,a.supportsRelease)>-1){r.setVisible(false);f.setVisible(false)}else{r.setVisible(true);if(this.isForwardActionEnabled){f.setVisible(true)}}if(s!=null&&s.length>0){if(s.length>1){if(jQuery.inArray("READY",s)>-1){h.READY=true};if(jQuery.inArray("RESERVED",s)>-1||jQuery.inArray("IN_PROGRESS",s)>-1||jQuery.inArray("SELECTED",s)>-1||jQuery.inArray("STARTED",s)>-1){h.RESERVED=true};if(jQuery.inArray("COMPLETED",s)>-1||jQuery.inArray("COMMITTED",s)>-1){h.COMPLETED=true};for(var i in h){c.push(i)}if(c.length>1){this.disableActionButtonsOnStatus("",true)}else{if(c[0]==="RESERVED"){c[0]="MULTIRESERVED"}this.disableActionButtonsOnStatus(c[0],false)}}else{var d=s[0];this.disableActionButtonsOnStatus(d,false)}}else{this.disableActionButtonsOnStatus("",true)}};sap.uiext.inbox.Inbox.prototype.dateFormat=function(d,D){if(d!=undefined&&typeof(d)=='string'&&d!=""){var a;if(d.indexOf('Date')!=-1){a=new Date();a.setTime(d.substring((d.indexOf("(")+1),d.indexOf(")")))}else{a=new Date(d.substring((d.indexOf("'")+1),d.length-1))}d=a}if(d!=undefined&&d!=""){var i=sap.ui.core.format.DateFormat.getDateInstance({style:"medium"});if(D!==undefined&&D===false){i=sap.ui.core.format.DateFormat.getDateInstance({pattern:"MMM dd",style:"medium"})}return i.format(d)}return""};sap.uiext.inbox.Inbox.prototype.tooltipFormatForDateTime=function(d){if(d!=undefined&&typeof(d)=='string'&&d!=""){var a;if(d.indexOf('Date')!=-1){a=new Date();a.setTime(d.substring((d.indexOf("(")+1),d.indexOf(")")))}else{a=new Date(d.substring((d.indexOf("'")+1),d.length-1))}d=a}if(d!=undefined&&d!=""){var i=sap.ui.core.format.DateFormat.getDateTimeInstance({style:"full"});return i.format(d)}return""};sap.uiext.inbox.Inbox.prototype.executeActionOnTask=function(e,a){var b=a.inbox;var v=a.view;var c=a.action;var d=(c===b.constants.FORWARD)?true:false;var f=d?a.forwardTo:'';b.showBusyLoader();var l,r,m;var s=[],g=[],h=[],j=[];var k=[];var n="'",o="'",p="'";var q,t;b.resetSearchCriteria();m=b.getCoreModel();if(v===b.constants.tableView){l=sap.ui.getCore().byId(b.getId()+'--'+'listViewTable');if(e.getSource())var u=b.getlistTableSelectedIndices();jQuery.each(u,function(i,A){r=l.getContextByIndex(A);g.push(r);q=m.getProperty("InstanceID",r);t=m.getProperty("SAP__Origin",r);s.push(q);h.push(t);if(i==0){n=n+q;o=o+t;if(d){p=p+f}}else{n=n+";"+q;o=o+";"+t;if(d){p=p+";"+f}}});n=n+"'";o=o+"'";if(d){p=p+"'"}}else if(v===b.constants.rowRepeaterView){var C=e.getSource().getBindingContext();q=m.getProperty("InstanceID",C);t=m.getProperty("SAP__Origin",C);s.push(q);h.push(t);n=n+q+"'";o=o+t+"'";if(d){p=p+f+"'"}}if(s!=null||s.length>0){var I,w,x,y;if(c==="Complete"){c="Complete"}if(c==="Claim"){c="Claim"}if(c==="Release"){c="Release"}if(d){c="Forward"}var z=e.getParameters();z.action=c;z.selectedIDs=n;z.selectedSAPOrigins=o;z.selectedIDList=s;z.selectedSAPOriginList=h;if(d){z.selectedForwardToUsers=p}b.fireTaskAction(z);b.applyFilterOnResponse(g)}b.resetMessages=false};sap.uiext.inbox.Inbox.prototype.defaultActionHandler=function(e,a){var c=a.constants;var b=e.getParameter('action');var d=e.getParameter('selectedIDs');var I,r,f,s;var g=e.getParameter('selectedSAPOrigins');var m=a.getCoreModel();var h=e.getParameter('selectedIDList');var j=e.getParameter('selectedSAPOriginList');var k=e.getParameter('commentsList');var l=(b===a.constants.FORWARD)?true:false;var n=function(q){a.showMessage("error",a._oBundle.getText("INBOX_MSG_ACTION_FAILED"))};if(a.isBatchOperationSupported){var B,p,o=[];for(var i=0;i<h.length;i++){p=b+c.query+"InstanceID='"+h[i]+"'"+c.amperSand+c.sapOrigin+"'"+j[i]+"'";if(k&&k.length>0){p=p+"&Comments='"+k[i]+"'"}B=m.createBatchOperation(p,a.httpMethodForAction);o.push(B)}m.addBatchChangeOperations(o);m.submitBatch(function(q,t){var u=q.__batchResponses;var i,v;var w=0;for(i=0,v=u.length;i<v;i++){var q=u[i];if(q.response.statusCode!==200&&q.response.statusCode!==201){w=w+1}}if(w>0){a.showMessage("error",w+" "+a._oBundle.getText("INBOX_MSG_ACTION_FAILED"))}else{a.showMessage("success",a._oBundle.getText("INBOX_MSG_ACTION_SUCCESS"))}},n,false)}else{I='/'+b+"?InstanceID="+d+"&SAP__Origin="+g+"&$format=json";if(l){I=I+"&ForwardTo="+e.getParameter('selectedForwardToUsers')}r=a.bpmSvcUrl+I;f={async:false,requestUri:r,method:a.httpMethodForAction,headers:{Accept:"application/json","x-csrf-token":m.oHeaders["x-csrf-token"]}};OData.request(f,function(q,t){a.showMessage("success",a._oBundle.getText("INBOX_MSG_ACTION_SUCCESS"))},n)}};sap.uiext.inbox.Inbox.prototype.fillAttributes=function(){var a=this;var f=sap.ui.getCore().byId(this.getId()+'--'+'filterFacet');if(f!=undefined){var t=sap.uiext.inbox.InboxConstants.aFilterMetaData[0].attributes;var b=f.getLists()[0];if(b===undefined||b===null)return;var c=b.getItems();jQuery.each(c,function(i,d){var e=a.inboxUtils.inArray(d.getKey(),t);if(d.getKey()!='sapUiFacetFilter_ALL'){if(e===-1){b.removeItem(d)}else{t.splice(e,1)}}});if(t.length>0){jQuery.each(t,function(i,d){var e=a.inboxUtils.scrub(d.key);var A=sap.ui.getCore().byId(a.getId()+'--'+e);if(A===undefined)A=new sap.ui.core.ListItem(a.getId()+'--'+e,{text:d.value,key:d.key}).data("InstanceID",d.instanceID).data("SAP__Origin",d.sap__Origin);b.addItem(A)})}}};sap.uiext.inbox.Inbox.prototype.resetFilterView=function(c){var a;if(this.filtersToApply.dropDownFilter){a=this.filtersToApply.dropDownFilter}else if(this.filtersToApply.resStat!=undefined||this.filtersToApply.readyStat!=undefined||this.filtersToApply.InProStat!=undefined){a=new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.NE,"COMPLETED")}this.filtersToApply={};if(a!=undefined){this.filtersToApply.dropDownFilter=a}for(var i=0;i<sap.uiext.inbox.InboxConstants.aFilterMetaData.length;i++){var b=sap.ui.getCore().byId(this.getId()+'--'+sap.uiext.inbox.InboxConstants.aFilterMetaData[i].name);if(b!=undefined)b.setSelectedKeys(["sapUiFacetFilter_ALL"])}if(c)this.applyFilterOnResponse(null)};sap.uiext.inbox.Inbox.prototype.getlistTableSelectedIndices=function(){var l=sap.ui.getCore().byId(this.getId()+'--'+'listViewTable');return l.getSelectedIndices()};sap.uiext.inbox.Inbox.prototype.getCoreModel=function(){return sap.ui.getCore().byId(this.getId()+'--'+'listViewTable').getModel()};sap.uiext.inbox.Inbox.prototype.getnavigateTaskExecMetadata=function(){var l=sap.ui.getCore().byId(this.getId()+'--'+'listViewTable');var t=[];var a=[];var b=[];var T=[];var s=this.getlistTableSelectedIndices();var m=this.getCoreModel();jQuery.each(s,function(i,c){var r=l.getContextByIndex(c);a.push(m.getProperty("InstanceID",r));b.push(m.getProperty("TaskTitle",r));T.push(m.getProperty("SAP__Origin",r))});if(this.getTaskExecutionURLCallBack!=""&&this.getTaskExecutionURLCallBack!=undefined&&this.getTaskExecutionURLCallBack!==null){t.push(this.getTaskExecutionURLCallBack(a[0],T[0]))}else{t.push("")}return{arrayURLs:t,arrayIDs:a,arrayTitles:b,aTaskSAPOrigins:T}};sap.uiext.inbox.Inbox.prototype.getlistTableSelectedContexts=function(){var s=[];var a=this.getlistTableSelectedIndices();var l=sap.ui.getCore().byId(this.getId()+'--'+'listViewTable');jQuery.each(a,function(i,b){s.push(l.getContextByIndex(b))});return s};sap.uiext.inbox.Inbox.prototype.showBusyLoader=function(){sap.ui.core.BusyIndicator.show(0);var b=jQuery.sap.byId("busy_loader");b.css('position','absolute');b.css('top',"50%");b.css('left',"50%");b.css('display','');b.show();b.css('z-index',99)};sap.uiext.inbox.Inbox.prototype.hideBusyLoader=function(){sap.ui.core.BusyIndicator.hide();var b=jQuery.sap.byId("busy_loader");b.css('display','none');b.css('z-index',-1)};sap.uiext.inbox.Inbox.prototype.resetSearchCriteria=function(){var s=sap.ui.getCore().byId(this.getId()+'--'+'searchField');s.setValue("")};sap.uiext.inbox.Inbox.prototype.loadExecImages=function(){var r=this._imgResourcePath+sap.uiext.inbox.InboxConstants.prevBtnImage;var a=this._imgResourcePath+sap.uiext.inbox.InboxConstants.nxtBtnImage;jQuery.ajax({url:r,type:"GET",async:true,success:function(d,t,X){},error:function(X,t,e){}});jQuery.ajax({url:a,type:"GET",async:true,success:function(d,t,X){},error:function(X,t,e){}})};sap.uiext.inbox.Inbox.prototype.setNoOfRowsOnTable=function(v){var t=sap.ui.getCore().byId(this.getId()+'--'+'listViewTable');if(t!=undefined)t.setVisibleRowCount(parseInt(v,10))};sap.uiext.inbox.Inbox.prototype.showMessage=function(m,a){var b=sap.ui.getCore().byId(this.getId()+'--'+'msgBarContainer');if(b!=undefined){b.setVisible(true);var c=this._getComponent('msbBarTextView');c.setText(a);var d=this._getComponent('msbBarTypeImg');d.setSrc(this._imgResourcePath+sap.uiext.inbox.InboxConstants.messageTypeIcons[m]);d.setTooltip(this._oBundle.getText(sap.uiext.inbox.InboxConstants.messageTypeToolTip[m]))}};sap.uiext.inbox.Inbox.prototype.deleteMessage=function(e,i){if(i===undefined)i=this;var m=sap.ui.getCore().byId(i.getId()+'--'+'msgBarContainer');if(m!=undefined){m.setVisible(false);sap.ui.getCore().byId(i.getId()+'--'+'msbBarTextView').setText("");sap.ui.getCore().byId(i.getId()+'--'+'msbBarTypeImg').setSrc("")}};sap.uiext.inbox.Inbox.prototype.getFormattedDateTimeOff=function(s,i){var m=new Date();m.setDate(m.getDate()-s);if(!i){m.setHours(0);m.setSeconds(0);m.setMinutes(m.getTimezoneOffset())}return m};sap.uiext.inbox.Inbox.prototype.getFormattedDueDateTimeOff=function(s){var m=new Date();m.setDate(m.getDate()+s);m.setHours(0);m.setSeconds(0);m.setMinutes(m.getTimezoneOffset());return m};sap.uiext.inbox.Inbox.prototype.getProviderHost=function(){};sap.uiext.inbox.Inbox.prototype.refreshTaskTypes=function(){if(this.dynamicTaskTypeFilterCallBack!=""&&this.dynamicTaskTypeFilterCallBack!=undefined){sap.uiext.inbox.InboxConstants.aFilterMetaData[0].attributes=this.dynamicTaskTypeFilterCallBack();this.fillAttributes();return}var t=sap.ui.getCore().byId(this.getId()+'--'+'listViewTable');var T=[];var m={};var v;if(this.getHandleBindings()){var c=this._currentViewElement().getBinding("rows").getContexts();var M=this.getCoreModel();jQuery.each(c,function(i,C){v={"key":M.getProperty("TaskDefinitionID",C),"value":M.getProperty("TaskDefinitionName",C),"instanceID":M.getProperty("InstanceID",C),"sap__Origin":M.getProperty("SAP__Origin",C)};if(!m[v.key]){m[v.key]=true;T.push(v)}})}else{var l=this._currentViewElement().getBinding("rows");jQuery.each(l.oList,function(i,e){v={"key":e.TaskDefinitionID,"value":e.TaskDefinitionName};if(!m[v.key]){m[v.key]=true;T.push(v)}})}if(T.length>0){sap.uiext.inbox.InboxConstants.aFilterMetaData[0].attributes=T;this.fillAttributes()}};sap.uiext.inbox.Inbox.prototype.onAfterRendering=function(){var t=sap.ui.getCore().byId(this.getId()+'--'+'listViewTable').$();t.find("a:disabled").addClass("sapUiExtInboxLnkDsbl")};sap.uiext.inbox.Inbox.prototype._getComponent=function(c){return sap.ui.getCore().byId(this.getId()+'--'+c)};sap.uiext.inbox.Inbox.prototype._removeParentID=function(c){var p=this.getId();return c.replace(this.getId()+"--","")};sap.uiext.inbox.Inbox.prototype.populateViewButtonsContainer=function(v){var l=new sap.ui.commons.layout.MatrixLayoutCell({id:this.getId()+'--'+"segmentedButtonCell"});var s=new sap.ui.commons.SegmentedButton({id:this.getId()+'--'+'viewSelectionSegBtn',buttons:[new sap.ui.commons.Button({id:this.getId()+'--'+'tableViewSelectionButton',lite:true,icon:this._imgResourcePath+sap.uiext.inbox.InboxConstants.tableViewImageSelected,tooltip:this._oBundle.getText("INBOX_LIST_VIEW_TOOLTIP")}),new sap.ui.commons.Button({id:this.getId()+'--'+'rrViewSelectionButton',lite:true,icon:this._imgResourcePath+sap.uiext.inbox.InboxConstants.rrViewImageUnselected,tooltip:this._oBundle.getText("INBOX_STREAM_VIEW_TOOLTIP")})]});s.setSelectedButton(this.getId()+'--'+'tableViewSelectionButton');s.attachSelect(this,this.switchViews);s.addStyleClass("sapUiExtInboxToolBarContainerHeight");l.addContent(s);l.setPadding(sap.ui.commons.layout.Padding.None);v.createRow(l)};sap.uiext.inbox.Inbox.prototype.switchViews=function(e,i){var t=i;var b=sap.ui.getCore().byId(e.getSource().getSelectedButton());var a=t.getId()+'--'+"tableViewSelectionButton";var r=t.getId()+'--'+"rrViewSelectionButton";var c=sap.ui.getCore().byId(t.getId()+'--'+'listViewTable');var T=sap.ui.getCore().byId(t.getId()+'--'+'tasksRowRepeater');var v=sap.ui.getCore().byId(t.getId()+'--'+'verticalLayoutContainer');var d=sap.ui.getCore().byId(t.getId()+'--'+'actionButtonsToolbarContainer');var f=sap.ui.getCore().byId(t.getId()+'--'+'rrToolbar');var g=sap.ui.getCore().byId(t.getId()+'--'+'rowRepeaterToolsMatLayout');var h=sap.ui.getCore().byId(t.getId()+'--'+"rowRepeaterPaginator");var k=t._currentViewElement();var l=k.getBinding('rows');var m=false;if(l&&l.sFilterParams&&l.sFilterParams.indexOf('TaskDefinitionID')!==-1)m=true;if(b.getId()===a){t.currentView=t.constants.tableView;b.setIcon(t._imgResourcePath+sap.uiext.inbox.InboxConstants.tableViewImageSelected);var n=sap.ui.getCore().byId(r);n.setIcon(t._imgResourcePath+sap.uiext.inbox.InboxConstants.rrViewImageUnselected);d.setVisible(true);c.setVisible(true);f.setVisible(false);T.setVisible(false);g.setVisible(false)}if(b.getId()===r){t.currentView=t.constants.rowRepeaterView;b.setIcon(t._imgResourcePath+sap.uiext.inbox.InboxConstants.rrViewImageSelected);var o=sap.ui.getCore().byId(a);o.setIcon(t._imgResourcePath+sap.uiext.inbox.InboxConstants.tableViewImageUnselected);if(t.isCustomAttributesEnabled){var p=t._getComponent('customAttributesSegBtn');if(p&&!p.getVisible()){p.setVisible(true)}}d.setVisible(false);c.setVisible(false);if(T.getModel()===undefined||T.getModel()===null){T.setModel(t.getModel())}f.setVisible(true);T.setVisible(true);g.setVisible(true);if(T.getBinding('rows')){var q=T.getBinding('rows').iLength;h.setNumberOfPages(Math.ceil(q/5))}else{var R=t._getComponent('rrMainMatrixLayout');var s=new sap.ui.model.Sorter("CreatedOn",true);var u=t._getExpandParameters();var w=t._getFilterArray();if(u.length>0){T.bindRows({path:t.sCollectionPath,template:R,parameters:{expand:u},sorter:s,filters:w})}else{T.bindRows({path:t.sCollectionPath,template:R,sorter:s,filters:w})}}}if(t.isCustomActionsEnabled){t._deleteCustomActions();var x=t._isCompletedTasksSelected();if(!x&&m){var y=t._getComponent("INBOX_FILTER_TASK_TYPE");var S=y.getSelectedKeys();if(S&&S.length===1){var I=y.getItems();var z=S[0];var A;for(var j=0;j<I.length;j++){if(z===I[j].getKey()){A=I[j].data("SAP__Origin")}}var C=t._getCustomActionsDefinition(null,S[0],A);if(C&&C.length>0)t._createCustomActions(C,false)}t.applyFilterOnResponse(null,true)}t.applyFilterOnResponse(null)}else{if(e.getParameters().triggeredFrom===undefined){if(t.oModel instanceof sap.ui.model.json.JSONModel&&t.currentView===t.constants.rowRepeaterView){t.applyFilterOnResponse(null,true)}else{t.applyFilterOnResponse(null)}}}};sap.uiext.inbox.Inbox.prototype.createOtherActions=function(i){var t=i;var a=new sap.ui.commons.ToggleButton({id:t.getId()+'--'+'attachmentsSegBtn',visible:false,lite:true,icon:t._imgResourcePath+sap.uiext.inbox.InboxConstants.attachmentsImage,tooltip:this._oBundle.getText("INBOX_SHOW_ATTACHMENTS")});a.bindProperty("visible","HasAttachments");var c=new sap.ui.commons.ToggleButton({id:t.getId()+'--'+'commentsSegBtn',visible:false,lite:true,icon:t._imgResourcePath+sap.uiext.inbox.InboxConstants.commentsImage,tooltip:this._oBundle.getText("INBOX_SHOW_COMMENTS")});c.bindProperty("visible","HasComments");var b=new sap.ui.commons.ToggleButton({id:t.getId()+'--'+'customAttributesSegBtn',enabled:true,lite:true,visible:false,tooltip:this._oBundle.getText("INBOX_SHOW_CUSTOM_ATTRIBUTES"),icon:t._imgResourcePath+sap.uiext.inbox.InboxConstants.customAttributesImage});var r=new sap.ui.commons.layout.MatrixLayout(t.getId()+'--'+'rrOtherActionsMatLay',{layoutFixed:true,columns:3,width:"100%"});r.createRow(a,c,b);b.attachPress(function(e){var d=e.getParameters().id;var f='tasksRowRepeater-';var g=t.getId()+'--'+'rrMainMatrixLayout'+'-'+t.getId()+'--'+'tasksRowRepeater-';var h=d.indexOf(f)+f.length;var j=d.substring(h,d.length);var l=t.getId()+'--'+'lastRowOfRowRepeater-'+j;var k=sap.ui.getCore().byId(l);if(!k){k=new sap.ui.commons.layout.MatrixLayoutRow({id:l})}var m=t.getId()+'--'+'lastRowCell-'+j;var n=sap.ui.getCore().byId(m);if(!n){n=new sap.ui.commons.layout.MatrixLayoutCell({id:m,padding:sap.ui.commons.layout.Padding.None,vAlign:sap.ui.commons.layout.VAlign.Middle,hAlign:sap.ui.commons.layout.HAlign.End,colSpan:3})}var o=sap.ui.getCore().byId(g+j);if(o){n.removeAllContent();o.removeRow(l);if(d.indexOf(t.getId()+'--'+'customAttributesSegBtn')!=-1){if(e.getSource().getPressed()){var s=t.getModel().getProperty("TaskDefinitionID",e.getSource().getParent().getBindingContext());var S=t.getModel().getProperty("SAP__Origin",e.getSource().getParent().getBindingContext());var p=t._getCustomAttributeMetaData(s,S);if(p&&p.length>0){n.addContent(t._createCustomAttributesRRViewMatrixLayout(p,s,j));k.addCell(n);o.addRow(k)}this.data("previousSelection",d)}}}else{}});return r};sap.uiext.inbox.Inbox.prototype._isOverDue=function(v){if(v===undefined||v===null||v==="")return false;var n=new Date().getTime();var o=(v.getTime()-n)<0?true:false;return o};sap.uiext.inbox.Inbox.prototype._currentView=function(){return this.currentView};sap.uiext.inbox.Inbox.prototype.createRowRepeaterToolBar=function(i){var t=i;var a=sap.ui.getCore().byId(this.getId()+'--'+'rrToolbar');var r=sap.ui.getCore().byId(this.getId()+'--'+'tasksRowRepeater');if(!a){var a=new sap.ui.commons.Toolbar(this.getId()+'--'+"rrToolbar");a.addStyleClass("sapUiExtInboxActionButtonsToolbarContainer");var s=0;if(sap.ui.getCore().byId(this.getId()+'--'+'sortByLabel')===undefined){var b=new sap.ui.commons.Label(this.getId()+'--'+"sortByLabel",{text:this._oBundle.getText("INBOX_SORT_BY_LABEL")+sap.uiext.inbox.InboxConstants.COLON,design:sap.ui.commons.LabelDesign.Bold});a.insertItem(b,s)}var d=new sap.ui.commons.DropdownBox(this.getId()+'--'+"sortByFilterComboBox",{tooltip:this._oBundle.getText("INBOX_SORT_BY_LABEL"),items:[new sap.ui.core.ListItem(this.getId()+'--'+"li_creationDate",{text:this._oBundle.getText("INBOX_FILTER_CREATION_DATE"),tooltip:this._oBundle.getText("INBOX_SORT_BY_LABEL")+" "+this._oBundle.getText("INBOX_FILTER_CREATION_DATE")}),new sap.ui.core.ListItem(this.getId()+'--'+"li_taskTitle",{text:this._oBundle.getText("INBOX_TASK_TITLE"),tooltip:this._oBundle.getText("INBOX_SORT_BY_LABEL")+" "+this._oBundle.getText("INBOX_TASK_TITLE")}),new sap.ui.core.ListItem(this.getId()+'--'+"li_status",{text:this._oBundle.getText("INBOX_STATUS"),tooltip:this._oBundle.getText("INBOX_SORT_BY_LABEL")+" "+this._oBundle.getText("INBOX_STATUS")})]});d.setValue(this._oBundle.getText("INBOX_FILTER_CREATION_DATE"));d.addStyleClass("sapUiExtInboxRowRepeaterSortBy");var _=new sap.ui.commons.RowRepeaterSorter(this.getId()+'--'+'sortByStartDate',{sorter:new sap.ui.model.Sorter("CreatedOn",true)});var c=new sap.ui.commons.RowRepeaterSorter(this.getId()+'--'+'sortByTaskTitle',{sorter:new sap.ui.model.Sorter("TaskTitle",false)});var e=new sap.ui.commons.RowRepeaterSorter(this.getId()+'--'+'sortByStatus',{sorter:new sap.ui.model.Sorter("Status",false)});r.addSorter(_);r.addSorter(c);r.addSorter(e);d.attachChange(this,function(E,h){var l=E.getSource().getSelectedItemId();t.resetSearchCriteria();var j;if(l===h.getId()+'--'+"li_creationDate"){r.triggerSort(t.getId()+'--'+'sortByStartDate');j=sap.ui.getCore().byId(t.getId()+'--'+'sortByStartDate').getSorter();j.bDescending=!j.bDescending}else if(l===h.getId()+'--'+"li_taskTitle"){r.triggerSort(t.getId()+'--'+'sortByTaskTitle');j=sap.ui.getCore().byId(t.getId()+'--'+'sortByTaskTitle').getSorter();j.bDescending=!j.bDescending}else if(l===h.getId()+'--'+"li_status"){r.triggerSort(t.getId()+'--'+'sortByStatus');j=sap.ui.getCore().byId(t.getId()+'--'+'sortByStatus').getSorter();j.bDescending=!j.bDescending}var k=sap.ui.getCore().byId(t.getId()+'--'+'sortImage');if(!j.bDescending){k.setSrc(t._imgResourcePath+sap.uiext.inbox.InboxConstants.sortDescImage);k.setTooltip(h._oBundle.getText("INBOX_SORT_INDICATOR_DESC"))}else{k.setSrc(t._imgResourcePath+sap.uiext.inbox.InboxConstants.sortAscImage);k.setTooltip(h._oBundle.getText("INBOX_SORT_INDICATOR_ASC"))}});a.insertItem(d,s+1);var f=new sap.ui.commons.Image(this.getId()+'--'+"sortImage",{tooltip:this._oBundle.getText("INBOX_SORT_INDICATOR_ASC"),decorative:false});f.setSrc(this._imgResourcePath+sap.uiext.inbox.InboxConstants.sortAscImage);f.addStyleClass("sapUiExtInboxRefreshButtonHeight");a.insertItem(f,s+2)}var g=t._createRRSettingsMenuButton();a.insertRightItem(g,3);return a};sap.uiext.inbox.Inbox.prototype.createRowRepeaterToolsContent=function(I){var t=I;var T=sap.ui.getCore().byId(t.getId()+'--'+'tasksRowRepeater');var r=new sap.ui.commons.layout.MatrixLayout(t.getId()+'--'+'rowRepeaterToolsMatLayout');var p=new sap.ui.commons.Paginator(t.getId()+'--'+"rowRepeaterPaginator",{page:o});function o(e){var n=e.getParameter("targetPage");var c=e.getParameter("srcPage");T.gotoPage(n)}var s=new sap.ui.commons.SegmentedButton({id:t.getId()+'--'+'rowRepeaterRowSettingsSegBtn',buttons:[new sap.ui.commons.Button({id:t.getId()+'--'+'5RowsSegBtn',lite:true,text:'5',tooltip:this._oBundle.getText("INBOX_SET_NUMBER_OF_ROWS_TO")+" "+this._oBundle.getText("INBOX_NUMBER_FIVE")}).addStyleClass("sapUiExtInboxSegmentedButtonTransparent"),new sap.ui.commons.Button({id:t.getId()+'--'+'10RowsSegBtn',lite:true,text:'10',tooltip:this._oBundle.getText("INBOX_SET_NUMBER_OF_ROWS_TO")+" "+this._oBundle.getText("INBOX_NUMBER_TEN")}).addStyleClass("sapUiExtInboxSegmentedButtonTransparent"),new sap.ui.commons.Button({id:t.getId()+'--'+'20RowsSegBtn',lite:true,text:'20',tooltip:this._oBundle.getText("INBOX_SET_NUMBER_OF_ROWS_TO")+" "+this._oBundle.getText("INBOX_NUMBER_TWENTY")}).addStyleClass("sapUiExtInboxSegmentedButtonTransparent")]});s.attachSelect(function(e){var c=parseInt(sap.ui.getCore().byId(e.getParameters().selectedButtonId).getText());var d=this.getButtons();for(var i=0;i<d.length;i++){d[i].removeStyleClass("sapUiExtInboxSegmentedButtonTransparentSelected")}sap.ui.getCore().byId(e.getParameters().selectedButtonId).addStyleClass("sapUiExtInboxSegmentedButtonTransparentSelected");T.setNumberOfRows(c);var n=T.getBinding('rows').iLength;p.setNumberOfPages(Math.ceil(n/c));T.rerender()});s.setSelectedButton(t.getId()+'--'+'5RowsSegBtn');sap.ui.getCore().byId(s.getSelectedButton()).addStyleClass("sapUiExtInboxSegmentedButtonTransparentSelected");var a=new sap.ui.commons.layout.MatrixLayoutCell(t.getId()+'--'+"separatorRRViewCell");var b=new sap.ui.commons.TextView({id:t.getId()+'--'+'separator',text:"|"});a.addContent(b);a.setPadding(sap.ui.commons.layout.Padding.None);var B=new sap.ui.commons.layout.BorderLayout(t.getId()+'--'+'borderLayout',{width:"100%",height:"40px"});B.createArea(sap.ui.commons.layout.BorderLayoutAreaTypes.center,p);B.setAreaData(sap.ui.commons.layout.BorderLayoutAreaTypes.center,{size:"55%",contentAlign:"right",visible:true});B.createArea(sap.ui.commons.layout.BorderLayoutAreaTypes.end,s);B.setAreaData(sap.ui.commons.layout.BorderLayoutAreaTypes.end,{size:"45%",contentAlign:"right",visible:true});r.createRow(new sap.ui.commons.TextView({text:' '}));r.createRow(B);return r};sap.uiext.inbox.Inbox.prototype._createCustomAttributesRRViewMatrixLayout=function(c,t,r){var a=this;var s=this.inboxUtils.scrub(t);var C=new sap.ui.commons.layout.MatrixLayout({layoutFixed:true,width:"94%"});C.addStyleClass('sapUIExtInboxCustomAttributesBorder');var n=c.length;var m=this.getCoreModel();for(var b=1;b<=n;b++){var d=b-1;var l=a.getId()+'--'+'customattr'+'-label-'+'-row-'+r+'-index-'+d;var T=a.getId()+'--'+'customattr'+'-value-'+'-row-'+r+'-index-'+d;var L=sap.ui.getCore().byId(l);var o=sap.ui.getCore().byId(T);if(!L){L=new sap.ui.commons.Label({id:l,text:c[d].Label}).data("customAttrName",c[d].Name)}if(!o){o=new sap.ui.commons.TextView({id:T}).data("customAttrName",c[d].Name)}o.bindText("CustomAttributeData",function(v){var p=a.sCollectionPath.replace(/^\//,"")+"('"+this.data("customAttrName")+"')";var g="";if(v!==undefined&&v!==""&&v!==null){for(var i=0;i<v.length;i++){var h=m.oData[v[i]]===undefined?m._original_data[v[i]]:m.oData[v[i]];if(h.Name===this.data("customAttrName")){g=h.Value}}}return g});L.setLabelFor(o);var e=a._createLabelValueMatrixLayout(L,o);if(b%3===1){var B=new sap.ui.commons.layout.BorderLayout({width:"100%",height:"18px"});B.createArea(sap.ui.commons.layout.BorderLayoutAreaTypes.begin,e);B.setAreaData(sap.ui.commons.layout.BorderLayoutAreaTypes.begin,{size:"33.33%",contentAlign:"left",visible:true})}if(b%3===2){B.createArea(sap.ui.commons.layout.BorderLayoutAreaTypes.center,e);B.setAreaData(sap.ui.commons.layout.BorderLayoutAreaTypes.center,{size:"33.33%",contentAlign:"center",visible:true});if(b===n){B.createArea(sap.ui.commons.layout.BorderLayoutAreaTypes.end,new sap.ui.commons.TextView({text:' '}));B.setAreaData(sap.ui.commons.layout.BorderLayoutAreaTypes.end,{size:"33.33%",contentAlign:"left",visible:true})}}if(b%3===0){B.createArea(sap.ui.commons.layout.BorderLayoutAreaTypes.end,e);B.setAreaData(sap.ui.commons.layout.BorderLayoutAreaTypes.end,{size:"33.33%",contentAlign:"left",visible:true})}var f=new sap.ui.commons.layout.MatrixLayoutCell();f.addStyleClass("sapUiExtInboxPaddingBottom");f.addContent(B);C.createRow(f)}return C};sap.uiext.inbox.Inbox.prototype._currentViewElement=function(){var t=sap.ui.getCore().byId(this.getId()+'--'+'listViewTable');var r=sap.ui.getCore().byId(this.getId()+'--'+'tasksRowRepeater');var b,c;if(this.currentView===sap.uiext.inbox.InboxConstants.tableView){c=t}else if(this.currentView===sap.uiext.inbox.InboxConstants.rowRepeaterView){c=r}return c};sap.uiext.inbox.Inbox.prototype._updatePaginator=function(l){var p=this._getComponent('rowRepeaterPaginator');var s=this._getComponent('rowRepeaterRowSettingsSegBtn');var r=sap.ui.getCore().byId(s.getSelectedButton()).getText();p.setNumberOfPages(Math.ceil(l/r))};sap.uiext.inbox.Inbox.prototype._createLabelValueMatrixLayout=function(l,v){l.addStyleClass("sapUiExtInboxCustomAttLabel").setWrapping(false);v.addStyleClass("sapUiExtInboxCustomAttValue").setWrapping(false);var m=new sap.ui.commons.layout.MatrixLayoutCell({hAlign:sap.ui.commons.layout.HAlign.Right,vAlign:sap.ui.commons.layout.VAlign.Top,padding:sap.ui.commons.layout.Padding.End,content:[l]});var M=new sap.ui.commons.layout.MatrixLayoutCell({hAlign:sap.ui.commons.layout.HAlign.Left,vAlign:sap.ui.commons.layout.VAlign.Top,padding:sap.ui.commons.layout.Padding.Begin,content:[v]});return new sap.ui.commons.layout.MatrixLayout().createRow(m,M)};sap.uiext.inbox.Inbox.prototype._getCustomActionsDefinition=function(i,t,s){var a=this;var c=sap.uiext.inbox.InboxConstants.taskDefinitionDecisionOptionsMap;var C=c[t];if(C===undefined&&i){var m=this.getCoreModel();m.read(a.constants.decisionOptionsFunctionImport,null,["InstanceID='"+i+"'&SAP__Origin='"+s+"'",a.constants.formatJSONURLParam],false,function(d,r){C=c[t]=d.results},function(e){})}return C};sap.uiext.inbox.Inbox.prototype._executeCustomAction=function(e,a){var d=e.getSource().data("key");var b=a.inbox;var v=a.view;b.showBusyLoader();var l,r,m;var s=[],c=[],f=[];var g=[];var h="'",j="'";var k=[];var n,o;b.resetSearchCriteria();var m=b.getCoreModel();if(v===b.constants.tableView){l=b._getComponent('listViewTable');if(e.getSource())var p=b.getlistTableSelectedIndices();jQuery.each(p,function(i,x){r=l.getContextByIndex(x);c.push(r);n=m.getProperty("InstanceID",r);o=m.getProperty("SAP__Origin",r);s.push(n);f.push(o);if(i==0){h=h+n;j=j+o}else{h=h+";"+n;j=j+";"+o}});h=h+"'";j=j+"'"}else if(v===b.constants.rowRepeaterView){var C=e.getSource().getBindingContext();n=m.getProperty("InstanceID",C);o=m.getProperty("SAP__Origin",C);s.push(n);f.push(o);h=h+n+"'";j=j+o+"'"}var I,q,t,u;if(b.isBatchOperationSupported){var B,P,w=[];for(var i=0;i<s.length;i++){P=b.constants.decisionExecutionFunctionImport+b.constants.query+"InstanceID='"+s[i]+"'"+b.constants.amperSand+"SAP__Origin='"+f[i]+"'"+b.constants.amperSand+"DecisionKey='"+d+"'";if(k&&k.length>0){P=P+"&Comments='"+k[i]+"'"}B=m.createBatchOperation(P,b.httpMethodForAction);w.push(B)}m.addBatchChangeOperations(w);m.submitBatch(function(x,y){var z=x.__batchResponses;var i,A;var D=0;for(i=0,A=z.length;i<A;i++){var x=z[i];if(x.response.statusCode!==200&&x.response.statusCode!==201){D=D+1}}if(D>0){b.showMessage("error",D+" "+b._oBundle.getText("INBOX_MSG_ACTION_FAILED"))}else{b.showMessage("success",b._oBundle.getText("INBOX_MSG_ACTION_SUCCESS"))}},function(x){b.showMessage("error",b._oBundle.getText("INBOX_MSG_ACTION_FAILED"))},false)}else{I=b.constants.forwardSlash+b.constants.decisionExecutionFunctionImport+b.constants.query+"InstanceID="+h+b.constants.amperSand+"SAP__Origin="+j+b.constants.amperSand+"DecisionKey='"+d+"'"+b.constants.amperSand+b.constants.formatJSONURLParam;if(k&&k.length>0)I=I+"&comments='"+k[0]+"'";q=b.bpmSvcUrl+I;t={async:false,requestUri:q,method:b.httpMethodForAction,headers:{Accept:b.constants.acceptHeaderforJSON,"x-csrf-token":m.oHeaders["x-csrf-token"]}};OData.request(t,function(x,y){b.showMessage("success",b._oBundle.getText("INBOX_MSG_ACTION_SUCCESS"))},function(x){b.showMessage("error",b._oBundle.getText("INBOX_MSG_ACTION_FAILED"))})}b.applyFilterOnResponse(c);b.resetMessages=false};sap.uiext.inbox.Inbox.prototype._deleteCustomActions=function(c){if(this.currentView===this.constants.tableView){this._deleteCustomActionsForTableView()}else if(this.currentView===this.constants.rowRepeaterView){this._deleteCustomActionsForRowRepeaterView()}};sap.uiext.inbox.Inbox.prototype._createCustomActions=function(c,e){if(this.currentView===this.constants.tableView){this._createCustomActionsForTableView(c,e)}else if(this.currentView===this.constants.rowRepeaterView){this._createCustomActionsForRowRepeaterView(c,e)}};sap.uiext.inbox.Inbox.prototype._deleteCustomActionsForTableView=function(c){var t=this;var a=this._getActionButtonToolBarForTableView();var T=a.getItems();for(var i=0;i<T.length;i++){var o=T[i];if(o instanceof sap.ui.commons.Button&&o.data("type")===t.constants.customAction){a.removeItem(o);o.destroy()}if(o instanceof sap.ui.commons.ToolbarSeparator&&o.data("separatorFor")===t.constants.customAction){a.removeItem(o);o.destroy()}}};sap.uiext.inbox.Inbox.prototype._createCustomActionsForTableView=function(c,e){var t=this;var a=this._getActionButtonToolBarForTableView();var n=c.length;var b=3;if(n>0){var s=new sap.ui.commons.ToolbarSeparator();s.data("separatorFor",t.constants.customAction);a.insertItem(s,b);b++}for(var i=0;i<n;i++){var d=c[i];var f=new sap.ui.commons.Button(this.getId()+'--'+d.DecisionKey+'button',{text:d.DecisionText,enabled:e,tooltip:d.Description}).data("type",t.constants.customAction).data("key",d.DecisionKey);f.attachPress({inbox:t,view:t.constants.tableView},t._executeCustomAction);a.insertItem(f,b);b++}};sap.uiext.inbox.Inbox.prototype._createCustomActionsForRowRepeaterView=function(c){var t=this;var a=this._getActionButtonToolBarForTableView();var n=c.length;var r=this._getComponent('rrMainMatrixLayout');var R=this._getComponent('taskActionMatrixLayout');var b=R.getRows()[0];for(var i=0;i<n;i++){var d=c[i];var e=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'dotLabelCell'+d.DecisionKey,hAlign:sap.ui.commons.layout.HAlign.Center,vAlign:sap.ui.commons.layout.VAlign.Top,colSpan:1});var f=new sap.ui.commons.Label(t.getId()+'--'+'dotLabel'+d.DecisionKey,{text:sap.uiext.inbox.InboxConstants.DOT});f.addStyleClass("sapUIExtInboxDotSeperatorStyle");f.data("separatorFor",t.constants.customAction);e.addContent(f);b.addCell(e);var g=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'customActionCell'+d.DecisionKey,hAlign:sap.ui.commons.layout.HAlign.Left,vAlign:sap.ui.commons.layout.VAlign.Bottom,colSpan:1});var h=new sap.ui.commons.Link(t.getId()+'--'+"rrView"+d.DecisionKey+"link",{tootltip:d.Description});h.data("type",t.constants.customAction);h.data("key",d.DecisionKey);h.addStyleClass("sapUiExtInboxLnkNoUnderline");h.setText(d.DecisionText);h.attachPress({inbox:t,view:t.constants.rowRepeaterView,action:d.DecisionKey},t._executeCustomAction);g.addContent(h);b.addCell(g)}};sap.uiext.inbox.Inbox.prototype._deleteCustomActionsForRowRepeaterView=function(c){var t=this;var r=this._getComponent('rrMainMatrixLayout');var R=this._getComponent('taskActionMatrixLayout');var a=R.getRows()[0];var b=a.getCells();for(var i=0;i<b.length;i++){var A=b[i];var o=A.getContent()[0];if(o instanceof sap.ui.commons.Link&&o.data("type")===t.constants.customAction||o instanceof sap.ui.commons.Label&&o.data("separatorFor")===t.constants.customAction){a.removeCell(A);A.destroy();o.destroy()}}};sap.uiext.inbox.Inbox.prototype._getActionButtonToolBarForTableView=function(){return this._getComponent("actionButtonsToolbarContainer")};sap.uiext.inbox.Inbox.prototype._modifyListBindingForExpand=function(a,p){var c=this.constants;var b,l;if(this.currentView===this.constants.tableView){b=sap.ui.getCore().byId(this.getId()+'--'+'listViewTable');if(b!==undefined){l=b.getBinding('rows')}}else if(this.currentView===this.constants.rowRepeaterView){b=sap.ui.getCore().byId(this.getId()+'--'+'tasksRowRepeater');if(b!==undefined){l=b.getBinding('rows')}}var P=l.mParameters;if(!P){l.mParameters={expand:""}}var e=l.mParameters.expand;if(a){if(e){if(e.indexOf(c.customAttributeNavigationParam)===-1){if(e.length>0){e=e+","}e=e+p}}else{e=p}}else{if(e&&e.length>0){var i=e.indexOf(p);if(i>=0){e=e.charAt(i-1)===","?e.replace(","+p,''):e.replace(p,'')}}}if(e.length>0){l.mParameters.expand=e}else{delete l.mParameters.expand}function g(P){var C=[],s={expand:true,select:true};for(var n in P){if(n in s){C.push("$"+n+"="+jQuery.sap.encodeURL(P[n]))}}return C.join("&")}l.sCustomParams=g(l.mParameters)};sap.uiext.inbox.Inbox.prototype.populateRefreshButtonContainer=function(r){var t=this;var a=new sap.ui.commons.layout.MatrixLayoutCell({id:this.getId()+'--'+"refreshButtonCell"});var b=new sap.ui.commons.Image(this.getId()+'--'+"refreshButton",{tooltip:this._oBundle.getText("INBOX_REFRESH_BUTTON_TOOLTIP"),decorative:false});b.setSrc(this._imgResourcePath+sap.uiext.inbox.InboxConstants.refreshImage);b.attachPress(t,t.refreshTaskList);a.addContent(b);a.setPadding(sap.ui.commons.layout.Padding.None);var c=new sap.ui.commons.layout.MatrixLayoutCell({id:this.getId()+'--'+"refreshedOnTextCell",vAlign:sap.ui.commons.layout.VAlign.Bottom,padding:sap.ui.commons.layout.Padding.Top});var d=new sap.ui.commons.Label(this.getId()+'--'+"refreshOnText");t.lastRefreshedOnDateTime=new Date();var e=t._getFormattedRefreshOnDateTime();d.setText(t._oBundle.getText("INBOX_TEXT_ON")+sap.uiext.inbox.InboxConstants.SPACE+e);d.setTooltip(t._getFormattedTooltipForLastRefreshedTime());d.addStyleClass("sapUiExtInboxRefreshedOnStyle");c.addContent(d);r.createRow(a,new sap.ui.commons.Label({text:sap.uiext.inbox.InboxConstants.SPACE}),c)};sap.uiext.inbox.Inbox.prototype._getFormattedRefreshOnDateTime=function(){var d=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:sap.uiext.inbox.InboxConstants.REFRESH_ON_DATE_PATTERN});return d.format(this.lastRefreshedOnDateTime)};sap.uiext.inbox.Inbox.prototype._getFormattedTooltipForLastRefreshedTime=function(){var t=sap.ui.core.format.DateFormat.getDateTimeInstance({style:"medium"});return t.format(this.lastRefreshedOnDateTime)};sap.uiext.inbox.Inbox.prototype._createRRSettingsMenuButton=function(){var t=this;var s=sap.ui.getCore().byId(this.getId()+'--'+'rrSettingsButton');if(!s){s=new sap.ui.commons.MenuButton(t.getId()+'--'+"rrSettingsButton",{tooltip:t._oBundle.getText("INBOX_SETTINGS_BUTTON_TOOLTIP"),icon:t._imgResourcePath+sap.uiext.inbox.InboxConstants.settingsImage,iconHovered:this._imgResourcePath+sap.uiext.inbox.InboxConstants.settingsImageHover,iconSelected:this._imgResourcePath+sap.uiext.inbox.InboxConstants.settingsImageHover,lite:true});var i=new sap.ui.commons.Menu(t.getId()+'--'+'rrSettingsMenu',{tooltip:t._oBundle.getText("INBOX_SETTINGS_BUTTON_TOOLTIP")});s.setMenu(i);s.attachItemSelected(t,t.menuButtonActionEvent);var m=new sap.ui.commons.MenuItem(this.getId()+'--'+"rrManageSubstitutionMI",{text:this._oBundle.getText("INBOX_MANAGE_SUBSTITUTION_RULES_MENU_ITEM"),tooltip:this._oBundle.getText("INBOX_MANAGE_SUBSTITUTION_RULES_MENU_ITEM")});i.addItem(m)}return s};sap.uiext.inbox.Inbox.prototype._executeForwardAction=function(e,p){var l=e.getSource();var a=p.inbox;var d=a.getId()+'--';var f=sap.ui.getCore().byId(d+"forwardTasksPopUp");var t=sap.ui.getCore().byId(d+"userTable");if(f===undefined){var L=new sap.ui.commons.layout.MatrixLayout({id:d+'dLayout',layoutFixed:true,width:'100%',columns:2,widths:['91%','9%']});var s=new sap.ui.commons.TextField({id:d+'searchF',value:a._oBundle.getText("INBOX_SEARCH_FOR_A_COLLEAGUE"),editable:true,width:'100%'});s.addStyleClass("sapUiExtInboxValueHelpTextStyle");s.onfocusin=function(){s.removeStyleClass("sapUiExtInboxValueHelpTextStyle");if(s.getLiveValue()===a._oBundle.getText("INBOX_SEARCH_FOR_A_COLLEAGUE")){s.setValue("")}};s.onfocusout=function(){if(s.getLiveValue()===""){s.addStyleClass("sapUiExtInboxValueHelpTextStyle");s.setValue(a._oBundle.getText("INBOX_SEARCH_FOR_A_COLLEAGUE"))}else{s.setValue(s.getLiveValue())}};var g=new sap.ui.commons.Button(d+"goBtn",{text:a._oBundle.getText("SUBSTITUTION_USERS_PICKLIST_SEARCH_GO_BUTTON"),tooltip:a._oBundle.getText("SUBSTIUTION_RULE_SEARCH_FOR_USERS"),press:function(e){var h=sap.ui.getCore().byId(d+'searchF').getValue();var F=[];var j=new sap.ui.model.Filter("SearchPattern",sap.ui.model.FilterOperator.EQ,h);F.push(j);t.bindRows("/UserInfoCollection",null,F)}});L.createRow(s,g);var u={collection:"UserInfoCollection",propertiesLabel:[a._oBundle.getText("SUBSTITUTION_USERS_PICKLIST_LOGONID"),a._oBundle.getText("SUBSTITUTION_USERS_PICKLIST_NAME")],properties:["UniqueName","DisplayName"]};if(t===undefined){t=new sap.ui.table.Table(d+"userTable",{selectionMode:sap.ui.table.SelectionMode.Single})}t.setModel(a.getModel());t.setVisibleRowCount(5);t.bDynamic=true;for(var i=0;i<=u.properties.length-1;i++){t.addColumn(new sap.ui.table.Column().setLabel(new sap.ui.commons.Label({text:a._oBundle.getText(u.propertiesLabel[i]),design:sap.ui.commons.LabelDesign.Bold})).setTemplate(new sap.ui.commons.TextField({editable:false,value:{path:u.properties[i]}})))}var b=new sap.ui.commons.layout.VerticalLayout(d+"userDialogVLayout",{width:"100%"});b.insertContent(L,0);b.insertContent(t,1);var c;f=new sap.ui.commons.Dialog(d+"forwardTasksPopUp",{modal:true,title:a._oBundle.getText("INBOX_FORWARD_SELECTED_TASKS"),content:[b],buttons:[new sap.ui.commons.Button(d+"forwardTasksPopUpFrwBtn",{text:a._oBundle.getText("INBOX_ACTION_BUTTON_FORWARD"),press:function(h){var j=sap.ui.getCore().byId(d+"userTable");var k=j.getSelectedIndex();var r=j.getContextByIndex(k);var m=sap.ui.getCore().byId(d+'userTable').getModel();var n=m.getProperty("DisplayName",r);if(n===null)n="";c=m.getProperty("UniqueName",r);var o=new sap.ui.base.Event();o.oSource=l;o.mParameters={};a.executeActionOnTask(o,{inbox:a,view:p.view,action:"Forward",forwardTo:c,source:l});f.close();f.destroy()}})]})}f.setWidth("400px");f.open()};sap.uiext.inbox.Inbox.prototype._getExpandParameters=function(){var e="";if(this.showTaskDescription){e="Description"}if(this.isCustomAttributesEnabled){if(e.length>0){e=e+","}e=e+"CustomAttributeData"}return e};sap.uiext.inbox.Inbox.prototype._getFilterArray=function(){var f=[];for(var i in this.filtersToApply){var a=this.filtersToApply[i];if(jQuery.isArray(a)){f=f.concat(a)}else f.push(a)}return f};sap.uiext.inbox.Inbox.prototype._getSelectedItemfromKey=function(t,s){var i=t.getItems();var k=s;var a;for(var j=0;j<i.length;j++){if(k===i[j].getKey()){return i[j]}}};sap.uiext.inbox.Inbox.prototype._resetFlags=function(){this.isSubstitutionEnabled=false;this.isCustomAttributesEnabled=false;this.isCustomActionsEnabled=false;this.showTaskDescription=false};sap.uiext.inbox.Inbox.prototype._createForwardActionLinkCell=function(){var t=this;var f=new sap.ui.commons.layout.MatrixLayoutCell({id:t.getId()+'--'+'forwardActionCell',hAlign:sap.ui.commons.layout.HAlign.Left,vAlign:sap.ui.commons.layout.VAlign.Bottom,colSpan:1});var a=new sap.ui.commons.Link(t.getId()+'--'+"rrViewForwardAction",{visible:false,tootltip:t._oBundle.getText("INBOX_ACTION_BUTTON_FORWARD")});a.addStyleClass("sapUiExtInboxLnkNoUnderline");a.bindProperty("enabled","Status",function(v){if(v!==null){if(v==="RESERVED"||v==="IN_PROGRESS")return true;else if(v==="COMPLETED"){this.setVisible(false)}}return false});var i=false;if(t.isForwardActionEnabled){a.bindProperty("visible","SupportsForward",function(v){i=v;if(i!==null&&!i){}return i});if(i){a.bindProperty("visible","Status",function(v){if((v!=null)&&(v==="COMPLETED")){return false}return true})}}a.setText(t._oBundle.getText("INBOX_ACTION_BUTTON_FORWARD"));a.attachPress({inbox:t,view:t.constants.rowRepeaterView},t._executeForwardAction);f.addContent(a);return f};sap.uiext.inbox.Inbox.prototype._setInboxFiltersVisibility=function(v){if(v===false||v===true){sap.ui.getCore().byId(this.getId()+'--'+"filterViewButton").setVisible(v);sap.ui.getCore().byId(this.getId()+'--'+"filterComboBox1").setVisible(v);sap.ui.getCore().byId(this.getId()+'--'+"filterComboBox2").setVisible(v);sap.ui.getCore().byId(this.getId()+'--'+"filterComboBox3").setVisible(v)}};sap.uiext.inbox.Inbox.prototype._setInboxViewSelectionVisibility=function(v){if(v===false||v===true){sap.ui.getCore().byId(this.getId()+'--'+"tableViewImage").setVisible(v);sap.ui.getCore().byId(this.getId()+'--'+"rrViewImage").setVisible(v)}};sap.uiext.inbox.Inbox.prototype.resizeColumns=function(){var t=this;var w=0;var T=sap.ui.getCore().byId(t.getId()+'--'+'listViewTable');var c=T.getColumns();var a="";jQuery.each(c,function(i,b){if(t.absId(b.getId())==="TaskTitle"){a=b;return false}});if(a&&(a.getVisible()===true)&&((c.length)&&(100/c.length<25))){a.setWidth("20%");w=100/(c.length-1);jQuery.each(c,function(i,b){if(t.absId(b.getId())!=="TaskTitle"){b.setWidth(w+"%")}})}};sap.uiext.inbox.Inbox.prototype._isCompletedTasksSelected=function(){var d=this._getComponent('filterComboBox2');var i=false;if(d.getSelectedItemId()===this.getId()+'--'+'li_completedTasks'){i=true}return i};sap.uiext.inbox.Inbox.prototype._isDrillDownFilterSelected=function(f){var F=false;var c=this._currentViewElement();var a=c.getBinding('rows');if(a&&a.sFilterParams&&a.sFilterParams.indexOf(f)!==-1)F=true;return F}};
