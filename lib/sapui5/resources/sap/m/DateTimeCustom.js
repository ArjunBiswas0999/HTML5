/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
(function($){var c=sap.ui.getCore(),l=sap.m.getLocale(),L=l.getLanguage(),o=sap.m.getLocaleData(),r=c.getLibraryResourceBundle("sap.m"),_=function(t){return r.getText("MOBISCROLL_"+t)},O="",j="sap.ui.thirdparty.mobiscroll.js.",C=$.sap.getModulePath("sap.ui.thirdparty.mobiscroll","/css/"),d={endYear:new Date().getFullYear()+10,lang:L},a={setText:_("SET"),cancelText:_("CANCEL"),monthText:_("MONTH"),dayText:_("DAY"),yearText:_("YEAR"),hourText:_("HOURS"),minuteText:_("MINUTES"),secText:_("SECONDS"),nowText:_("NOW"),dayNames:o.getDays("wide"),dayNamesShort:o.getDays("abbreviated"),monthNames:o.getMonths("wide"),monthNamesShort:o.getMonths("abbreviated")};if($.os.ios){O="ios";d.display="bubble"}else if($.os.android){O="android-ics";if($.os.fVersion==2.3){d.mode="clickpick";d.rows=3}else if($.os.fVersion==3.2){d.mode="scroller"}}$.sap.includeStyleSheet(C+"mobiscroll-core.css");$.sap.require(j+"mobiscroll-core");$.sap.require(j+"mobiscroll-datetime");if(O){d.theme=($.os.android)?O+" light":O;$.sap.includeStyleSheet(C+"mobiscroll-"+O+".css");$.sap.require(j+"mobiscroll-"+O);$.extend($.mobiscroll.themes[d.theme].defaults,d)}$.scroller.i18n[L]=$.extend(a);$.scroller.setDefaults(d);$.sap.require("sap.m.InstanceManager");$.extend(sap.m.DateTimeInput.prototype,{close:function(){this._$input.scroller("hide")},_setScrollerHeader:function(v){try{var s=this._$input.scroller("getInst").settings,f=!this.getType().indexOf("Date")?s.dateFormat:s.timeFormat,D=jQuery.mobiscroll.parseDate(f,v);return sap.ui.core.format.DateFormat.getDateInstance({pattern:this.getDisplayFormat()}).format(D)}catch(e){return v}},_getScrollerConfig:function(){var t=this,T=this.getType(),f=this.getDisplayFormat(),b={preset:T.toLowerCase(),onShow:function(){sap.m.InstanceManager.addDialogInstance(t)},onClose:function(){sap.m.InstanceManager.removeDialogInstance(t)}};if(T=="Date"){f=this._convertDatePattern(f);jQuery.extend(b,{dateFormat:f,dateOrder:this._getLongDatePattern(f).replace(/[^ymd ]/ig,""),})}else if(T=="Time"){f=this._convertTimePattern(f);jQuery.extend(b,{timeWheels:f,timeFormat:f})}else if(T=="DateTime"){f=this._convertDatePattern(this._convertTimePattern(f));jQuery.extend(b,{dateFormat:f,dateOrder:f.replace(/[^ymd ]/ig,""),timeWheels:f,timeFormat:"",separator:""});if(this._getRowForDateTime()){b.rows=this._getRowForDateTime()}}if(/[^ymdhisa\W]/i.test(f)){this._reformat=true;if(!jQuery.os.ios){b.headerText=jQuery.proxy(this._setScrollerHeader,this)}}else{this._reformat=false}return b},_getRowForDateTime:function(){var n,$=jQuery,w=$(window),i=$("<input>"),s=i.remove().scroller({}).scroller("getInst").settings,b=(2*s.rows)+1,e=s.height,f=Math.max(w.height(),w.width());if(b>6&&f<b*e){n=Math.ceil(b/4)}sap.m.DateTimeInput.prototype._getRowForDateTime=function(){return n};$=w=i=s=null;return n},_getLongDatePattern:function(p){p=p||this.getDisplayFormat();return p.replace(/y+/i,"YY").replace(/m+/i,"MM").replace(/d+/,"dd")},_convertTimePattern:function(p){p=p||this.getDisplayFormat();return p.replace(/m/g,"i").replace("a","A")},_convertDatePattern:function(p){p=p||this.getDisplayFormat();var i=p.indexOf('M'),I=p.lastIndexOf('M'),f=p,n;if(i==-1){i=p.indexOf('L');I=p.lastIndexOf('L')}if(i>-1){switch(I-i){case 0:n='m';break;case 1:n='mm';break;case 2:n='M';break;case 5:n='m';break;default:n='MM';break}f=p.substring(0,i)+n+p.substring(I+1)}var N;i=f.indexOf('y');if(i>-1){I=f.lastIndexOf('y');if(I-i==1){N='y'}else{N='yy'}var f=f.substring(0,i)+N+f.substring(I+1)}var s;i=f.indexOf('D');if(i>-1){I=f.lastIndexOf('D');if(I-i==1){s='o'}else{s='oo'}var f=f.substring(0,i)+s+f.substring(I+1)}f=f.replace(/EEEE/g,"DD").replace(/E+/g,"D");return f}})})(jQuery);
