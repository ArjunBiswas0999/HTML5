/*!
 * jQuery MobiScroll v2.3
 * http://mobiscroll.com
 *
 * Copyright 2010-2011, Acid Media
 * Licensed under the MIT license.
 *
 */
(function($){var m=$.mobiscroll,d={invalid:[],showInput:true,inputClass:''},p=function(b){var s=$.extend({},d,b.settings),e=$(this),f,g=this.id+'_dummy',h=0,k=0,q=s.wheelArray||I(e),r=B(h),u=[],x=G(q),w=C(x,h);function y(a,n,c,j){var i=0;while(i<n){var l=$('.dwwl'+i,a),o=z(j,i,c);$.each(o,function(i,v){$('li[data-val="'+v+'"]',l).removeClass('dw-v')});i++}}function z(a,c,j){var i=0,l=j,o=[];while(i<c){var t=a[i];for(var n in l){if(l[n].key==t){l=l[n].children;break}}i++}i=0;while(i<l.length){if(l[i].invalid){o.push(l[i].key)}i++}return o}function A(n,i){var a=[];while(n){a[--n]=true}a[i]=false;return a}function B(l){var a=[],i;for(i=0;i<l;i++){a[i]=s.labels&&s.labels[i]?s.labels[i]:i}return a}function C(a,l,c){var i=0,j,o,n,w=[{}],t=q;if(l){for(j=0;j<l;j++){w[j]={};w[j][r[j]]={}}}while(i<a.length){w[i]={};w[i][r[i]]=E(t);j=0;n=undefined;while(j<t.length&&n===undefined){if(t[j].key==a[i]&&((c!==undefined&&i<=c)||c===undefined)){n=j}j++}if(n!==undefined&&t[n].children){i++;t=t[n].children}else if((o=D(t))&&o.children){i++;t=o.children}else{return w}}return w}function D(a,c){if(!a){return false}var i=0,o;while(i<a.length){if(!(o=a[i++]).invalid){return c?i-1:o}}return false}function E(o){var a={},j=0;while(j<o.length){a[o[j].key]=o[j++].value}return a}function F(a,i){$('.dwc',a).css('display','').slice(i).hide()}function G(q){var t=[],n=q,o,a=true,i=0;while(a){o=D(n);t[i++]=o.key;if(a=o.children){n=o.children}}return t}function H(a,c){var t=[],n=q,h=0,j=false,i,l,o;if(a[h]!==undefined&&h<=c){i=0;l=a[h];o=undefined;while(i<n.length&&o===undefined){if(n[i].key==a[h]&&!n[i].invalid){o=i}i++}}else{o=D(n,true);l=n[o].key}j=o!==undefined?n[o].children:false;t[h]=l;while(j){n=n[o].children;h++;j=false;o=undefined;if(a[h]!==undefined&&h<=c){i=0;l=a[h];o=undefined;while(i<n.length&&o===undefined){if(n[i].key==a[h]&&!n[i].invalid){o=i}i++}}else{o=D(n,true);o=o===false?undefined:o;l=n[o].key}j=o!==undefined&&D(n[o].children)?n[o].children:false;t[h]=l}return{lvl:h+1,nVector:t}}function I(a){var i=[];h=h>k++?h:k;a.children('li').each(function(j){var t=$(this),c=t.clone();c.children('ul,ol').remove();var v=c.html().replace(/^\s\s*/,'').replace(/\s\s*$/,''),l=t.data('invalid')?true:false,n={key:t.data('val')||j,value:v,invalid:l,children:null},o=t.children('ul,ol');if(o.length){n.children=I(o)}i.push(n)});k--;return i}$('#'+g).remove();if(s.showInput){f=$('<input type="text" id="'+g+'" value="" class="'+s.inputClass+'" readonly />').insertBefore(e);b.settings.anchor=f;if(s.showOnFocus){f.focus(function(){b.show()})}}if(!s.wheelArray){e.hide().closest('.ui-field-contain').trigger('create')}return{width:50,wheels:w,headerText:false,onBeforeShow:function(a){var t=b.temp;u=b.temp.slice(0);b.settings.wheels=C(t,h,h)},onSelect:function(v,b){if(f){f.val(v)}},onChange:function(v,b){if(f&&s.display=='inline'){f.val(v)}},onClose:function(){if(f){f.blur()}},onAnimStart:function(i){b.settings.readonly=A(h,i)},validate:function(a,c){var t=b.temp;if(c!==undefined&&u[c]!=t[c]){b.settings.wheels=C(t,null,c);var j=[],i=c,o=H(t,c);b.temp=o.nVector.slice(0);while(i<o.lvl){j.push(i++)}F(a,o.lvl);b.changeWheel(j);u=b.temp.slice(0);y(a,o.lvl,q,b.temp)}else{var o=H(t,t.length);y(a,o.lvl,q,t);F(a,o.lvl)}b.settings.readonly=false}}};$.each(['list','image','treelist'],function(i,v){m.presets[v]=p;m.presetShort(v)})})(jQuery);
